var WM=window.angular,wm={};wm.init=function(){"use strict";wm.modules={},wm.plugins={}}(),WM.module("wm.layouts.page",[]),WM.module("wm.layouts.container",[]),WM.module("wm.layouts.device",[]),WM.module("wm.widgets.basic",["toaster"]),WM.module("wm.widgets.form",[]),WM.module("wm.widgets.dialog",["ui.bootstrap.modal"]),WM.module("wm.widgets.grid",[]),WM.module("wm.widgets.live",[]),WM.module("wm.widgets.advanced",[]),WM.module("wm.widgets.prefabs",[]),WM.module("wm.layouts",["wm.layouts.page","wm.layouts.container","wm.layouts.device"]),WM.module("wm.widgets",["wm.widgets.base","wm.widgets.basic","wm.widgets.form","wm.widgets.dialog","wm.widgets.grid","wm.widgets.live","wm.widgets.advanced","wm.widgets.prefabs"]),WM.module("wm.utils",[]).service("Utils",["$rootScope","$location","$window","CONSTANTS","$sce","$timeout",function($rootScope,$location,$window,APPCONSTANTS,$sce){"use strict";function hyphenate(name){return name.replace(REGEX.SNAKE_CASE,function(letter,pos){return(pos?"-":"")+letter.toLowerCase()})}function initCaps(name){return name?name.charAt(0).toUpperCase()+name.substring(1):""}function isValidWebURL(url){return REGEX.VALID_WEB_URL.test(url)}function getParentOverlayElZIndex(element){var parentEl,parentOverlay,parentOvleryZIndex;return parentEl=element.parent().closest("[widgetid]"),parentEl.length>0?(parentEl=parentEl.eq(0),parentOverlay=parentEl.data("overlayElement"),parentOvleryZIndex=parentOverlay?parentOverlay.css("zIndex"):parentEl.parent().data("overlayElement")?parseInt(parentEl.parent().data("overlayElement").css("zIndex"),10)+10:10,+parentOvleryZIndex):100}function formatVariableIconClass(variableCategory){return variableCategoryMap[variableCategory]}function pushFieldDef(dataObject,columnDefObj,namePrefix,propObj){WM.forEach(dataObject,function(value,title){if(title=namePrefix?namePrefix+"."+title:title,WM.isObject(value))propObj.includeParentNode&&propObj.columnCount!==propObj.upperBound&&columnDefObj.push({field:title,displayName:title}),pushFieldDef(value,columnDefObj,title,propObj);else{if(propObj.columnCount===propObj.upperBound)return;columnDefObj.push({field:title,displayName:title}),propObj.columnCount+=1}})}function prepareFieldDefs(data,columnUpperBound,includeParentNode){data&&0!==data.length||(data=[{column1:"",column2:"",column3:"",column4:"",column5:""}]);var columnDef=[],dataObject=data[0];return pushFieldDef(dataObject,columnDef,"",{upperBound:columnUpperBound,columnCount:0,includeParentNode:includeParentNode}),columnDef}function swapArrayElements(array,index1,index2){var temp=array[index1];return array[index1]=array[index2],array[index2]=temp,array}function swapProperties(data,property1,property2){var temp=data[property1];data[property1]=data[property2],data[property2]=temp}function triggerFn(fn){WM.isFunction(fn)&&fn.apply(null,sliceFn.call(arguments,1))}function isStyleSheetLoaded(href){return WM.element("link[href='"+href+"']").length>0}function removeStyleSheetLoaded(href){var styleTag=WM.element("link[href='"+href+"']");styleTag.length&&styleTag.remove()}function loadStyleSheet(url,attr){if(!isStyleSheetLoaded(url)){var link=linkEl.cloneNode();link.href=url,attr&&attr.name&&link.setAttribute(attr.name,attr.value),headNode.appendChild(link)}}function loadStyleSheets(urlArray){urlArray&&(WM.isArray(urlArray)||(urlArray=[urlArray]),WM.forEach(urlArray,loadStyleSheet))}function isScriptLoaded(src){return WM.element("script[src='"+src+"']").length>0||WM.element("script[data-src='"+src+"']").length>0}function fetchContent(dataType,url,successCallback,errorCallback,inSync){WM.element.ajax({type:"get",dataType:dataType,url:url,success:successCallback,error:errorCallback,async:!inSync})}function loadScripts(scripts,onsuccess,onerror,hasError,jqxhr){if(!scripts||0===scripts.length)return void(hasError?triggerFn(onerror,jqxhr):triggerFn(onsuccess,jqxhr));var url=scripts.shift();return isScriptLoaded(url)?void loadScripts(scripts,onsuccess,onerror):void WM.element.getScript(url).done(function(script,textStatus,jqxhr){loadScripts(scripts,onsuccess,onerror,!1,jqxhr)}).fail(function(jqxhr){loadScripts([],onsuccess,onerror,!0,jqxhr)})}function loadScriptsInSync(urlArray){if(0!==urlArray.length){var url=urlArray.shift();!isScriptLoaded(url)&&url&&url&&fetchContent("text",url,function(response){var script=scriptEl.cloneNode();script.text=response,script.setAttribute("data-src",url),headNode.appendChild(script),loadScriptsInSync(urlArray)},null,!0)}}function isImageFile(fileName){return REGEX.SUPPORTED_IMAGE_FORMAT.test(fileName)}function isZipFile(fileName){return REGEX.ZIP_FILE.test(fileName)}function isExeFile(fileName){return REGEX.EXE_FILE.test(fileName)}function isTextLikeFile(fileName){return REGEX.SUPPORTED_FILE_FORMAT.test(fileName)}function isAudioFile(fileName){return REGEX.SUPPORTED_AUDIO_FORMAT.test(fileName)}function isVideoFile(fileName){return REGEX.SUPPORTED_VIDEO_FORMAT.test(fileName)}function isPageResource(path){return REGEX.PAGE_RESOURCE_PATH.test(path)}function isAndroid(){return REGEX.ANDROID.test(userAgent)}function isAndroidPhone(){return isAndroid()&&REGEX.MOBILE.test(userAgent)}function isIphone(){return REGEX.IPHONE.test(userAgent)}function isIpod(){return REGEX.IPOD.test(userAgent)}function isWindowsPhone(){return REGEX.WINDOWS.test(userAgent)}function isMobile(){return APPCONSTANTS.isRunMode?isAndroidPhone()||isIphone()||isIpod()||isWindowsPhone()||WM.element("#wm-mobile-display:visible").length>0:!1}function isValidJavaPackageName(pkgName){return pkgName.match(/^\w[\w\d_.]*[\w\d]$/)}function getImageUrl(urlString){return APPCONSTANTS.isRunMode?urlString:isValidWebURL(urlString)?urlString:(isImageFile(urlString)||(urlString="resources/images/imagelists/default-image.png"),stringStartsWith(urlString,"../services/prefabs")?urlString:urlString="../services/projects/"+$rootScope.project.id+"/web/"+urlString)}function getResourceURL(urlString){return isValidWebURL(urlString)?$sce.trustAsResourceUrl(urlString):APPCONSTANTS.isRunMode?urlString:stringStartsWith(urlString,"../services/prefabs")?urlString:urlString="../services/projects/"+$rootScope.project.id+"/web/"+urlString}function getBackGroundImageUrl(urlString){return""===urlString||"none"===urlString?urlString:"url("+getImageUrl(urlString)+")"}function stringStartsWith(str,startsWith,ignoreCase){if(!str)return!1;var regEx=new RegExp("^"+startsWith,ignoreCase?"i":[]);return regEx.test(str)}function stringEndsWith(str,endsWith,ignoreCase){if(!str)return!1;var regEx=new RegExp(endsWith+"$",ignoreCase?"i":[]);return regEx.test(str)}function isEmptyObject(obj){return 0===Object.keys(obj).length}function isValidEmail(email){return REGEX.VALID_EMAIL.test(email)}function fetchPropertiesMapColumns(propertiesMap,namePrefix){var columns={},relatedColumnsArr=[];return WM.forEach(propertiesMap.columns,function(val){if(val.isRelated){if(val.isList)return;relatedColumnsArr.push(val)}else{var columnName=namePrefix?namePrefix+"."+val.fieldName:val.fieldName;columns[columnName]={},columns[columnName].type=val.type,columns[columnName].isPrimaryKey=val.isPrimaryKey,columns[columnName].generator=val.generator}}),WM.forEach(relatedColumnsArr,function(val){WM.extend(columns,fetchPropertiesMapColumns(val,val.fieldName))}),columns}function resetObjectWithEmptyValues(object){var properties;return object&&(properties={},WM.forEach(object,function(value,key){properties[key]=""})),properties}function getCurrentPage(){var pathName=location.pathname;return pathName.split("/").pop()||"index.html"}function isDebugMode(){return-1!==getCurrentPage().indexOf("-debug")}function getIndexPage(){return isDebugMode()?"index-debug.html":"index.html"}function redirectToIndexPage(path){$window.location=path?indexPage+"#"+path:indexPage}function redirectToLoginPage(){var locationHash=$location.$$path,currentPageName=getCurrentPage();browserStorage.storeItem("wm.referenceUrlToStudio",currentPageName+"#"+locationHash),$window.location=APPCONSTANTS.LOGIN_PAGE}function handleUploadIFrameOnLoad(iFrameElement,successCallback,errorCallback){var serverResponse;iFrameElement.off("load",function(){handleUploadIFrameOnLoad(iFrameElement,successCallback,errorCallback)}),serverResponse=WM.element("#fileUploadIFrame").contents().find("body").text(),iFrameElement.first().remove(),serverResponse.errorDetails?triggerFn(errorCallback):triggerFn(successCallback,serverResponse)}function fileUploadFallback(uploadConfig,successCallback,errorCallback){var formElement,formAction,dataArray,index,dataObj,dataElement,elementName,elementValue,key,iFrameElement=WM.element("<iframe id='fileUploadIFrame' name='fileUploadIFrame' style='display: none;'></iframe>");if(uploadConfig&&(formAction=uploadConfig.url),WM.element("body").append(iFrameElement),iFrameElement.on("load",function(){handleUploadIFrameOnLoad(iFrameElement,successCallback,errorCallback)}),formElement=WM.element("*[name="+uploadConfig.formName+"]").first(),uploadConfig.data)for(dataArray=uploadConfig.data,index=0;index<dataArray.length;index+=1){dataObj=dataArray[index];for(key in dataObj)dataObj.hasOwnProperty(key)&&(elementName=key,elementValue=dataObj[key]);dataElement=WM.element('<input type="hidden" name="'+elementName+'" value="'+elementValue+'"/>'),formElement.append(dataElement)}formElement.attr({target:"fileUploadIFrame",action:formAction,method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"}),formElement.submit()}function findValueOf(obj,key){if(obj&&key){for(var parts=key.split(".");0!==parts.length&&obj;)obj=obj[parts.shift()];return obj}}function replace(template,map){return template?template.replace(REGEX.REPLACE_PATTERN,function(match,key){return findValueOf(map,key)}):void 0}function getLoadedPrefabNames(){return WM.element("[prefabname]").map(function(i,el){return WM.element(el).attr("prefabname")})}function initializeAction(op,callback){var img=new Image,version=$rootScope.studioInfo&&$rootScope.studioInfo.product&&$rootScope.studioInfo.product.version||"",revision=$rootScope.studioInfo&&$rootScope.studioInfo.product&&$rootScope.studioInfo.product.revision||"";img.onload=function(){triggerFn(callback)},img.onerror=function(){triggerFn(callback)},img.src="http://wavemaker.com/img/blank.gif?op="+op+"&v="+version+"&r="+revision+"&preventCache="+String(Math.random((new Date).getTime())).replace(/\D/,"").substring(0,8)}function addNodeToJson(tree,nodeId,parentNodeId,options){var i,node={id:nodeId,collapsed:options.collapsed,"class":options.class,active:options.active,props:options.nodeProps,isDeletable:options.isDeletable,onDelete:options.onDelete};if(!WM.isUndefined(tree)){if(WM.isUndefined(parentNodeId))return void tree[0].children.push(node);if(tree.id===parentNodeId){if(tree.children&&WM.isArray(tree.children)){if(nodeExists(tree.children,nodeId))return}else tree.children=[];return void tree.children.push(node)}if(tree.length>0)for(i=0;i<tree.length;i+=1){if(tree[i].id===parentNodeId){if(tree[i].children&&WM.isArray(tree[i].children)){if(nodeExists(tree[i].children,nodeId))return}else tree[i].children=[];return void tree[i].children.push(node)}tree[i].children&&addNodeToJson(tree[i].children,nodeId,parentNodeId,options)}}}function removeJsonNodeChildren(tree,nodeId){var index,treeLength;if(!WM.isUndefined(tree))for(treeLength=tree.length,index=0;treeLength>index;index+=1){if(tree[index].id===nodeId)return void(tree[index].children=[]);removeJsonNodeChildren(tree[index].children,nodeId)}}function isValidJSON(content){try{return JSON.parse(content)}catch(e){return!1}}function prettifyJS(content){return window.js_beautify?window.js_beautify(content):(loadScriptsInSync(["_static_/components/js-beautify/js/lib/beautify.js"]),window.js_beautify(content))}function prettifyHTML(content){return window.html_beautify?window.html_beautify(content):(loadScriptsInSync(["_static_/components/js-beautify/js/lib/beautify-html.js"]),window.html_beautify(content))}function prettifyCSS(content){return window.css_beautify?window.css_beautify(content):(loadScriptsInSync(["_static_/components/js-beautify/js/lib/beautify-css.js"]),window.css_beautify(content))}function getActionFromKey(event){var ctrlOrMetaKey=isAppleProduct?event.metaKey:event.ctrlKey;if(isAppleProduct){if(8===event.which)return"DELETE"}else if(46===event.which)return"DELETE";if(ctrlOrMetaKey)switch(event.which){case 83:return"SAVE";case 88:return"CUT";case 67:return"COPY";case 86:return"PASTE";case 90:return event.shiftKey?"REDO":"UNDO"}else if(13===event.which)return"ENTER";return"UNKNOWN"}function preventCachingOf(url){if(url){var _url=url+(-1!==url.indexOf("?")?"&":"?");return _url+="preventCache="+Date.now()}}function getAllKeysOf(obj,prefix){var keys=[];return prefix=prefix?prefix+".":"",WM.isObject(obj)&&!WM.isArray(obj)&&Object.keys(obj).forEach(function(key){keys.push(prefix+key),keys=keys.concat(getAllKeysOf(obj[key],prefix+key))}),keys}function getService(serviceName){if(serviceName){var injector,appEl=WM.element("[data-ng-app]");return appEl&&(injector=appEl.injector())?injector.get(serviceName):void 0}}function removeProtocol(url){var newUrl;return newUrl=-1!==url.indexOf("http")?url.substr(-1!==url.indexOf("https:")?6:5):url}function getCookieByName(name){var cookiesArray=document.cookie.split("; "),cookies={};return cookiesArray.forEach(function(cookie){var cookieArray=cookie.split("=");cookies[cookieArray[0]]=cookieArray[1]}),cookies[name]}function isPageable(obj){var pageable={content:[],first:!0,firstPage:!0,last:!0,lastPage:!0,number:0,numberOfElements:10,size:20,sort:null,totalElements:10,totalPages:1};return WM.equals(Object.keys(pageable),Object.keys(obj).sort())}function isNumberType(type){return-1!==NUMBER_TYPES.indexOf(type)}function isFileUploadSupported(){return window.File&&window.FileReader&&window.FileList&&window.Blob}function processMarkup(markupStr){return markupStr?markupStr.replace(/>\s+</g,"><"):""}var userAgent=navigator.userAgent,scriptEl=document.createElement("script"),linkEl=document.createElement("link"),headNode=document.getElementsByTagName("head")[0],isAppleProduct=/Mac|iPod|iPhone|iPad/.test(navigator.platform),sliceFn=Array.prototype.slice,REGEX={SNAKE_CASE:/[A-Z]/g,ANDROID:/Android/i,IPHONE:/iPhone/i,IPOD:/iPod/i,MOBILE:/Mobile/i,WINDOWS:/Windows Phone/i,SUPPORTED_IMAGE_FORMAT:/\.(bmp|gif|jpe|jpg|jpeg|tif|tiff|pbm|png|ico)$/i,SUPPORTED_FILE_FORMAT:/\.(txt|js|css|html|script|properties|json|java|xml|smd|xmi)$/i,SUPPORTED_AUDIO_FORMAT:/\.(mp3|ogg|webm|wma|3gp|wav)$/i,SUPPORTED_VIDEO_FORMAT:/\.(mp4|ogg|webm|wmv|mpeg|mpg|avi)$/i,PAGE_RESOURCE_PATH:/^\/pages\/.*\.(js|css|html|json)$/,VALID_EMAIL:/^[a-zA-Z][\w.]+@[a-zA-Z_]+?\.[a-zA-Z.]{1,4}[a-zA-Z]$/,VALID_WEB_URL:/^(http[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/,REPLACE_PATTERN:/\$\{([^\}]+)\}/g,ZIP_FILE:/\.zip$/i,EXE_FILE:/\.exe$/i},NUMBER_TYPES=["int","integer","float","double","short","byte"],hasLocalStorage="localStorage"in window&&null!==window.localStorage,browserStorage={storeItem:function(key,value){hasLocalStorage&&window.localStorage.setItem(key,value)},getItem:function(key){return hasLocalStorage?window.localStorage.getItem(key):void 0},deleteItem:function(key){hasLocalStorage&&delete window.localStorage[key]}},isIE=function(){return userAgent.indexOf("MSIE")>-1},nodeExists=function(tree,nodeId){var index,treeLength;if(void 0===tree)return!1;for(treeLength=tree.length,index=0;treeLength>index;index+=1)if(tree[index].id===nodeId)return!0;return!1},variableCategoryMap={"wm.Variable":"variable","wm.ServiceVariable":"service-variable","wm.LiveVariable":"live-variable","wm.LoginVariable":"login-variable","wm.LogoutVariable":"logout-variable","wm.NavigationVariable":"navigation-variable","wm.NotificationVariable":"notification-variable"},indexPage=getIndexPage();return linkEl.rel="stylesheet",linkEl.type="text/css",$rootScope.$safeApply=function($scope,fn){$rootScope.$$phase||$scope.$$phase?triggerFn(fn):$scope.$apply(fn)},{camelCase:WM.element.camelCase,initCaps:initCaps,getImageUrl:getImageUrl,getResourceUrl:getResourceURL,formatVariableIconClass:formatVariableIconClass,getBackGroundImageUrl:getBackGroundImageUrl,getParentOverlayElZIndex:getParentOverlayElZIndex,hyphenate:hyphenate,isAndroid:isAndroid,isAndroidPhone:isAndroidPhone,isIphone:isIphone,isIpod:isIpod,isMobile:isMobile,isScriptLoaded:isScriptLoaded,isValidJavaPackageName:isValidJavaPackageName,stringStartsWith:stringStartsWith,stringEndsWith:stringEndsWith,isStyleSheetLoaded:isStyleSheetLoaded,isValidWebURL:isValidWebURL,loadScripts:loadScripts,loadStyleSheets:loadStyleSheets,loadStyleSheet:loadStyleSheet,prepareGridFieldDefs:prepareFieldDefs,prettifyCSS:prettifyCSS,prettifyHTML:prettifyHTML,prettifyJS:prettifyJS,swapArrayElements:swapArrayElements,swapProperties:swapProperties,triggerFn:triggerFn,isEmptyObject:isEmptyObject,isValidEmail:isValidEmail,resetObjectWithEmptyValues:resetObjectWithEmptyValues,isImageFile:isImageFile,isZipFile:isZipFile,isExeFile:isExeFile,isTextLikeFile:isTextLikeFile,isAudioFile:isAudioFile,isVideoFile:isVideoFile,isPageResource:isPageResource,findValueOf:findValueOf,replace:replace,removeStyleSheetLoaded:removeStyleSheetLoaded,fileUploadFallback:fileUploadFallback,getCurrentPage:getCurrentPage,isDebugMode:isDebugMode,getIndexPage:getIndexPage,redirectToIndexPage:redirectToIndexPage,redirectToLoginPage:redirectToLoginPage,browserStorage:browserStorage,fetchPropertiesMapColumns:fetchPropertiesMapColumns,getLoadedPrefabNames:getLoadedPrefabNames,initializeAction:initializeAction,addNodeToJson:addNodeToJson,removeJsonNodeChildren:removeJsonNodeChildren,isIE:isIE,isValidJSON:isValidJSON,getActionFromKey:getActionFromKey,preventCachingOf:preventCachingOf,getAllKeysOf:getAllKeysOf,fetchContent:fetchContent,getService:getService,removeProtocol:removeProtocol,getCookieByName:getCookieByName,isPageable:isPageable,isNumberType:isNumberType,isFileUploadSupported:isFileUploadSupported,processMarkup:processMarkup}}]),wm.modules.wmCommon=WM.module("wm.common",[]),wm.modules.wmCommon.controllers={},wm.modules.wmCommon.directives={},wm.modules.wmCommon.factories={},wm.modules.wmCommon.services={},wm.modules.wmCommon.providers={},wm.modules.wmCommon.services.$ocLazyLoad=WM.noop,wm.modules.wmCommon.controller(wm.modules.wmCommon.controllers),wm.modules.wmCommon.directive(wm.modules.wmCommon.directives),wm.modules.wmCommon.factory(wm.modules.wmCommon.factories),wm.modules.wmCommon.service(wm.modules.wmCommon.services),wm.modules.wmCommon.provider(wm.modules.wmCommon.providers),wm.modules.wmCommon.constant("CONSTANTS",{PAGE_DIRECTORY:"pages/",PROJECT_PATH:"/project/",MAIN_PAGE:"Main",PROJECTS_LIST_PAGE:"index.html",PROJECTS_LIST_DEBUG_PAGE:"index-debug.html",PROJECT_PAGE:"project.html",PROJECT_DEBUG_PAGE:"project-debug.html",LOGIN_PAGE:"https://stage-studio.wavemaker.com/login",LOGOUT_PAGE:"/login/signout",ACCESS_DENIED_PAGE:"403.html",DEFAULT_PAGE_NAME:"Page",FILE_EXTENSION_MARKUP:".html",FILE_EXTENSION_SCRIPT:".js",FILE_EXTENSION_STYLE:".css",FILE_EXTENSION_VARIABLES:".variables.json",DEFAULT_TEMPLATE:{id:"",name:"default_project",description:null},DEFAULT_TEMPLATE_NAMES:{DEFAULT:"default",PREFAB:"prefab",ESHOP:"eshop"},isStudioMode:!0}),wm.modules.wmCommon.constant("ROUTE_CONSTANTS",{PROJECTS_LIST:"/projects",USERS_LIST:"/users",USER_PROFILE:"/user/profile/:path",USER_PROFILE_DEFAULT:"/user/profile/update-profile",USER_PROFILE_CLOUD:"/user/profile/cloud",USER_CHANGE_PASSWORD:"/user/change-password",USER_UPDATE_PROFILE:"/user/update-profile",ACCOUNTS:"/accounts",LOGOUT:"/logout",PROJECT_NOT_FOUND:"/project/404",ACCESS_DENIED:"/access-denied"}),wm.modules.wmCommon.constant("SERVICE_TYPE_CONSTANTS",{JAVA_SERVICE:"JavaService",WM_JAVA_SERVICE:"wm.JavaService",JAVA_SERVICE_WORKSPACE_TYPE:"javaservice",DEFAULT_JAVA_SERVICE_NAME:"MyJavaService",JAVA_SERVICE_TREE_ROOT_NODE_ICON_CLASS:"java-service",SECURITY_SERVICE:"Security",SECURITY_SERVICE_CLASS:"security-service",SECURITY_SERVICE_WORKSPACE_TYPE:"securityservice"}),wm.modules.wmCommon.constant("USER_ROLE_CONSTANTS",{ADMIN:"admin"}),wm.modules.wmCommon.constant("EXTERNAL_LINK_CONSTANTS",{CLOUDJEE_SIGNUP_PAGE:"https://staging.wavemakercloud.com/login/signup"}),wm.modules.wmCommon.constant("WM_COMMON_SERVICE_URLS",{Studio:{getPreferences:{url:"../services/studio/preferences/",method:"GET"},setPreferences:{url:"../services/studio/preferences/",method:"POST"},prefabs:{url:"../services/prefabs/",method:"GET"},ServerLogs:{url:"../services/studio/logs/:lineCount",method:"GET"},about:{url:"../services/studio/about",method:"GET"}},Project:{create:{url:"../services/projects",method:"POST"},copy:{url:"../services/copy",method:"POST"},remove:{url:"../services/projects/:projectID",method:"DELETE"},get:{url:"../services/projects/:projectID",method:"GET"},list:{url:"../services/projects",method:"GET"},run:{url:"../services/deployment/jobs",method:"POST"},clean:{url:"../services/deployment/jobs",method:"POST"},deploy:{url:"../services/deployment/jobs",method:"POST"},"import":{url:"../services/import",method:"POST",headers:{"Content-Type":void 0},params:{packageType:"PROJECT"},transformRequest:WM.identity},"export":{url:"../services/export",method:"POST"},downloadZip:{url:"../services/download?fileType=zip&packageType=project&sourceName=:projectID&targetName=:path",method:"GET"},getUsers:{url:"../services/projects/:projectID/users",method:"GET"},addUser:{url:"../services/projects/:projectID/users",method:"POST"},removeUser:{url:"../services/projects/:projectID/users",method:"DELETE",headers:{"Content-Type":"application/json"}}},User:{login:{url:"../services/auth/loginservice",method:"POST"},logout:{url:"../services/auth/logoutservice",method:"GET"},list:{url:"../services/users/",method:"GET"},fetch:{url:"../services/auth/loggedinuserdetails",method:"GET"},register:{url:"../services/users/",method:"POST"},update:{url:"../services/users/",method:"PUT"},changePassword:{url:"../services/users/passwordservice/changepassword",method:"POST"}},Template:{list:{url:"../services/templates/",method:"GET"},remove:{url:"../services/templates/:templateID",method:"DELETE"}},Theme:{listInStudio:{url:"../services/themes/",method:"GET"},listInProject:{url:"../services/projects/:projectID/themes",method:"GET"},"import":{url:"../services/import",method:"POST",headers:{"Content-Type":void 0},params:{packageType:"THEME"},transformRequest:WM.identity},register:{url:"../services/projects/:projectID/themes/register",method:"POST"},deRegister:{url:"../services/projects/:projectID/themes/deregister",method:"POST"},getActive:{url:"../services/projects/:projectID/themes/active",method:"GET"},setActive:{url:"../services/projects/:projectID/themes/activate",method:"POST"},deActive:{url:"../services/projects/:projectID/themes/deactivate",method:"POST"},remove:{url:"../services/themes/:themeID",method:"DELETE"}},Prefab:{list:{url:"../services/prefabs/",method:"GET"},getConfig:{url:"prefabs/:prefab/webapp/config.json",method:"GET"},register:{url:"../services/projects/:projectID/prefabs",method:"POST"},"import":{url:"../services/import",method:"POST",headers:{"Content-Type":void 0},params:{packageType:"PREFAB"},transformRequest:WM.identity},"export":{url:"../services/export",method:"POST"},downloadZip:{url:"../services/download?fileType=zip&packageType=prefab&sourceName=:projectID&targetName=:path",method:"GET"},remove:{url:"../services/prefabs/:prefabID",method:"DELETE"}},FILE:{read:{url:"../services/projects/:projectID/web/:filePath",method:"GET"},write:{url:"../services/projects/:projectID/web/:filePath",method:"POST"},remove:{url:"../services/projects/:projectID/web/:filePath",method:"DELETE"},upload:{url:"../services/projects/:projectID/web/:filePath",method:"POST",headers:{"Content-Type":void 0},transformRequest:WM.identity},uploadPrefab:{url:"../services/prefabs",method:"POST",headers:{"Content-Type":void 0},transformRequest:WM.identity},registerFileUploadWidget:{url:"../services/fileservice/jobs",method:"POST"}},FILE_RUN:{read:{url:":filePath",method:"GET"}}}),wm.modules.wmCommon.config(function(BaseServiceManagerProvider,WM_COMMON_SERVICE_URLS){"use strict";BaseServiceManagerProvider.register(WM_COMMON_SERVICE_URLS)}),wm.modules.wmCommon.run(function(Utils,CONSTANTS){"use strict";CONSTANTS.isMobile=Utils.isMobile(),CONSTANTS.isIE=Utils.isIE()}),wm.modules.wmCommon.providers.BaseServiceManager=function(){"use strict";function register(serviceConfig){WM.extend(baseServiceConfig,serviceConfig)}function getConfig(){return WM.copy(baseServiceConfig)}var baseServiceConfig={};this.getConfig=getConfig,this.register=register,this.$get=function(){return{getConfig:getConfig,register:register}}},wm.modules.wmCommon.services.BaseService=["$http","$rootScope","$injector","BaseServiceManager","DialogService","Utils","CONSTANTS",function($http,$rootScope,$injector,BaseServiceManager,DialogService,Utils,CONSTANTS){"use strict";var wmLogger,wmToaster,errorCallStack=[],logAction=function(type,message,description){if(wmLogger)switch(type){case"debug":wmLogger.debug(message,description);break;case"success":wmLogger.success(message,description);break;case"failure":wmLogger.error(message,description)}},displayMessage=function(type,messageTitle,messageDescription){if(wmToaster)switch(type){case"success":wmToaster.show("success",messageTitle,messageDescription);break;case"failure":wmToaster.show("error",messageTitle,messageDescription)}},parseReplace=function(serviceParams){var val,param,config=BaseServiceManager.getConfig(),urlParams=serviceParams.urlParams;if(config.hasOwnProperty(serviceParams.target)&&config[serviceParams.target].hasOwnProperty(serviceParams.action)){if(config=WM.copy(config[serviceParams.target][serviceParams.action]),config.url=(serviceParams.config?serviceParams.config.url:"")+config.url,urlParams)for(param in urlParams)urlParams.hasOwnProperty(param)&&(val=urlParams[param],WM.isDefined(val)&&null!==val&&(config.url=config.url.replace(new RegExp(":"+param,"g"),val)));return config.url+=config.url.indexOf("?")<0?"?preventCache="+Date.now():"&preventCache="+Date.now(),serviceParams.params&&(config.params=serviceParams.params),serviceParams.data&&(config.data=serviceParams.data),serviceParams.dataParams&&(config.data.params=serviceParams.dataParams),serviceParams.headers&&(config.headers=serviceParams.headers),config}return null},parseError=function(errorDetails){var i,val,errMsg;if($rootScope.locale&&$rootScope.locale[errorDetails.code]){for(errMsg=WM.copy($rootScope.locale[errorDetails.code]),i=0;i<errorDetails.data.length;i+=1)val=errorDetails.data[i],WM.isDefined(val)&&null!==val&&(errMsg=errMsg.replace(new RegExp("\\{"+i+"\\}","g"),val));return errMsg}},getHttpPromise=function(params){var config=params;return config.headers=config.headers||{},config.headers["X-Requested-With"]="XMLHttpRequest",params.hasOwnProperty("target")&&params.hasOwnProperty("action")&&(config=parseReplace(params)),$http(config)},makeCall=function(config,successCallback,failureCallback){logAction("debug","SEND_REQUEST_TO_SERVER",config.url),getHttpPromise(config).then(function(response){response.data.hasOwnProperty("result")?Utils.triggerFn(successCallback,response.data.result):Utils.triggerFn(successCallback,response.data),logAction("success","GOT_RESPONSE_FROM_SERVER",config.url)},function(error){var errTitle,errMsg;return 401!==error.status||error.headers("X-WM-Login-ErrorMessage")?($rootScope.locale?(errTitle=$rootScope.locale.MESSAGE_ERROR_HTTP_ERROR_TITLE,errMsg=$rootScope.locale.MESSAGE_ERROR_HTTP_STATUS_ERROR_DESC):(errTitle="Error!",errMsg="Service call failed"),error.data&&(error.data.errorDetails?errMsg=parseError(error.data.errorDetails)||error.data.errorDetails||errMsg:error.data.errors?(errMsg="",error.data.errors.forEach(function(errorDetails){errMsg+=parseError(errorDetails)+"\n"})):error.data.error&&(errMsg=parseError(error.data.error.message)||error.data.error.message||errMsg)),error.headers("X-WM-Login-ErrorMessage")&&(errMsg=error.headers("X-WM-Login-ErrorMessage")),WM.isFunction(failureCallback)?Utils.triggerFn(failureCallback,errMsg):displayMessage("failure",errTitle,errMsg),void logAction("failure","GOT_RESPONSE_FROM_SERVER",config.url+" as "+errMsg)):(pushToErrorCallStack(config,successCallback,failureCallback),void handleSessionTimeOut())})},send=function(params,successCallback,failureCallback){var serviceSettings=parseReplace(params);serviceSettings?makeCall(serviceSettings,successCallback,failureCallback):displayMessage("failure",$rootScope.locale.MESSAGE_ERROR_HTTP_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_HTTP_CONFIG_ERROR_DESC)},execute=function(params,successCallback,failureCallback){params.hasOwnProperty("target")&&params.hasOwnProperty("action")?send(params,successCallback,failureCallback):WM.isFunction(successCallback)&&Utils.triggerFn(successCallback)},initializeDependencies=function(){try{$injector.get("wmLogger")&&(wmLogger=$injector.get("wmLogger"),wmLogger.compile($rootScope)),$injector.get("wmToaster")&&(wmToaster=$injector.get("wmToaster"),wmToaster.compile($rootScope))}catch(exception){wmLogger&&wmLogger.error("EXCEPTION_CAUSED",["initializeDependencies in wmService.baseService",exception&&exception.message])}},pushToErrorCallStack=function(config,success,failure){errorCallStack.push({config:config,success:success,failure:failure})},executeErrorCallStack=function(){errorCallStack.length&&(errorCallStack.forEach(function(call){call.config?makeCall(call.config,call.success,call.failure):Utils.triggerFn(call.success)}),errorCallStack.length=0)},handleSessionTimeOut=function(){var dialogId=CONSTANTS.isStudioMode?"sessionTimeOutDialog":"CommonLoginDialog";$rootScope.isStudioDisabled=!1,DialogService.closeAllDialogs(),DialogService.showDialog(dialogId,{resolve:{OnLogin:function(){return function(){executeErrorCallStack(),DialogService.hideDialog(dialogId)}}}})};return initializeDependencies(),{execute:execute,send:send,getHttpPromise:getHttpPromise,pushToErrorCallStack:pushToErrorCallStack,executeErrorCallStack:executeErrorCallStack}}],wm.modules.wmCommon.services.FileService=function(BaseService,CONSTANTS){"use strict";var target=CONSTANTS.isRunMode?"FILE_RUN":"FILE";return{write:function(params,successCallback,failureCallback){BaseService.execute({target:target,action:"write",urlParams:{projectID:params.projectID,filePath:params.path},data:params.content},successCallback,failureCallback)},upload:function(params,successCallback,failureCallback){BaseService.execute({target:target,action:params.action,urlParams:{projectID:params.projectID,filePath:params.path},data:params.content},successCallback,failureCallback)},read:function(params,successCallback,failureCallback){var urlParams={filePath:params.path};CONSTANTS.isStudioMode&&(urlParams.projectID=params.projectID),BaseService.execute({target:target,action:"read",urlParams:urlParams},successCallback,failureCallback)},remove:function(params,successCallback,failureCallback){var urlParams={filePath:params.path};CONSTANTS.isStudioMode&&(urlParams.projectID=params.projectID),BaseService.execute({target:target,action:"remove",urlParams:urlParams},successCallback,failureCallback)},registerFileUploadWidget:function(projectId,successCallback,failureCallback){BaseService.execute({target:target,action:"registerFileUploadWidget",data:{projectId:projectId,action:"register"}},successCallback,failureCallback)}}},wm.modules.wmCommon.services.ProjectService=function($location,BaseService,CONSTANTS){"use strict";return this.projectDetails=null,{create:function(params,successCallback,failureCallback){BaseService.execute({target:"Project",action:"create",data:{name:params.projectName,description:params.description,templateId:params.templateId}},successCallback,failureCallback)},copy:function(params,successCallback,failureCallback){BaseService.execute({target:"Project",action:"copy",data:{packageType:"PROJECT",sourceProjectId:params.projectId,targetProjectName:params.targetProjectName}},successCallback,failureCallback)},open:function(projectName,successCallback,failureCallback){BaseService.execute({},successCallback,failureCallback)
},close:function(projectName,successCallback,failureCallback){BaseService.execute({},successCallback,failureCallback)},remove:function(projectID,successCallback,failureCallback){BaseService.execute({target:"Project",action:"remove",urlParams:{projectID:projectID}},successCallback,failureCallback)},get:function(projectID,successCallback,failureCallback){BaseService.execute({target:"Project",action:"get",urlParams:{projectID:projectID}},successCallback,failureCallback)},list:function(successCallback,failureCallback){BaseService.execute({target:"Project",action:"list"},successCallback,failureCallback)},run:function(details,successCallback,failureCallback){BaseService.execute({target:"Project",action:"run",data:{action:"inplaceDeploy",projectId:details.projectId},config:details.config},successCallback,failureCallback)},deploy:function(projectId,projectName,successCallback,failureCallback){BaseService.execute({target:"Project",action:"deploy",data:{action:"deploy",projectId:projectId,deploymentInfo:{applicationName:projectName,archiveType:"WAR",databases:[],deploymentId:null,deploymentType:"CLOUD_JEE",host:"",name:"WaveMaker Cloud 2",port:0,token:"",deploymentUrl:""}}},successCallback,failureCallback)},clean:function(projectId,successCallback,failureCallback){BaseService.execute({target:"Project",action:"clean",data:{action:"inplaceUndeploy",projectId:projectId}},successCallback,failureCallback)},"import":function(details,successCallback,failureCallback){BaseService.execute({target:"Project",action:"import",data:details.content},successCallback,failureCallback)},"export":function(details,successCallback,failureCallback){BaseService.execute({target:"Project",action:"export",data:{fileType:"ZIP",packageType:"PROJECT",sourceName:details.projectId,targetName:details.projectName,templateName:details.templateName}},successCallback,failureCallback)},exportAsTemplate:function(details,successCallback,failureCallback){BaseService.execute({target:"Project",action:"export",data:{fileType:"ZIP",packageType:"TEMPLATE",sourceName:details.projectId,targetName:details.targetName,templateName:details.templateName}},successCallback,failureCallback)},downloadZip:function(details,successCallback,failureCallback){BaseService.execute({target:"Project",action:"downloadZip",urlParams:{projectID:details.projectID,path:details.path}},successCallback,failureCallback)},downloadWar:function(projectId,successCallback,failureCallback){BaseService.execute({target:"Project",action:"downloadWar",urlParams:{projectID:projectId}},successCallback,failureCallback)},getUsers:function(projectID,successCallback,failureCallback){BaseService.execute({target:"Project",action:"getUsers",urlParams:{projectID:projectID}},successCallback,failureCallback)},addUser:function(params,successCallback,failureCallback){BaseService.execute({target:"Project",action:"addUser",urlParams:{projectID:params.projectID},data:params.userID},successCallback,failureCallback)},removeUser:function(params,successCallback,failureCallback){BaseService.execute({target:"Project",action:"removeUser",urlParams:{projectID:params.projectID},data:params.userID},successCallback,failureCallback)},getDetails:function(){return WM.copy(this.projectDetails)},setDetails:function(projectDetails){this.projectDetails=projectDetails},getPages:function(){return WM.copy(this.projectDetails.pages)},setPages:function(pages){this.projectDetails.pages=pages},getId:function(){return CONSTANTS.isStudioMode?this.projectDetails.id:CONSTANTS.isRunMode?$location.$$absUrl.split("/")[3]:void 0},getDeployedUrl:function(){var locationUrl,lastIndex,projectDeployedUrl;return CONSTANTS.isRunMode?(locationUrl=$location.$$absUrl,lastIndex=locationUrl.split("#")[0].lastIndexOf("/"),projectDeployedUrl=locationUrl.substr(0,lastIndex),lastIndex=projectDeployedUrl.lastIndexOf("/"),"#"===projectDeployedUrl[lastIndex+1]&&(projectDeployedUrl=projectDeployedUrl.substr(0,lastIndex)),-1!==projectDeployedUrl.indexOf("http")&&(projectDeployedUrl=projectDeployedUrl.substr(-1!==projectDeployedUrl.indexOf("https:")?6:5)),projectDeployedUrl):void 0},validateName:function(name){var projectNameRegEx=/^[\w ]+$/;return name?projectNameRegEx.test(name):!1},projectExists:function(list,name){var retVal,i;for(retVal=!list||!name,i=0;i<list.length;i+=1)if(list[i].name.toLowerCase()===name.toLowerCase()){retVal=!0;break}return retVal}}},WM.module("wm.prefabs",["wm.widgets.base"]).config(function(WidgetPropertiesProvider){"use strict";WidgetPropertiesProvider.addGroup({name:"prefabs",namekey:"LABEL_PREFABS",iconclass:"prefab"}),WidgetPropertiesProvider.addSubGroup({name:"prefabssubgroup",namekey:"LABEL_THEMES",parent:"prefabs",widgets:[]})}),WM.module("wm.prefabs").service("PrefabManager",["$rootScope","$timeout","$ocLazyLoad","PrefabService","ProjectService","Variables","Utils","wmToaster","CONSTANTS","i18nService","$q","$interval",function($rootScope,$timeout,$ocLazyLoad,PrefabService,ProjectService,Variables,Utils,wmToaster,CONSTANTS,i18nService,$q,$interval){"use strict";function getPrefabList($scope,prefabManagerInstance,callback){$scope.loadingPrefabs=!0,PrefabService.list(function(prefabsList){function onLoadPrefabConfig(config){var iconurl=Utils.stringStartsWith(config.iconUrl,"/resources/images/imagelists/")?"../services/prefabs/"+config.id+"/files/webapp"+config.iconUrl:config.iconUrl;config.group=config.group||"basic",config.group=config.group.toLowerCase?config.group.toLowerCase():config.group,map[config.group]||($scope.prefabGroups.push(config.group),map[config.group]=!0,$scope.prefabs[config.group]=[]),$scope.prefabs[config.group].push({id:config.id,name:config.name,desc:config.description,namekey:config.namekey,iconUrl:iconurl,category:"prefabs",isDraggable:!0,widgetType:"wm-prefab",defaults:{prefabName:config.name}}),loadedPrefabsCount+=1,loadedPrefabsCount===prefabsCount&&($scope.loadingPrefabs=!1,Utils.triggerFn(callback,$scope.prefabs),$rootScope.$safeApply($scope))}var map={},prefabsCount=Object.keys(prefabsList).length,loadedPrefabsCount=0;$scope.prefabs={},$scope.prefabGroups=[],prefabManagerInstance.loadPrefabConfigs(prefabsList,onLoadPrefabConfig)})}function registerPrefab(prefabId){pendingTasks.registration[prefabId]||(pendingTasks.registration[prefabId]=!0,PrefabService.register({projectId:ProjectService.getDetails().id,prefab:prefabId},function(){delete pendingTasks.registration[prefabId]},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_PREFAB_REGISTER_FAILED_DESC)}))}function postPrefabCreate(scope){CONSTANTS.isStudioMode&&registerPrefab(prefabDetails[scope.prefabname].id)}function loadConfigJson(prefab,callback,isSync,prefabNameVsObjectMap){var configUrl=CONSTANTS.isStudioMode?"../services/prefabs/"+prefab.id+"/files/webapp/config.json":"app/prefabs/"+prefab.name+"/config.json";Utils.fetchContent("json",configUrl,function(response){prefabDetails[response.name]=response,CONSTANTS.isStudioMode&&(response.id=prefabNameVsObjectMap?prefabNameVsObjectMap[response.name].id:prefab.id),Utils.triggerFn(callback,response)},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_PREFAB_CONFIG_ERROR_TITLE,$rootScope.locale.MESSAGE_PREFAB_CONFIG_ERROR_DESC)},isSync)}function getProjectPrefabDetails(callback,isSync){return projectPrefabs?void callback(projectPrefabs):void Utils.fetchContent("json","../services/projects/"+ProjectService.getDetails().id+"/prefabs",function(response){projectPrefabs=response,callback(response)},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_PROJECT_PREFAB_LIST_FAILED_DESC)},isSync)}function loadPrefabConfig(prefab,callback,isSync,prefabNameVsObjectMap){return prefabDetails[prefab.name]?void callback(prefabDetails[prefab.name]):void(!prefab.id&&CONSTANTS.isStudioMode?getProjectPrefabDetails(function(prefabsList){var prefabObj=_.findWhere(prefabsList,{name:prefab.name});prefabObj&&prefabObj.id?loadConfigJson(prefabObj,callback,isSync):(wmToaster.show("error",$rootScope.locale.MESSAGE_PREFAB_IMPORT_ERROR_TITLE,Utils.replace($rootScope.locale.MESSAGE_PREFAB_NOT_IMPORTED,[prefab.name])),callback(prefab))},isSync):loadConfigJson(prefab,callback,isSync,prefabNameVsObjectMap))}function loadPrefabConfigs(prefabsList,callback){var prefabNameVsObjectMap={};prefabsList.forEach(function(prefab){prefabNameVsObjectMap[prefab.name]=prefab,loadPrefabConfig(prefab,callback,!1,prefabNameVsObjectMap)})}function OnPrefabResourceLoad(count){this.count=count,this.updateCount=function(){this.count--},this.getCount=function(){return this.count}}function loadScripts(scripts){function onResourcesReady(){!obj.getCount()&&intervalHandler&&($interval.cancel(intervalHandler),intervalHandler=null,deferred.resolve())}var obj,intervalHandler,deferred=$q.defer(),rand=Date.now(),count=0,fnName="onPrefabResourceLoad"+rand;return scripts=scripts.map(function(script){return-1!==script.indexOf("onPrefabResourceLoad")&&(count++,script=script.replace("onPrefabResourceLoad",fnName)),script}),obj=new OnPrefabResourceLoad(count),window[fnName]=obj.updateCount.bind(obj),scripts&&scripts.length?Utils.loadScripts(scripts,function(){intervalHandler=$interval(onResourcesReady,50,10)}):deferred.resolve(),deferred.promise}function loadModules(modules){var deferred=$q.defer();return modules&&modules.length?$ocLazyLoad.load(modules).then(function(){$timeout(deferred.resolve,300,!1)}):deferred.resolve(),deferred.promise}function loadVariables(prefabName){var url,config=prefabDetails[prefabName],deferred=$q.defer();return url=CONSTANTS.isStudioMode?"../services/prefabs/"+config.id+"/files/webapp"+config.variablesUrl:"app/prefabs/"+config.name+config.variablesUrl,Utils.fetchContent("json",Utils.preventCachingOf(url),function(response){WM.forEach(response,function(variable){variable.prefabName=prefabName}),Variables.register(config.name,response,!0),deferred.resolve()}),deferred.promise}function loadController(prefabName){var controllerUrl,deferred=$q.defer(),config=prefabDetails[prefabName];return controllerUrl=CONSTANTS.isStudioMode?"../services/prefabs/"+config.id+"/files/webapp"+config.controllerUrl:"app/prefabs/"+config.name+config.controllerUrl,loadScripts([Utils.preventCachingOf(controllerUrl)]).then(deferred.resolve),deferred.promise}function getPrefabScriptResourceUrl(resourcePath,resourceBasePath,preventCache){var _url=resourcePath;return Utils.stringStartsWith(resourcePath,"http://|https://|//")||(_url=resourceBasePath+_url),preventCache&&(_url=Utils.preventCachingOf(_url)),_url}function extendAppLocale(root){var localePath=root+"/resources/i18n/";CONSTANTS.isRunMode?i18nService.loadComponentLocaleBundle(localePath):$rootScope.$emit("load-component-locale-bundle",localePath)}function loadDependencies(prefabName){var resources,resourcePath,scriptFiles,styleFiles,modules,handler,templateUrl,config=prefabDetails[prefabName],deferred=$q.defer();return config?(resources=config.resources||{},resourcePath=CONSTANTS.isStudioMode?"../services/prefabs/"+config.id+"/files/webapp":"app/prefabs/"+config.name,templateUrl=resourcePath+config.templateUrl,pendingTasks.resources[prefabName]?handler=$rootScope.$on(prefabName+"-dependencies-ready",function(evt){evt.stopPropagation(),deferred.resolve(templateUrl),handler()}):(pendingTasks.resources[prefabName]=!0,scriptFiles=resources.scripts||[],styleFiles=resources.styles||[],modules=resources.modules||[],scriptFiles=scriptFiles.map(function(file){return getPrefabScriptResourceUrl(file,resourcePath,!0)}),modules=modules.map(function(module){return module.files=module.files.map(function(file){return getPrefabScriptResourceUrl(file,resourcePath,!0)}),module}),styleFiles=styleFiles.map(function(file){return Utils.preventCachingOf(resourcePath+file)}),Utils.loadStyleSheets(styleFiles),extendAppLocale(resourcePath),loadScripts(scriptFiles).then(loadModules.bind(void 0,modules)).then(loadVariables.bind(void 0,prefabName)).then(loadController.bind(void 0,prefabName)).then(function(){delete pendingTasks.resources[prefabName],$rootScope.$emit(prefabName+"-dependencies-ready"),deferred.resolve(templateUrl)})),deferred.promise):(deferred.reject(),deferred.promise)}var projectPrefabs,prefabDetails={},pendingTasks={resources:{},registration:{}};return{loadPrefabs:function(scope,callback){var that=this;scope&&getPrefabList(scope,that,callback)},removePrefab:function(params,scope){var deferred=$q.defer(),that=this;return scope.messageShow=!0,PrefabService.remove(params,function(){deferred.resolve(),that.loadPrefabs(scope)},function(){deferred.reject()}),deferred.promise},postPrefabCreate:postPrefabCreate,loadPrefabConfigs:loadPrefabConfigs,loadPrefabConfig:loadPrefabConfig,loadDependencies:loadDependencies,loadScripts:loadScripts,loadModules:loadModules}}]),wm.variables=WM.module("wm.variables",[]),wm.variables.controllers={},wm.variables.services={},wm.variables.factories={},wm.variables.filters={},wm.variables.controller(wm.variables.controllers),wm.variables.service(wm.variables.services),wm.variables.factory(wm.variables.factories),wm.variables.filter(wm.variables.filters),wm.variables.constant("VARIABLE_CONSTANTS",{EVENTS:["onCanUpdate","onBeforeUpdate","onPrepareSetData","onResult","onSuccess","onError","onOk","onCancel","onClose"],OWNER:{APP:"App",PAGE:"Page"}}),wm.variables.factories.BaseVariablePropertyFactory=["WIDGET_CONSTANTS","Utils",function(WIDGET_CONSTANTS,Utils){"use strict";function getPropertiesOf(variableCategory,parentCategories){var tempPropertiesObject,variablePropertiesObject={};return parentCategories?(parentCategories=WM.isArray(parentCategories)?parentCategories:[parentCategories],parentCategories.push(variableCategory),tempPropertiesObject={},WM.forEach(parentCategories,function(parent){WM.forEach(properties[parent],function(propObj,propName){tempPropertiesObject[propName]||(tempPropertiesObject[propName]={}),WM.forEach(propObj,function(value,key){tempPropertiesObject[propName][key]=value})})}),variablePropertiesObject.variableProps=tempPropertiesObject):variablePropertiesObject.variableProps=WM.copy(properties[variableCategory]),WM.forEach(variablePropertiesObject.variableProps,function(propObj,propName){variablePropertiesObject[propName]||(variablePropertiesObject[propName]=void 0===propObj.value?"":propObj.value)}),variablePropertiesObject}function register(category,properties,parentCategories,methods){variableMap[category]={},WM.extend(properties,getPropertiesOf(category,parentCategories)),variableMap[category].propertyMap=properties.variableProps,delete properties.variableProps,variableMap[category].properties=properties,variableMap[category].methods=methods}function getProperties(category){return variableMap[category]?WM.copy(variableMap[category].properties):{}}function getPropertyGroups(){return propertyGroups}function getPropertyMap(category){return variableMap[category]?variableMap[category].propertyMap:void 0}function invoke(method,variableType,variableName,options,successCallBack,errorCallBack){return variableMap[variableType]?void variableMap[variableType].methods[method](variableName,options,successCallBack,errorCallBack):void Utils.triggerFn(errorCallBack,"variable is not valid")}var result,properties,propertyGroups,variableMap,variableEventOptions={};return WM.forEach(WM.copy(WIDGET_CONSTANTS.EVENTS_OPTIONS),function(event){variableEventOptions[event]=event}),result={properties:{"wm.Variable":{name:{type:"string",required:!0},type:{type:"list",options:{string:"LABEL_STRING","boolean":"LABEL_BOOLEAN",number:"LABEL_NUMBER",date:"LABEL_DATE",entry:"LABEL_ENTRY"},value:"string",required:!0},isList:{type:"boolean",value:!1},owner:{type:"list",options:{Page:"LABEL_PAGE",App:"LABEL_APPLICATION"},value:"Page"},editJson:{type:"json"},isBound:{type:"boolean"},dataSet:{type:"string",value:{dataValue:""},hide:!0},dataBinding:{type:"string",value:{dataValue:""},hide:!0},saveInPhonegap:{type:"boolean",value:!1,hide:!0}},"wm.ServiceVariable":{isList:{hide:!0,required:!1},editJson:{hide:!0,required:!1},dataSet:{type:"string",value:{dataValue:""},hide:!0},type:{hide:!0,required:!1},firstRow:{type:"number",value:0,disabled:!0,hide:!0},maxResults:{type:"number",value:20,disabled:!0,hide:!0},designMaxResults:{type:"number",value:10,disabled:!0,hide:!0},operation:{type:"list",options:[]},service:{type:"list",options:[]},startUpdate:{type:"boolean",value:!1},autoUpdate:{type:"boolean",value:!1},inFlightBehavior:{type:"list",options:{doNotExecute:"doNotExecute",executeLast:"executeLast",executeAll:"executeAll"},value:"executeLast"},transformationRequired:{type:"boolean-labelfirst",value:!1},columnField:{type:"list",options:{},hide:!0},dataField:{type:"list",options:{},hide:!0},onCanUpdate:{type:"list",options:variableEventOptions},onBeforeUpdate:{type:"list",options:variableEventOptions},onResult:{type:"list",options:variableEventOptions},onSuccess:{type:"list",options:variableEventOptions},onError:{type:"list",options:variableEventOptions},onPrepareSetData:{type:"list",options:variableEventOptions}},"wm.LiveVariable":{service:{hide:!0},editJson:{hide:!0},transformationRequired:{hide:!0},type:{options:[],hide:!1},isList:{hide:!1},operation:{options:{read:"read",insert:"insert",update:"update","delete":"delete"},value:"read"},liveSource:{type:"list"},dataBinding:{type:"string",value:{},hide:!0},firstRow:{disabled:!1,hide:!1},maxResults:{disabled:!1,hide:!1},designMaxResults:{disabled:!1,hide:!1},ignoreCase:{type:"boolean",value:!1},matchMode:{type:"list",options:{start:"start",end:"end",anywhere:"anywhere",exact:"exact"},value:"start"},orderBy:{type:"string",placeholder:"e.g: 'asc:column_name' or 'desc:column_name'"},autoUpdate:{value:!0},startUpdate:{value:!0},inFlightBehavior:{type:"list",options:{doNotExecute:"doNotExecute",executeLast:"executeLast",executeAll:"executeAll"},value:"executeLast"}},"wm.LoginVariable":{transformationRequired:{hide:!0},isList:{value:""},firstRow:{value:""},maxResults:{value:""},designMaxResults:{value:""},operation:{hide:!0},service:{hide:!0},dataSet:{value:{username:"",password:""}},dataBinding:{value:{username:"",password:""}},startUpdate:{value:!1},autoUpdate:{value:!1},useDefaultSuccessHandler:{type:"boolean",value:!0}},"wm.LogoutVariable":{transformationRequired:{hide:!0},isList:{value:""},firstRow:{value:""},maxResults:{value:""},designMaxResults:{value:""},operation:{hide:!0},service:{hide:!0},dataSet:{value:""},dataBinding:{value:""},startUpdate:{hide:!0,value:""},autoUpdate:{hide:!0,value:""},redirectTo:{type:"list",options:{"":"","login.html":"Login","index.html":"Main"},value:""},useDefaultSuccessHandler:{type:"boolean",value:!0}},"wm.NavigationVariable":{name:{type:"string",required:!0},owner:{type:"list",options:{Page:"LABEL_PAGE",App:"LABEL_APPLICATION"},value:"Page"},operation:{type:"list",options:{gotoPage:"gotoPage",gotoView:"gotoView"},value:"gotoPage"},pageName:{type:"string",required:!0,options:{},widgettype:"list"},viewName:{type:"string",options:{},widgettype:"list",hide:!0},dataBinding:{type:"string",value:{},hide:!0}},"wm.NotificationVariable":{name:{type:"string",required:!0},owner:{type:"list",options:{Page:"LABEL_PAGE",App:"LABEL_APPLICATION"},value:"Page"},operation:{type:"list",options:{alert:"alert",confirm:"confirm",toast:"toast"},value:"alert"},text:{type:"string"},okButtonText:{type:"string"},alerttype:{type:"list",options:{information:"information",success:"success",error:"error",warning:"warning"}},cancelButtonText:{type:"string",disabled:!0,hide:!0},onCancel:{type:"list",options:variableEventOptions,disabled:!0,hide:!0},onClose:{type:"list",options:variableEventOptions},onOk:{type:"list",options:variableEventOptions},duration:{type:"list",options:{1000:"1000",2000:"2000",3000:"3000",4000:"4000",5000:"5000",6000:"6000",7000:"7000",8000:"8000",9000:"9000",10000:"10000",15000:"15000"},hide:!0},"class":{type:"list",options:{Success:"Success",Error:"Error",Warning:"Warning",Info:"Info",Misc:"Misc"},hide:!0},toasterPosition:{type:"list",options:{"top left":"top left","top center":"top center","top right":"top right","center left":"center left","center center":"center center","center right":"center right","bottom left":"bottom left","bottom center":"bottom center","bottom right":"bottom right"},hide:!0},dataBinding:{type:"string",value:{},hide:!0}}},propertyGroups:[{name:"properties",parent:""},{name:"data",parent:""},{name:"events",parent:""},{properties:["liveSource","type","isList"],parent:"properties"},{name:"service",properties:["service","operation"],parent:"properties"},{name:"serveroptions",properties:["downloadFile","matchMode","firstRow","maxResults","designMaxResults","orderBy","ignoreCase"],parent:"properties"},{name:"behavior",properties:["useDefaultSuccessHandler","clearDataOnLogout","autoUpdate","startUpdate","inFlightBehavior","loadingDialog","saveInCookie","refireOnDbChange","redirectTo"],parent:"properties"},{name:"mobile",properties:["saveInPhonegap"],parent:"properties"},{name:"json",properties:["editJson"],parent:"properties"},{name:"Inputs",properties:["pageName","viewName","dataBinding"],parent:"properties"},{name:"Inputs",properties:["text","duration","class","toasterPosition","okButtonText","cancelButtonText","alerttype","dataBinding"],parent:"data"},{name:"inputfields",properties:["dataSet","dataBinding"],parent:"data"},{name:"filterfields",properties:["dataSet"],parent:"data"},{name:"dataTransformation",properties:["transformationRequired","columnField","dataField"],parent:"data"},{properties:["onCanUpdate","onBeforeUpdate","onResult","onSuccess","onError","onPrepareSetData","onOk","onCancel","onClose"],parent:"events"}]},properties=result.properties,propertyGroups=result.propertyGroups,variableMap={},{getPropertiesOf:getPropertiesOf,register:register,getProperties:getProperties,getPropertyGroups:getPropertyGroups,getPropertyMap:getPropertyMap,invoke:invoke}}],wm.variables.services.Variables=["$rootScope","BaseVariablePropertyFactory","ProjectService","FileService","CONSTANTS","VARIABLE_CONSTANTS","DialogService","$timeout","Utils",function($rootScope,BaseVariablePropertyFactory,ProjectService,FileService,CONSTANTS,VARIABLE_CONSTANTS,DialogService,$timeout,Utils){"use strict";var returnObject,activeScope,activePage,runMode=CONSTANTS.isRunMode,variableNameMap={"wm.Variable":"staticVariable","wm.ServiceVariable":"serviceVariable","wm.LiveVariable":"liveVariable","wm.NavigationVariable":"navigationVariable","wm.NotificationVariable":"notificationVariable","wm.LoginVariable":"loginVariable","wm.LogoutVariable":"logoutVariable"},self=this,watchers={},otherContextVariables=[],resetVariableNameIterator=function(){self.variableNameIterator={"wm.Variable":1,"wm.ServiceVariable":1,"wm.LiveVariable":1,"wm.NavigationVariable":1,"wm.NotificationVariable":1,"wm.LoginVariable":1,"wm.LogoutVariable":1}},resetVariables=function(newVariablesObject){self.variableCollection=newVariablesObject||self.variableCollection,newVariablesObject||resetVariableNameIterator()},bindVariableField=function(props){var bindingVal=props.bindingVal,param=props.paramName,variable=props.variable,variableName=props.variableName,variableScope=variable.prefabName?WM.element("[prefabname='"+variable.prefabName+"']").isolateScope().ctrlScope:activeScope;Utils.stringStartsWith(bindingVal,"bind:")?watchers[variableName].push(activeScope.$watch(bindingVal.replace("bind:",""),function(newVal,oldVal){(WM.isUndefined(oldVal)||""===oldVal)&&newVal===oldVal||WM.isUndefined(newVal)||("wm.Variable"===variable.category?variable.dataSet[param]=newVal:"wm.ServiceVariable"===variable.category?(props.parentNode?variable.dataBinding[props.parentNode][param]=newVal:variable.dataBinding[param]=newVal,variable.autoUpdate&&call("getData",variableName,{scope:variableScope})):"wm.LiveVariable"===variable.category?"read"===variable.operation?(variable.filterFields[param]={value:newVal},variable.autoUpdate&&call("getData",variableName,{scope:variableScope})):(variable.inputFields[param]=newVal,variable.autoUpdate&&call(variable.operation+"Row",variableName,{scope:variableScope})):"wm.NotificationVariable"===variable.category||"wm.NavigationVariable"===variable.category?variable.dataBinding[param]=newVal:"wm.LoginVariable"===variable.category&&(variable.dataBinding[param]=newVal,variable.autoUpdate&&call("login",variableName,{scope:variableScope})))})):"wm.LiveVariable"===variable.category?"read"===variable.operation?variable.filterFields[param]={value:bindingVal}:variable.inputFields[param]=bindingVal:"wm.Variable"===variable.category&&variable.dataBinding[param]&&(variable.dataSet[param]=variable.dataSet[param]||variable.dataBinding[param])},updateVariableBinding=function(variable,name){watchers[name]=watchers[name]||[],watchers[name].forEach(Utils.triggerFn),WM.forEach(variable.dataBinding,function(binding,param){"object"==typeof binding&&"wm.ServiceVariable"===variable.category&&WM.forEach(binding,function(subParamBinding,subParam){bindVariableField({bindingVal:subParamBinding,paramName:subParam,variable:variable,variableName:name,parentNode:param})}),bindVariableField({bindingVal:binding,paramName:param,variable:variable,variableName:name})})},updateContextVariables=function(context){$rootScope.variables=$rootScope.variables||{},self.studioCopy[context]=self.studioCopy[context]||{},WM.forEach(self.variableCollection[context],function(variable,name){var variableScope=variable.prefabName?WM.element("[prefabname='"+variable.prefabName+"']").isolateScope().ctrlScope:activeScope;runMode?(returnObject[name]=variable,returnObject[name].activeScope=variableScope):(returnObject[name]=WM.copy(variable),self.studioCopy[context][name]=returnObject[name]),returnObject[name].name=name,updateVariableBinding(returnObject[name],name),"wm.Variable"===variable.category?$rootScope.variables[name]=variable.dataSet.dataValue:"wm.ServiceVariable"===variable.category?(!runMode||variable.startUpdate)&&$timeout(function(){call("getData",name,{scope:variableScope},function(data){!runMode&&variable.transformationColumns&&(data.wmTransformedData={},WM.forEach(variable.transformationColumns,function(columnName){data.wmTransformedData[columnName]=""})),$rootScope.variables[name]=data,updateVariableDataSet(name,data)},function(){$rootScope.variables[name]="",returnObject[name].dataSet=""})},null,!1):"wm.LiveVariable"===variable.category?($rootScope.variables[name]=$rootScope.variables[name]||{},(!runMode||variable.startUpdate)&&(runMode&&"read"!==variable.operation?$timeout(function(){call(variable.operation+"Row",name,{scope:variableScope})},null,!1):$timeout(function(){call("getData",name,{scope:variableScope},function(data,propertiesMap,relatedData,pagingOptions){$rootScope.variables[name]={data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions},returnObject[name].dataSet={data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions}},function(){$rootScope.variables[name]="",returnObject[name].dataSet=""})},null,!1))):"wm.LoginVariable"===variable.category&&runMode&&variable.startUpdate&&$timeout(function(){call("login",name,{scope:variableScope})},null,!1)})},updateVariableValues=function(activePageName,isUpdatePageVariables){isUpdatePageVariables||updateContextVariables(VARIABLE_CONSTANTS.OWNER.APP),activePageName&&updateContextVariables(activePageName),WM.forEach(otherContextVariables,function(context){updateContextVariables(context)}),otherContextVariables=[]},writeFile=function(params,success,error){FileService.write({projectID:$rootScope.project.id,path:params.path,content:"object"==typeof params.content?JSON.stringify(params.content,null,"	"):params.content},function(){Utils.triggerFn(success)},function(){Utils.triggerFn(error,$rootScope.locale.MESSAGE_ERROR_SAVE_FILE_DESC)})},getPageVariables=function(pageName,success,error){if(null!==self.variableCollection&&self.variableCollection[pageName])return void Utils.triggerFn(success,self.variableCollection[pageName]);var params={path:"pages/"+pageName+"/"+pageName+".variables.json"};runMode||(params.projectID=$rootScope.project.id),FileService.read(params,function(variables){Utils.triggerFn(success,variables)},function(errMsg){Utils.triggerFn(error,errMsg)})},getAppVariables=function(activePage,success,error){if(null!==self.variableCollection&&self.variableCollection[VARIABLE_CONSTANTS.OWNER.APP])return void Utils.triggerFn(success,self.variableCollection[VARIABLE_CONSTANTS.OWNER.APP]);if("Login"===activePage)return void Utils.triggerFn(success,{});var requestParams={path:"app.variables.json"};runMode||(requestParams.projectID=$rootScope.project.id),FileService.read(requestParams,function(variables){Utils.triggerFn(success,variables,!0)},function(errMsg){Utils.triggerFn(error,errMsg)})},extendVariables=function(variables){return WM.forEach(variables,function(variable,name){variables[name]=WM.extend(BaseVariablePropertyFactory.getProperties(variable.category),variable)}),variables},initPageVariables=function(pageName,scope,options){options=options||{},options.updateAppVariables=options.updateAppVariables||!1,activeScope=scope,activePage=pageName,self.variableCollection=self.variableCollection||{},getPageVariables(activePage,function(pageVariables){"object"!=typeof pageVariables&&(pageVariables={}),pageVariables=extendVariables(pageVariables),self.variableCollection[activePage]=pageVariables,updateVariableValues(activePage,!options.updateAppVariables),$rootScope.$emit("on-"+activePage+"-variables-ready",pageVariables),Utils.triggerFn(options.success,self.variableCollection)},function(errMsg){self.variableCollection[activePage]={},Utils.triggerFn(options.error,errMsg)})},initVariableCollection=function(activeWorkspaceName,scope,success,error,isUpdatePageVariables){activeScope=scope,activePage=activeWorkspaceName,self.variableCollection=self.variableCollection||{},getAppVariables(activePage,function(appVariables,freshVariables){"object"!=typeof appVariables&&(appVariables={}),appVariables=extendVariables(appVariables),self.variableCollection[VARIABLE_CONSTANTS.OWNER.APP]=appVariables,freshVariables&&$rootScope.$emit("on-app-variables-ready",appVariables),getPageVariables(activeWorkspaceName,function(pageVariables){"object"!=typeof pageVariables&&(pageVariables={}),pageVariables=extendVariables(pageVariables),self.variableCollection[activeWorkspaceName]=pageVariables,updateVariableValues(activeWorkspaceName,isUpdatePageVariables),$rootScope.$emit("on-"+activeWorkspaceName+"-variables-ready",pageVariables),Utils.triggerFn(success,self.variableCollection)},function(errMsg){self.variableCollection[activeWorkspaceName]={},Utils.triggerFn(error,errMsg)})},function(errMsg){self.variableCollection[VARIABLE_CONSTANTS.OWNER.APP]={},Utils.triggerFn(error,errMsg)})},getVariableByName=function(variableName){var variableObj={},variables=self.variableCollection,prefabs=Utils.getLoadedPrefabNames();return variables[VARIABLE_CONSTANTS.OWNER.APP]&&variables[VARIABLE_CONSTANTS.OWNER.APP][variableName]?variableObj=variables[VARIABLE_CONSTANTS.OWNER.APP][variableName]:variables[activePage]&&variables[activePage][variableName]?variableObj=variables[activePage][variableName]:prefabs.length>0&&WM.forEach(prefabs,function(prefab){variables[prefab]&&variables[prefab][variableName]&&(variableObj=variables[prefab][variableName])}),variableObj},getType=function(name){return getVariableByName(name).category},getVariableCategoryList=function(collectionType,getKeysList){var categoryList={};if($rootScope.isPrefabTemplate)switch(collectionType){case"call":categoryList={"wm.NavigationVariable":"LABEL_INSERT_VARIABLE_FILTER_NAVIGATION","wm.NotificationVariable":"LABEL_INSERT_VARIABLE_FILTER_NOTIFICATION"};break;case"data":categoryList={"wm.Variable":"LABEL_INSERT_VARIABLE_FILTER_BASIC","wm.ServiceVariable":"LABEL_INSERT_VARIABLE_FILTER_SERVICE","wm.LiveVariable":"LABEL_INSERT_VARIABLE_FILTER_LIVE"};break;default:categoryList={"wm.Variable":"LABEL_INSERT_VARIABLE_FILTER_BASIC","wm.ServiceVariable":"LABEL_INSERT_VARIABLE_FILTER_SERVICE","wm.LiveVariable":"LABEL_INSERT_VARIABLE_FILTER_LIVE","wm.NavigationVariable":"LABEL_INSERT_VARIABLE_FILTER_NAVIGATION","wm.NotificationVariable":"LABEL_INSERT_VARIABLE_FILTER_NOTIFICATION"}
}else switch(collectionType){case"call":categoryList={"wm.NavigationVariable":"LABEL_INSERT_VARIABLE_FILTER_NAVIGATION","wm.NotificationVariable":"LABEL_INSERT_VARIABLE_FILTER_NOTIFICATION"};break;case"data":categoryList={"wm.Variable":"LABEL_INSERT_VARIABLE_FILTER_BASIC","wm.ServiceVariable":"LABEL_INSERT_VARIABLE_FILTER_SERVICE","wm.LiveVariable":"LABEL_INSERT_VARIABLE_FILTER_LIVE","wm.LoginVariable":"LABEL_INSERT_VARIABLE_FILTER_LOGIN","wm.LogoutVariable":"LABEL_INSERT_VARIABLE_FILTER_LOGOUT"};break;default:categoryList={"wm.Variable":"LABEL_INSERT_VARIABLE_FILTER_BASIC","wm.ServiceVariable":"LABEL_INSERT_VARIABLE_FILTER_SERVICE","wm.LiveVariable":"LABEL_INSERT_VARIABLE_FILTER_LIVE","wm.NavigationVariable":"LABEL_INSERT_VARIABLE_FILTER_NAVIGATION","wm.NotificationVariable":"LABEL_INSERT_VARIABLE_FILTER_NOTIFICATION","wm.LoginVariable":"LABEL_INSERT_VARIABLE_FILTER_LOGIN","wm.LogoutVariable":"LABEL_INSERT_VARIABLE_FILTER_LOGOUT"}}return getKeysList&&(categoryList=Object.keys(categoryList)),categoryList},isExists=function(variableName){return!Utils.isEmptyObject(getVariableByName(variableName))},call=function(method,name,options,success,error){if(options=options||{},!name||!method)return void Utils.triggerFn(error);var type=options.type;type||(type=getType(name)),BaseVariablePropertyFactory.invoke(method,type,name,options,function(data,propertiesMap,relatedData,pagingOptions){runMode&&"getData"===method&&updateVariableDataSet(name,data,propertiesMap,relatedData,pagingOptions),Utils.triggerFn(success,data,propertiesMap,relatedData,pagingOptions)},error)},updateVariableDataSet=function(name,data,propertiesMap,relatedData,pagingOptions){if(returnObject[name]){if(!WM.isObject(data)){var temp=data;data={},data.value=temp}returnObject[name].dataSet=propertiesMap?{data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions}:data}},generateUniqueName=function(category,name){var defaultName;return defaultName=name?name:variableNameMap[category]+self.variableNameIterator[category],isExists(defaultName)?(self.variableNameIterator[category]+=1,generateUniqueName(category)):defaultName},register=function(nameSpace,variables,loadValuesInStudio){variables=extendVariables(variables),self.variableCollection=self.variableCollection||{},self.variableCollection[nameSpace]=variables,(loadValuesInStudio||runMode)&&($rootScope.activePageName===activePage?updateContextVariables(nameSpace):otherContextVariables.push(nameSpace))},isEventCallbackVariable=function(category){var retVal=!1;return"wm.Variable"!==category&&(retVal=!0),retVal},retrieveEventCallbackVariables=function(variableName){var key,index,contextVariables,currentVariable,variableArray=[],varCollection=self.variableCollection;for(key in varCollection){contextVariables=varCollection[key];for(index in contextVariables)currentVariable=contextVariables[index],variableName?index!==variableName&&isEventCallbackVariable(currentVariable.category)&&variableArray.push(index):isEventCallbackVariable(currentVariable.category)&&variableArray.push(index)}return variableArray},saveContextVariables=function(context,contextVariables){var variables=self.variableCollection;variables[context]=contextVariables},filterVariables=function(variables){return WM.forEach(variables,function(variable){WM.forEach(variable,function(propertyValue,propertyName){(""===propertyValue||void 0===propertyValue)&&delete variable[propertyName]})}),variables},create=function(type,options,name){type=type||"wm.Variable";var variableObj={},defaultName="";return options=WM.isObject(options)?options:{},defaultName=name?generateUniqueName(type,name):generateUniqueName(type),WM.extend(variableObj,BaseVariablePropertyFactory.getProperties(type),{name:defaultName},options),variableObj},store=function(owner,name,variableObj,variableCollectionObject,isUpdate){if(variableObj){var varCollectionObj=variableCollectionObject||self.variableCollection;owner=owner||VARIABLE_CONSTANTS.OWNER.APP,varCollectionObj.hasOwnProperty(owner)||(varCollectionObj[owner]={}),variableObj._id="wm-"+variableObj.category+(new Date).getTime(),varCollectionObj[owner][name]=variableObj,runMode?returnObject[name]=variableObj:(returnObject[name]=WM.copy(variableObj),self.studioCopy[owner][name]=returnObject[name]),isUpdate&&call("getData",name,{},function(data,propertiesMap,relatedData,pagingOptions){returnObject[name].dataSet=propertiesMap?{data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions}:data},function(){$rootScope.variables[name]="",returnObject[name].dataSet=""})}},initiateCallback=function(event,variable,callBackScope,response){var eventValue=variable[event];if(eventValue){if("Javascript"===eventValue&&"function"==typeof callBackScope[variable.name+event])return callBackScope[variable.name+event](variable,response);if(eventValue.indexOf(".show")>-1)return void DialogService.showDialog(eventValue.slice(0,eventValue.indexOf(".show")));if(eventValue.indexOf(".hide")>-1)return void DialogService.hideDialog(eventValue.slice(0,eventValue.indexOf(".hide")));$rootScope.$emit("invoke-service",variable[event])}},unload=function(namespace){namespace&&(self.variableCollection=self.variableCollection||{},WM.forEach(self.variableCollection[namespace],function(variable,name){delete returnObject[name],watchers[name].forEach(Utils.triggerFn)}),delete self.variableCollection[namespace])},processRequestQueue=function(variable,requestQueue,handler){if(requestQueue[variable.name]&&requestQueue[variable.name].length){var requestObj;switch(variable.inFlightBehaviour){case"executeLast":requestObj=requestQueue[variable.name].pop(),handler(requestObj.variable,requestObj.options,requestObj.success,requestObj.error),requestQueue[variable.name]=null;break;case"executeAll":requestObj=requestQueue[variable.name].splice(0,1).pop(),handler(requestObj.variable,requestObj.options,requestObj.success,requestObj.error);break;default:requestQueue[variable.name]=null}}},deleteVariable=function(name,pageName){var i;if(pageName)return void(name?(delete self.variableCollection[pageName][name],CONSTANTS.isStudioMode&&(delete returnObject[name],delete self.studioCopy[pageName][name])):(delete self.variableCollection[pageName],CONSTANTS.isStudioMode&&delete self.studioCopy[pageName]));for(i in self.variableCollection)self.variableCollection.hasOwnProperty(i)&&self.variableCollection[i].hasOwnProperty(name)&&(delete self.variableCollection[i][name],CONSTANTS.isStudioMode&&(delete returnObject[name],delete self.studioCopy[i][name]));return!1};return this.variableCollection=null,this.studioCopy={},runMode&&($rootScope.project={id:ProjectService.getId()}),$rootScope.variables=$rootScope.variables||{},resetVariableNameIterator(),returnObject={create:create,store:store,isExists:isExists,isNameAvailable:function(variableObj){var variableNameAvailable=!1,existingVariable=getVariableByName(variableObj.name);return variableObj&&variableObj._id===existingVariable._id&&(variableNameAvailable=!0),variableNameAvailable},getVariableByName:getVariableByName,updateVariable:function(newProperties){var i;for(i in self.variableCollection)self.variableCollection.hasOwnProperty(i)&&self.variableCollection[i].hasOwnProperty(newProperties.name)&&(self.variableCollection[i][newProperties.name]=newProperties);return!1},"delete":deleteVariable,getAll:function(){return self.variableCollection},getStudioCopy:function(){return self.studioCopy},saveVariables:function(activePageName,success,error,updateValues){var variables=self.variableCollection,appVariables=WM.copy(variables[VARIABLE_CONSTANTS.OWNER.APP]),pageVariables=WM.copy(variables[activePageName]);activePageName&&updateValues&&updateVariableValues(activePageName),appVariables=filterVariables(appVariables),pageVariables=filterVariables(pageVariables),writeFile({path:"app.variables.json",content:appVariables},function(){activePageName&&writeFile({path:"pages/"+activePageName+"/"+activePageName+".variables.json",content:pageVariables},function(){Utils.triggerFn(success)},function(errMsg){Utils.triggerFn(error,errMsg)})},function(errMsg){Utils.triggerFn(error,errMsg)})},savePageVariables:function(activePageName,success,error,updateValues){if(activePageName){var variables=self.variableCollection,pageVariables=WM.copy(variables[activePageName]);updateValues&&updateVariableValues(activePageName),pageVariables=filterVariables(pageVariables),writeFile({path:"pages/"+activePageName+"/"+activePageName+".variables.json",content:pageVariables},function(){Utils.triggerFn(success)},function(errMsg){Utils.triggerFn(error,errMsg)})}},saveAppVariables:function(success,error,updateValues){var variables=self.variableCollection,appVariables=WM.copy(variables[VARIABLE_CONSTANTS.OWNER.APP]);updateValues&&updateVariableValues(),appVariables=filterVariables(appVariables),writeFile({path:"app.variables.json",content:appVariables},function(){Utils.triggerFn(success)},function(errMsg){Utils.triggerFn(error,errMsg)})},init:initVariableCollection,initPageVariables:initPageVariables,resetVariables:resetVariables,getVariableCategoryList:getVariableCategoryList,getType:getType,getVariableNameIterator:function(){return self.variableNameIterator},resetVariableNameIterator:resetVariableNameIterator,call:call,generateUniqueName:generateUniqueName,register:register,retrieveEventCallbackVariables:retrieveEventCallbackVariables,isEventCallbackVariable:isEventCallbackVariable,saveContextVariables:saveContextVariables,updateVariableDataSet:updateVariableDataSet,createLiveVariable:function(variableDetails){var createdVariable,variableName,variableOwner,variableCategory="wm.LiveVariable",defaultName=variableDetails.service.charAt(0).toUpperCase()+variableDetails.service.slice(1)+variableDetails.table.charAt(0).toUpperCase()+variableDetails.table.slice(1)+"Data";return isExists(defaultName)?variableName=defaultName:(createdVariable=create(variableCategory,{owner:variableDetails.owner||"Page",isList:!0},defaultName),variableName=createdVariable.name,variableOwner=createdVariable.owner===VARIABLE_CONSTANTS.OWNER.PAGE?$rootScope.activePageName:null,createdVariable.liveSource=variableDetails.service,createdVariable.type=variableDetails.table,createdVariable.category=variableCategory,delete createdVariable.name,store(variableOwner,variableName,createdVariable,null,!0),$rootScope.$emit("update-variables-tree",{name:variableName,category:variableCategory,properties:createdVariable})),variableName},createServiceVariable:function(variableDetails){var createdVariable,variableName,variableOwner,variableCategory="wm.ServiceVariable",defaultName=variableDetails.name||variableDetails.service.charAt(0).toUpperCase()+variableDetails.service.slice(1)+variableDetails.operation.charAt(0).toUpperCase()+variableDetails.operation.slice(1);return isExists(defaultName)?variableName=defaultName:(createdVariable=create(variableCategory,{owner:variableDetails.owner||"Page"},defaultName),variableName=createdVariable.name,variableOwner=createdVariable.owner===VARIABLE_CONSTANTS.OWNER.PAGE?$rootScope.activePageName:null,createdVariable.service=variableDetails.service,createdVariable.operation=variableDetails.operation,createdVariable.serviceType=variableDetails.serviceType,createdVariable.category=variableCategory,createdVariable.dataBinding={},delete createdVariable.name,WM.forEach(variableDetails.sampleParamValues,function(val,key){createdVariable.dataBinding[key]=val}),store(variableOwner,variableName,createdVariable,null,!0),$rootScope.$emit("update-variables-tree",{name:variableName,category:variableCategory,properties:createdVariable})),variableName},deleteDefaultVariable:function(variableDetails){var variableName,variableOwner=variableDetails.owner===VARIABLE_CONSTANTS.OWNER.APP?void 0:$rootScope.activePageName;switch(variableDetails.category){case"wm.LiveVariable":variableName=variableDetails.name||variableDetails.service.charAt(0).toUpperCase()+variableDetails.service.slice(1)+variableDetails.table.charAt(0).toUpperCase()+variableDetails.table.slice(1)+"Data";break;case"wm.ServiceVariable":variableName=variableDetails.name||variableDetails.service.charAt(0).toUpperCase()+variableDetails.service.slice(1)+variableDetails.operation.charAt(0).toUpperCase()+variableDetails.operation.slice(1)}deleteVariable(variableName,variableOwner)},initiateCallback:initiateCallback,unload:unload,getPageVariables:getPageVariables,processRequestQueue:processRequestQueue}}],wm.variables.services.BasicVariableService=["Variables","BaseVariablePropertyFactory","Utils",function(Variables,BaseVariablePropertyFactory,Utils){"use strict";var methods={getData:function(variableName,options,success){var variable=Variables.getVariableByName(variableName);return Utils.triggerFn(success,variable.dataSet),variable.dataSet},setData:function(variableName,dataSet){if(!dataSet)return variable.dataSet;var variable=Variables.getVariableByName(variableName);return variable.isList&&!WM.isArray(dataSet)?variable.dataSet:(variable.dataSet=dataSet,variable.dataSet)},getValue:function(variableName,key,index){var variable=Variables.getVariableByName(variableName);return index=index||0,variable.isList?variable.dataSet[index][key]:variable.dataSet[key]},setValue:function(variableName,key,value){var variable=Variables.getVariableByName(variableName);return key&&value&&!variable.isList?(variable.dataSet[key]=value,variable.dataSet):variable.dataSet},getItem:function(variableName,index){var variable=Variables.getVariableByName(variableName);return variable.isList?variable.dataSet[index]:variable.dataSet},setItem:function(variableName,index,value){var variable=Variables.getVariableByName(variableName);return index&&value&&variable.isList?(variable.dataSet[index]=value,variable.dataSet):variable.dataSet},addItem:function(variableName,value,index){var variable=Variables.getVariableByName(variableName);return value&&variable.isList?(index=void 0!==index?index:variable.dataSet.length,variable.dataSet.splice(index,0,value),variable.dataSet):variable.dataSet},removeItem:function(variableName,index){var variable=Variables.getVariableByName(variableName);return index=void 0!==index?index:variable.dataSet.length-1,variable.dataSet.splice(index,1),variable.dataSet},clearData:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataSet={},variable.dataSet},getCount:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.isList?variable.dataSet.length:1}},basicVariableObj={getData:function(){return methods.getData(this.name)},setData:function(dataSet){return methods.setData(this.name,dataSet)},getValue:function(key,index){return methods.getValue(this.name,key,index)},setValue:function(key,value){return methods.setValue(this.name,key,value)},getItem:function(index){return methods.getItem(this.name,index)},setItem:function(index,value){return methods.setItem(this.name,index,value)},addItem:function(value,index){return methods.addItem(this.name,value,index)},removeItem:function(index){return methods.removeItem(this.name,index)},clearData:function(){return methods.clearData(this.name)},getCount:function(){return methods.getCount(this.name)}};return BaseVariablePropertyFactory.register("wm.Variable",basicVariableObj,[],methods),{}}],wm.variables.services.$liveVariable=["$rootScope","DatabaseService","Variables","BaseVariablePropertyFactory","CONSTANTS","Utils","VARIABLE_CONSTANTS","ProjectService","DB_CONSTANTS",function($rootScope,DatabaseService,Variables,BaseVariablePropertyFactory,CONSTANTS,Utils,VARIABLE_CONSTANTS,ProjectService,DB_CONSTANTS){"use strict";var isProjectDeployed=CONSTANTS.isRunMode,isProjectDeployInProgress=!1,callbackParams=[],requestQueue={},variableActive={},reset=function(){isProjectDeployed=CONSTANTS.isRunMode},getSqlType=function(variable,fieldName){var index,columns=variable.propertiesMap.columns,columnsCount=columns.length;for(index=0;columnsCount>index;index+=1)if(columns[index].fieldName===fieldName)return columns[index].type},getTableMetaData=function(projectID,variable,options,callback,success){var variableOwner,tableDetails={};DatabaseService.getDataModel({projectID:projectID,dataModelName:variable.liveSource,isdraft:!1},function(database){var variableTable,variableType,tableNameToEntityNameMap={},entityNameToTableNameMap={};WM.forEach(database.dataTables,function(table){tableNameToEntityNameMap[table.tableName]=table.entityName,entityNameToTableNameMap[table.entityName]=table.tableName}),variableType=entityNameToTableNameMap[variable.type],WM.forEach(database.dataTables,function(table){var tableName=table.tableName;tableDetails[tableName]={},tableDetails[tableName].columns=[],tableName===variableType&&(variable.package=database.packageName+"."+table.entityName,variable.tableName=table.tableName),WM.forEach(table.dataColumns,function(column){tableDetails[tableName].columns.push({fieldName:column.fieldName,type:column.sqlType,fullyQualifiedType:column.sqlType,columnName:column.columnName,isPrimaryKey:column.isPk,notNull:column.notNull,length:column.length,precision:column.precision,generator:column.generator,isRelated:column.isFk})}),WM.forEach(table.dataRelations,function(relation){WM.forEach(tableDetails[tableName].columns,function(column){var fkColumnName=column.columnName;column.isRelated&&-1!==WM.element.inArray(fkColumnName,relation.relatedColumns)&&tableName===variableType&&(variable.properties=variable.properties||[],column.columnName=column.fieldName,column.fieldName=tableNameToEntityNameMap[relation.relatedType],column.fieldName=column.fieldName.charAt(0).toLowerCase()+column.fieldName.slice(1),column.relatedTableName=relation.relatedType,column.relatedEntityName=tableNameToEntityNameMap[relation.relatedType],-1===WM.element.inArray(relation.name,variable.properties)&&(variable.properties.push(relation.name),variable.relatedTables=variable.relatedTables||[],variable.relatedTables.push({columnName:column.fieldName,relationName:relation.name,type:tableNameToEntityNameMap[relation.relatedType],"package":relation.fullyQualifiedName,watchOn:variable.liveSource.charAt(0).toUpperCase()+variable.liveSource.slice(1)+tableNameToEntityNameMap[relation.relatedType]+"Data"})))})})}),tableDetails[variableType].entityName=variable.type,tableDetails[variableType].fullyQualifiedName=variable.package,variableTable=tableDetails[variableType],WM.forEach(variableTable.columns,function(column){column.isRelated&&(column.columns=WM.copy(tableDetails[column.relatedTableName].columns),$rootScope.dataTypes[variable.package]&&(column.isList=$rootScope.dataTypes[variable.package].fields[column.fieldName].isList))}),variable.propertiesMap=tableDetails[variableType],$rootScope.variables=$rootScope.variables||{},$rootScope.variables[variable.name]=$rootScope.variables[variable.name]||{},$rootScope.variables[variable.name].propertiesMap=variable.propertiesMap,variableOwner="Page"===variable.owner?$rootScope.activePageName:variable.owner,$rootScope.saveVariables=!0,Utils.triggerFn(callback,projectID,variable,options,success)},WM.noop)},prepareTableOptions=function(variable,options){var resultProperties={firstResult:options.firstRow||(""===variable.firstRow?0:variable.firstRow),maxResults:CONSTANTS.isRunMode?variable.maxResults:variable.designMaxResults},filterOptions=[];return"read"===variable.operation&&WM.forEach(options.filterFields||variable.filterFields,function(fieldOptions,fieldName){var fieldValue=fieldOptions.value,fieldType=fieldOptions.type||getSqlType(variable,fieldName)||"integer",filterCondition=DB_CONSTANTS.DATABASE_MATCH_MODES[options.matchMode||variable.matchMode];if(WM.isObject(fieldValue))WM.forEach(fieldValue,function(subFieldValue,subFieldName){subFieldValue&&!WM.isObject(subFieldValue)&&filterOptions.push(fieldName+"."+subFieldName+"="+subFieldValue)});else if(fieldValue){switch(fieldType){case"integer":fieldValue=parseInt(fieldValue,10),filterCondition=DB_CONSTANTS.DATABASE_MATCH_MODES.exact;break;case"big_decimal":case"big_integer":case"double":case"float":case"boolean":filterCondition=DB_CONSTANTS.DATABASE_MATCH_MODES.exact;break;case"date":case"timestamp":fieldValue=new Date(fieldValue).getTime(),filterCondition=DB_CONSTANTS.DATABASE_MATCH_MODES.exact}filterOptions.push({attributeName:fieldName,attributeValue:fieldValue,attributeType:fieldType.toUpperCase(),filterCondition:filterCondition})}}),variable.orderBy&&(resultProperties.orderBy=variable.orderBy.split(",")),filterOptions},initiateCallback=Variables.initiateCallback,processRequestQueue=Variables.processRequestQueue,getPrimaryTableData=function(projectID,variable,options,success){var filterOptions,dbOperation,callBackScope,variableOwner=variable.owner,variableEvents=VARIABLE_CONSTANTS.EVENTS;filterOptions=prepareTableOptions(variable,options),dbOperation=filterOptions&&filterOptions.length?"searchTableData":"readTableData",DatabaseService[dbOperation]({projectID:projectID,service:variable.prefabName?"":"services",dataModelName:variable.liveSource,entityName:variable.type,page:options.page||1,size:CONSTANTS.isRunMode?variable.maxResults||20:variable.designMaxResults||20,data:filterOptions,url:variable.prefabName?$rootScope.project.deployedUrl+"/prefabs/"+variable.prefabName:$rootScope.project.deployedUrl},function(response){response.content.forEach(function(rowData){var tempData;rowData&&WM.isObject(rowData.id)&&(tempData=rowData.id,delete rowData.id,WM.extend(rowData,tempData))}),$rootScope.variables[variable.name].data=response.content,$rootScope.variables[variable.name].pagingOptions={dataSize:response?response.totalElements:null,maxResults:variable.maxResults},callBackScope="App"===variableOwner?$rootScope||{}:variable.prefabName?options.scope||{}:options.scope&&options.scope.$$childTail?options.scope.$$childTail:{},response&&response.error?(CONSTANTS.isRunMode&&initiateCallback("onError",variable,callBackScope,response),Utils.triggerFn(success,$rootScope.variables[variable.name].data)):(CONSTANTS.isRunMode&&(WM.forEach(variableEvents,function(event){if("onError"!==event)if("onBeforeUpdate"===event){var newDataSet=initiateCallback(event,variable,callBackScope,response.content);newDataSet&&($rootScope.variables[variable.name].data=newDataSet)}else initiateCallback(event,variable,callBackScope,response.content)}),Variables.updateVariableDataSet(variable.name,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData||{},$rootScope.variables[variable.name].pagingOptions)),Utils.triggerFn(success,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData||{},$rootScope.variables[variable.name].pagingOptions),variableActive[variable.name]=!1,processRequestQueue(variable,requestQueue,deployProjectAndFetchData))},function(error){CONSTANTS.isRunMode&&initiateCallback("onError",variable,callBackScope,error),Utils.triggerFn(success,$rootScope.variables[variable.name].data),variableActive[variable.name]=!1,processRequestQueue(variable,requestQueue,deployProjectAndFetchData)})},getRelatedTablesData=function(projectID,variable,success){var resultProperties={firstResult:0,maxResults:CONSTANTS.isRunMode?variable.maxResults:variable.designMaxResults};variable.orderBy&&(resultProperties.orderBy=variable.orderBy.split(",")),WM.forEach(variable.relatedTables,function(relatedTable){DatabaseService.readTableData({projectID:projectID,service:variable.prefabName?"":"services",dataModelName:variable.liveSource,entityName:relatedTable.type,page:1,size:resultProperties.maxResults,url:variable.prefabName?$rootScope.project.deployedUrl+"/prefabs/"+variable.prefabName:$rootScope.project.deployedUrl},function(response){var primaryDataSize=$rootScope.variables[variable.name].pagingOptions&&$rootScope.variables[variable.name].pagingOptions.dataSize||null;$rootScope.variables[variable.name].relatedData=$rootScope.variables[variable.name].relatedData||{},$rootScope.variables[variable.name].relatedData[relatedTable.columnName]=response.content,Variables.updateVariableDataSet(variable.name,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData,{dataSize:primaryDataSize,maxResults:variable.maxResults,relatedDataChange:!0}),Utils.triggerFn(success,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData,{dataSize:primaryDataSize,maxResults:variable.maxResults,relatedDataChange:!0}),$rootScope.$watch("variables."+relatedTable.watchOn+".data",function(newVal){newVal&&($rootScope.variables[variable.name].relatedData[relatedTable.columnName]=newVal,Variables.updateVariableDataSet(variable.name,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData,{dataSize:primaryDataSize,maxResults:variable.maxResults,relatedDataChange:!0}),Utils.triggerFn(success,$rootScope.variables[variable.name].data,variable.propertiesMap,$rootScope.variables[variable.name].relatedData,{dataSize:primaryDataSize,maxResults:variable.maxResults,relatedDataChange:!0}))})})})},getTableData=function(projectID,variable,options,success){getPrimaryTableData(projectID,variable,options,success),CONSTANTS.isRunMode&&!options.isNotTriggerForRelated&&variable.relatedTables&&variable.relatedTables.length&&getRelatedTablesData(projectID,variable,success)},getDataFromService=function(variable,options,success){var projectID=$rootScope.project.id||$rootScope.projectName;$rootScope.variables[variable.name].propertiesMap=variable.propertiesMap,"read"===variable.operation&&getTableData(projectID,variable,options,success)},deployProjectAndFetchData=function(variable,options,success,error){return isProjectDeployed?void getDataFromService(variable,options,success):void(isProjectDeployInProgress?callbackParams.push({variable:variable,options:options,success:success,error:error}):(isProjectDeployInProgress=!0,ProjectService.run({projectId:$rootScope.project.id},function(result){return $rootScope.project.deployedUrl=Utils.removeProtocol(result),isProjectDeployed=!0,isProjectDeployInProgress=!1,getDataFromService(variable,options,success),callbackParams.length&&(WM.forEach(callbackParams,function(callbackParam){deployProjectAndFetchData(callbackParam.variable,callbackParam.options,callbackParam.success,callbackParam.error)}),callbackParams=[]),!0},function(){isProjectDeployInProgress=!1})))},isDateTypeField=function(fieldName,variable){var columns,numColumns,i,isDateType=!1;if(variable.propertiesMap)for(columns=variable.propertiesMap.columns||[],numColumns=columns.length,i=0;numColumns>i;i+=1)if(columns[i].fieldName===fieldName){"date"===columns[i].type&&(isDateType=!0);break}return isDateType},performDataAction=function(action,variableName,options,success,error){var dbName,callBackScope,variableDetails=Variables.getVariableByName(variableName),compositeId="",projectID=$rootScope.project.id||$rootScope.projectName,rowObject={},variableEvents=VARIABLE_CONSTANTS.EVENTS;if(callBackScope="App"===variableDetails.owner?$rootScope||{}:options.scope&&options.scope.$$childTail?options.scope.$$childTail:{},options.row?rowObject=options.row:WM.forEach(variableDetails.inputFields,function(fieldValue,fieldName){WM.isDefined(fieldValue)&&""!==fieldValue&&(isDateTypeField(fieldName,variableDetails)&&(fieldValue=new Date(fieldValue).valueOf()),rowObject[fieldName]=fieldValue)}),options.compositeKeysData){switch(action){case"updateTableData":action="updateCompositeTableData";break;case"deleteTableData":action="deleteCompositeTableData"}WM.forEach(options.compositeKeysData,function(paramValue,paramName){compositeId+=paramName+"="+paramValue+"&"}),compositeId=compositeId.slice(0,-1)}dbName=variableDetails.liveSource,WM.element.isEmptyObject(rowObject)&&"deleteTableData"===action&&(rowObject=void 0),DatabaseService[action]({projectID:projectID,service:variableDetails.prefabName?"":"services",dataModelName:dbName,entityName:variableDetails.type,id:options.id||compositeId,data:rowObject,url:variableDetails.prefabName?$rootScope.project.deployedUrl+"/prefabs/"+variableDetails.prefabName:$rootScope.project.deployedUrl},function(response){response&&response.error?(CONSTANTS.isRunMode&&initiateCallback("onError",variableDetails,callBackScope,response.error),Utils.triggerFn(error,response.error)):(CONSTANTS.isRunMode&&WM.forEach(variableEvents,function(event){"onError"!==event&&initiateCallback(event,variableDetails,callBackScope,response)}),Utils.triggerFn(success,response))},function(response){CONSTANTS.isRunMode&&initiateCallback("onError",variableDetails,callBackScope,response),Utils.triggerFn(error,response)})},methods={getData:function(variableName,options,success,error){var variable,projectID=$rootScope.project.id||$rootScope.projectName;variable=Variables.getVariableByName(variableName),!Utils.isEmptyObject(variable)&&(CONSTANTS.isStudioMode&&-1!==WM.element.inArray(variable.liveSource,$rootScope.databaseNames)||CONSTANTS.isRunMode||variable.prefabName)&&(variable.name=variableName,variableActive[variableName]?(requestQueue[variableName]=requestQueue[variableName]||[],requestQueue[variableName].push({variable:variable,options:options,success:success,error:error})):(variableActive[variableName]=!0,CONSTANTS.isRunMode||variable.prefabName||getTableMetaData(projectID,variable,options,function(){Utils.triggerFn(success,$rootScope.variables[variable.name].data,variable.propertiesMap,{},{dataSize:null,maxResults:variable.maxResults})}),deployProjectAndFetchData(variable,options,success,error)))},deleteRow:function(variableName,options,success,error){performDataAction("deleteTableData",variableName,options,success,error)},updateRow:function(variableName,options,success,error){performDataAction("updateTableData",variableName,options,success,error)},insertRow:function(variableName,options,success,error){performDataAction("insertTableData",variableName,options,success,error)},setOrderBy:function(variableName,expression){var variable=Variables.getVariableByName(variableName);return variable.orderBy=expression,variable.autoUpdate&&variable.update(),variable.orderBy},getDataSet:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataSet},clearData:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataSet={},variable.dataSet}},liveVariableObj={update:function(success,error){methods.getData(this.name,{scope:this.activeScope},success,error)},setOrderBy:function(expression){return methods.setOrderBy(this.name,expression)},getData:function(){return methods.getDataSet(this.name)},clearData:function(){return methods.clearData(this.name)}};return BaseVariablePropertyFactory.register("wm.LiveVariable",liveVariableObj,["wm.Variable","wm.ServiceVariable"],methods),{reset:reset}}],wm.variables.services.$servicevariable=["Variables","BaseVariablePropertyFactory","WebService","ServiceFactory","$rootScope","CONSTANTS","Utils","ProjectService","VARIABLE_CONSTANTS","DatabaseService",function(Variables,BaseVariablePropertyFactory,WebService,ServiceFactory,$rootScope,CONSTANTS,Utils,ProjectService,VARIABLE_CONSTANTS,DatabaseService){"use strict";var serviceModel={},requestQueue={},variableActive={},REST_METHOD_NAME="executeRestCall",prepareServiceModel=function(type,parentNode,startNode,variable){if(startNode)$rootScope.dataTypes[type]&&$rootScope.dataTypes[type].fields&&WM.forEach($rootScope.dataTypes[type].fields,function(field,fieldName){fieldName===startNode?prepareServiceModel(field.type,parentNode,null,variable):prepareServiceModel(field.type,parentNode,startNode,variable)});else if(type){if(!$rootScope.dataTypes[type].fields)return void(parentNode.value="");WM.forEach($rootScope.dataTypes[type].fields,function(field,fieldName){field.isList&&"WebService"!==variable.serviceType&&"RestService"!==variable.serviceType||($rootScope.dataTypes[field.type]&&$rootScope.dataTypes[field.type].fields?(parentNode[fieldName]={},prepareServiceModel(field.type,parentNode[fieldName],"",variable)):parentNode[fieldName]="")
})}},initiateCallback=Variables.initiateCallback,processRequestQueue=Variables.processRequestQueue,transformData=function(data,variable){var columnsArray=variable.transformationColumns,dataArray=data[variable.dataField]||[],transformedData=[];return data.wmTransformedData=[],WM.forEach(dataArray,function(datum,index){transformedData[index]={},WM.forEach(columnsArray,function(column,columnIndex){transformedData[index][column]=datum[columnIndex]})}),data},processErrorResponse=function(errMsg,variable,callBackScope,error){initiateCallback("onError",variable,callBackScope,errMsg),Utils.triggerFn(error),variableActive[variable.name]=!1,processRequestQueue(variable,requestQueue,getDataInRun)},processSuccessResponse=function(response,variable,callBackScope,options,success,error){var variableEvents=VARIABLE_CONSTANTS.EVENTS;if(response&&response.error||"RestService"===variable.serviceType&&200!==response.statusCode)processErrorResponse(response,variable,callBackScope,error);else{try{response="RestService"===variable.serviceType?JSON.parse(response.convertedResponse||response.responseBody):response}catch(e){response=response.convertedResponse||response.responseBody}variable.transformationColumns&&(response=transformData(response,variable)),WM.forEach(variableEvents,function(event){if("onError"!==event)if("onBeforeUpdate"===event){var newDataSet=initiateCallback(event,variable,callBackScope,response);newDataSet&&(response=newDataSet)}else initiateCallback(event,variable,callBackScope,response)}),options.forceRunMode||Variables.updateVariableDataSet(variable.name,response),Utils.triggerFn(success,response),variableActive[variable.name]=!1,processRequestQueue(variable,requestQueue,getDataInRun)}},getDataInRun=function(variable,options,success,error){var params,callBackScope,service=variable.service,operation=variable.operation,variableOwner=variable.owner,serviceType=variable.serviceType,dataParams=[],requestParams="";"DataService"!==serviceType&&WM.forEach(variable.dataBinding,function(param){dataParams.push(param)}),"DataService"===serviceType?(WM.forEach(variable.dataBinding,function(paramValue,paramName){requestParams+=paramName+"="+paramValue+"&"}),requestParams=requestParams.slice(0,-1),params={projectID:$rootScope.project.id,service:variable.prefabName?"":"services",dataModelName:service,queryName:operation,page:1,queryParams:requestParams,size:parseInt(variable.maxResults,10)||20,url:$rootScope.project.deployedUrl}):"RestService"===serviceType?(dataParams=[service,operation,WM.copy(variable.dataBinding)],params={method:REST_METHOD_NAME,params:dataParams,url:$rootScope.project.deployedUrl,target:"invokeRestService"}):params={method:operation,serviceFile:service+".json",params:dataParams,url:$rootScope.project.deployedUrl},variable.prefabName&&(params.url+="/prefabs/"+variable.prefabName,params.target="invokePrefabRestService"),callBackScope="App"===variableOwner?$rootScope||{}:variable.prefabName?options.scope||{}:options.scope&&options.scope.$$childTail?options.scope.$$childTail:{},variableActive[variable.name]=!0,"RestService"===serviceType?WebService.invokeRestService(params,function(response){processSuccessResponse(response,variable,callBackScope,options,success,error)},function(errorMsg){processErrorResponse(errorMsg,variable,callBackScope,error)}):"DataService"===serviceType?DatabaseService.executeNamedQuery(params,function(response){processSuccessResponse(response,variable,callBackScope,options,success,error)},function(errorMsg){processErrorResponse(errorMsg,variable,callBackScope,error)}):WebService.invoke(params,function(response){processSuccessResponse(response,variable,callBackScope,options,success,error)},function(errMsg){processErrorResponse(errMsg,variable,callBackScope,error)})},getDataInStudio=function(variable,startNode,success){var service=variable.service,operation=variable.operation;ServiceFactory.getServicesWithType(function(){ServiceFactory.getServiceOperations(service,function(){ServiceFactory.getServiceOperationParams(service,operation,function(response){var typeRef=response["return"].typeRef,fieldValue=startNode?startNode.substring(variable.name.length+1,startNode.length):startNode;serviceModel={},prepareServiceModel(typeRef,serviceModel,fieldValue,variable),success(serviceModel)})})})},methods={getDataSet:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataSet},getData:function(variableName,options,success,error){var variable=Variables.getVariableByName(variableName),startNode=options.startNode;if(variable.name=variableName,Utils.isEmptyObject(variable))return void error();if(CONSTANTS.isRunMode||options.forceRunMode){if(variableActive[variableName])return requestQueue[variableName]=requestQueue[variableName]||[],void requestQueue[variableName].push({variable:variable,options:options,success:success,error:error});options.forceRunMode?ProjectService.run({projectId:$rootScope.project.id},function(result){$rootScope.project.deployedUrl=Utils.removeProtocol(result),getDataInRun(variable,options,success,error)}):getDataInRun(variable,options,success,error)}else variable.prefabName?Utils.triggerFn(success,{}):getDataInStudio(variable,startNode,success,error)},setService:function(variableName,service){var variable=Variables.getVariableByName(variableName);return service&&(variable.service=service),variable.service},setOperation:function(variableName,operation){var variable=Variables.getVariableByName(variableName);return operation&&(variable.operation=operation),variable.operation},clearData:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataSet={},variable.dataSet}},serviceVariableObj={update:function(success,error){methods.getData(this.name,{scope:this.activeScope},success,error)},setService:function(service){return methods.setService(this.name,service)},setOperation:function(operation){return methods.setOperation(this.name,operation)},getData:function(){return methods.getDataSet(this.name)},clearData:function(){return methods.clearData(this.name)}};return BaseVariablePropertyFactory.register("wm.ServiceVariable",serviceVariableObj,["wm.Variable"],methods),{getServiceModel:function(params){var model={};return prepareServiceModel(params.typeRef,model,null,params.variable),model}}}],wm.variables.services.NavigationVariableService=function($location,Variables,BaseVariablePropertyFactory,Utils,ViewService){"use strict";var methods={navigate:function(variableName,options){var pageName,viewName,operation,sourceScope,variable=Variables.getVariableByName(variableName);if(!Utils.isEmptyObject(variable))if(pageName=variable.dataBinding&&variable.dataBinding.pageName||variable.pageName,viewName=variable.dataBinding&&variable.dataBinding.viewName||variable.viewName,operation=variable.operation,sourceScope=options.scope,"gotoPage"===operation)try{$location.path(pageName),sourceScope.$root.$safeApply(sourceScope)}catch(e){}else"gotoView"===operation&&ViewService.showView(viewName)}},basicVariableObj={navigate:function(){methods.navigate(this.name,{scope:this.activeScope})}};return BaseVariablePropertyFactory.register("wm.NavigationVariable",basicVariableObj,[],methods),{}},wm.variables.services.NotificationVariableService=function(Variables,BaseVariablePropertyFactory,DialogService,$rootScope,wmToaster){"use strict";var methods={notify:function(variableName,options){var scope,variable=Variables.getVariableByName(variableName),dialogId="notification"+variable.operation+"dialog",variableOwner=variable.owner,operation=variable.operation;if("toast"===operation){var type=variable.dataBinding.class.toLowerCase(),body=variable.dataBinding.text,timeout=parseInt(variable.dataBinding.duration),positionClass="toast-"+variable.dataBinding.toasterPosition.replace(" ","-");options.scope.config.position=positionClass||"toast-bottom-right",wmToaster.show(type,"",body,timeout)}else scope="Application"===variableOwner?$rootScope||{}:options.scope.$$childTail||{},DialogService.showDialog(dialogId,{resolve:{dialogParams:function(){return{notificationDetails:{text:variable.dataBinding.text,okButtonText:variable.dataBinding.okButtonText,cancelButtonText:variable.dataBinding.cancelButtonText,alerttype:variable.dataBinding.alerttype,onOk:variableName+"onOk",onCancel:variableName+"onCancel",onClose:variableName+"onClose"},onOk:function(){variable.onOk.trim()&&(WM.isFunction(scope[variableName+"onOk"])?scope[variableName+"onOk"](variable,null):$rootScope.$emit("invoke-service",variable.onOk)),DialogService.hideDialog(dialogId)},onCancel:function(){variable.onCancel.trim()&&(WM.isFunction(scope[variableName+"onCancel"])?scope[variableName+"onCancel"](variable,null):$rootScope.$emit("invoke-service",variable.onCancel)),DialogService.hideDialog(dialogId)},onClose:function(){variable.onClose.trim()&&(WM.isFunction(scope[variableName+"onClose"])?scope[variableName+"onClose"](variable,null):$rootScope.$emit("invoke-service",variable.onClose)),DialogService.hideDialog(dialogId)}}}},scope:scope})},getOperation:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.operation},getMessage:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.text},setMessage:function(variableName,text){var variable=Variables.getVariableByName(variableName);return"string"==typeof text&&(variable.dataBinding.text=text),variable.dataBinding.text},getOkButtonText:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.okButtonText},setOkButtonText:function(variableName,text){var variable=Variables.getVariableByName(variableName);return"string"==typeof text&&(variable.dataBinding.okButtonText=text),variable.dataBinding.okButtonText},getToasterDuration:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.duration},setToasterDuration:function(variableName,duration){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.duration=duration,variable.dataBinding.duration},getToasterClass:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.class},setToasterClass:function(variableName,type){var variable=Variables.getVariableByName(variableName);return"string"==typeof type&&(variable.dataBinding.class=type),variable.dataBinding.class},getToasterPosition:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.class},setToasterPosition:function(variableName,position){var variable=Variables.getVariableByName(variableName);return"string"==typeof position&&(variable.dataBinding.position=position),variable.dataBinding.position},getAlertType:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.alerttype},setAlertType:function(variableName,alerttype){var variable=Variables.getVariableByName(variableName);return"string"==typeof alerttype&&(variable.dataBinding.alerttype=alerttype),variable.dataBinding.alerttype},getCancelButtonText:function(variableName){var variable=Variables.getVariableByName(variableName);return variable.dataBinding.cancelButtonText},setCancelButtonText:function(variableName,text){var variable=Variables.getVariableByName(variableName);return"string"==typeof text&&(variable.dataBinding.cancelButtonText=text),variable.dataBinding.cancelButtonText}},basicVariableObj={notify:function(){methods.notify(this.name,{scope:this.activeScope})},getOperation:function(){return methods.getOperation(this.name,{scope:this.activeScope})},getMessage:function(){return methods.getMessage(this.name)},setMessage:function(text){return methods.setMessage(this.name,text)},getOkButtonText:function(){return methods.getOkButtonText(this.name)},setOkButtonText:function(text){return methods.setOkButtonText(this.name,text)},getToasterDuration:function(){return methods.getToasterDuration(this.name)},setToasterDuration:function(duration){return methods.setToasterDuration(this.name,duration)},getToasterClass:function(){return methods.getToasterClass(this.name)},setToasterClass:function(type){return methods.setToasterClass(this.name,type)},getToasterPosition:function(){return methods.getToasterPosition(this.name)},setToasterPosition:function(position){return methods.setToasterPosition(this.name,position)},getAlertType:function(){return methods.getAlertType(this.name)},setAlertType:function(alerttype){return methods.setAlertType(this.name,alerttype)},getCancelButtonText:function(){return methods.getCancelButtonText(this.name)},setCancelButtonText:function(text){return methods.setCancelButtonText(this.name,text)}};return BaseVariablePropertyFactory.register("wm.NotificationVariable",basicVariableObj,[],methods),{}},WM.module("wm.layouts.container").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/container/accordion.html",'<div class="app-accordion panel-group" wmtransclude init-widget data-ng-show="show"'+$rootScope.getWidgetStyles("container")+"></div>"),$templateCache.put("template/layout/container/accordion-pane.html",'<div class="app-accordion-panel panel panel-default" init-widget wmtransclude data-ng-show="show"></div>'),$templateCache.put("template/layout/container/accordion-header.html",'<div class="panel-heading" data-ng-click="pane.togglePane()" init-widget'+$rootScope.getWidgetStyles("container")+'><h4 class="panel-title"><a href="javascript:void(0)" class="accordion-toggle" wmtransclude></a></h4></div>'),$templateCache.put("template/layout/container/accordion-content.html","<div class=\"panel-collapse collapse\" data-ng-class=\"pane.active ? 'collapse in' : 'collapse'\" init-widget page-container "+$rootScope.getWidgetStyles("container")+'><div class="panel-body" wmtransclude page-container-target></div></div>')}]).directive("wmAccordion",["$templateCache","WidgetUtilService","PropertiesFactory","$compile",function($templateCache,WidgetUtilService,PropertiesFactory,$compile){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.accordion",["wm.base","wm.layouts","wm.containers"]);return{restrict:"E",replace:!0,scope:{},transclude:!0,template:$templateCache.get("template/layout/container/accordion.html"),controller:function($scope){this.panes=[],this.register=function(paneScope){this.panes.push(paneScope)},this.closeOthers=function(){$scope.closeothers&&WM.forEach(this.panes,function(pane){pane.active&&pane.onCollapse(),pane.active=!1})}},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,ctrl){var addNewBtnTemplate,defaultPane;scope.widgetid&&(addNewBtnTemplate='<div class="wm-widget-toolbar"><button class="app-button add-new-accordionpane" data-ng-click="_addNewAccordionPane()"><i class="wm-icon add"></i>{{$root.locale.LABEL_ADD}}</button></div>',scope._addNewAccordionPane=function(){scope.$root.$emit("canvas-add-widget",{parentId:scope.widgetid,widgetType:"wm-accordionpane"}),addNewBtnTemplate.appendTo(element),ctrl.panes[ctrl.panes.length-1].expand()},addNewBtnTemplate=$compile(addNewBtnTemplate)(scope),addNewBtnTemplate.appendTo(element)),defaultPane=_.find(ctrl.panes,function(pane){return pane.isdefaultpane})||ctrl.panes[0],defaultPane.expand(),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmAccordionpane",["$templateCache","WidgetUtilService","PropertiesFactory","Utils",function($templateCache,WidgetUtilService,PropertiesFactory,Utils){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.accordionpane",["wm.base"]);return{restrict:"E",replace:!0,scope:{onExpand:"&",onCollapse:"&"},transclude:!0,template:$templateCache.get("template/layout/container/accordion-pane.html"),require:"^wmAccordion",controller:function($scope){this.getPaneScope=function(){return $scope}},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,panesCtrl){panesCtrl.register(scope),scope.togglePane=function(){scope.active=!scope.active,scope.active?(scope.initialized||(scope.initialized=!0,element.find(".ng-isolate-scope").each(function(){Utils.triggerFn(WM.element(this).isolateScope().redraw)})),scope.onExpand(),panesCtrl.closeOthers(scope),scope.active=!0):scope.onCollapse()},scope.expand=function(){scope.active||scope.togglePane()},scope.collapse=function(){scope.active&&scope.togglePane()},WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmAccordionheader",["$templateCache","WidgetUtilService","PropertiesFactory","$compile","Utils",function($templateCache,WidgetUtilService,PropertiesFactory,$compile,Utils){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"paneicon":scope.iconsource=Utils.getBackGroundImageUrl(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.accordionheader",["wm.base","wm.layouts"]),notifyFor={paneicon:!0};return{restrict:"E",replace:!0,scope:{},transclude:!0,template:$templateCache.get("template/layout/container/accordion-header.html"),require:"^wmAccordionpane",compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps,scope.widgetProps.show&&delete scope.widgetProps.show},post:function(scope,element,attrs,paneCtrl){var template,transcludeTarget=element.find("[wmtransclude]"),onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,0===transcludeTarget.children().length&&(template='<i class="app-icon" data-ng-show="iconsource" data-ng-style="{backgroundImage:iconsource}">&nbsp;</i> {{heading}} <span class="description" data-ng-if="description"> - {{description}}</span><i class="app-icon" data-ng-class="pane.active ? \'panel-open-false\': \'panel-open-true\'">&nbsp;</i>',transcludeTarget.append($compile(template)(scope))),scope.pane=paneCtrl.getPaneScope(),scope.pane.isdefaultpane=scope.isdefaultpane,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmAccordioncontent",["$templateCache","WidgetUtilService","PropertiesFactory",function($templateCache,WidgetUtilService,PropertiesFactory){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.accordioncontent",["wm.base","wm.layouts"]);return{restrict:"E",replace:!0,scope:{},transclude:!0,template:$templateCache.get("template/layout/container/accordion-content.html"),require:"^wmAccordionpane",compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps),scope.widgetProps.show&&delete scope.widgetProps.show},post:function(scope,element,attrs,paneCtrl){scope.pane=paneCtrl.getPaneScope(),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.container").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/container/form.html",'<form role="form" init-widget class="form-{{layout}} app-form align-{{captionalign}} position-{{captionposition}}"  data-ng-class={"active-container":active} autocomplete="autocomplete" action method'+$rootScope.getWidgetStyles("container")+" wmtransclude></form>")}]).directive("wmForm",["PropertiesFactory","WidgetUtilService","$compile","$templateCache",function(PropertiesFactory,WidgetUtilService,$compile,$templateCache){"use strict";function propertyChangeHandler(scope,element,key,newVal){var value,submitTemplate,resetTemplate;switch(key){case"captionsize":element.find(".app-label.ng-isolate-scope").each(function(){WM.element(this).isolateScope().width=newVal});break;case"novalidate":newVal===!0||"true"===newVal?element.attr("novalidate",""):element.removeAttr("novalidate");break;case"autocomplete":value=newVal===!0||"true"===newVal?"on":"off",element.attr(key,value);break;case"submitbutton":newVal===!0||"true"===newVal?(submitTemplate=$compile('<wm-button class="form-submit" type="submit" '+(scope.widgetid?"":'on-click="constructObject()"')+' caption="submit"></wm-button>')(scope),element.append(submitTemplate)):element.find(".form-submit").remove();break;case"resetbutton":newVal===!0||"true"===newVal?(resetTemplate=$compile('<wm-button class="reset-submit" type="button" caption="reset" '+(scope.widgetid?"":'on-click="clearData();"')+" ></wm-button>")(scope),element.append(resetTemplate)):element.find(".reset-submit").remove()}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.form",["wm.layouts","wm.base.events.touch"]),notifyFor={captionsize:!0,novalidate:!0,autocomplete:!0,submitbutton:!0,resetbutton:!0};return{restrict:"E",replace:!0,scope:{onSubmit:"&",onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/container/form.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSubmit")&&template.attr("data-ng-submit","onSubmit({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.clearData=function(){element[0].reset();var htmlElements=element.find(".app-files-upload-status, .app-richtexteditor [ng-model]");htmlElements.length&&htmlElements.html("")},scope.constructObject=function(eventObj){scope.onSubmit(eventObj,element.serializeArray())},scope.setReadonly=function(){element.find("input, textarea").attr("disabled",!0)},scope.removeReadonly=function(){element.find("input, textarea").attr("disabled",!1)},WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.container").directive("wmLayoutgrid",["PropertiesFactory","WidgetUtilService","$rootScope",function(PropertiesFactory,WidgetUtilService,$rootScope){"use strict";function refactorClassName(element,newClass){var classArray=element.attr("class").split(" ");WM.forEach(classArray,function(classname){0===classname.indexOf("col-")&&element.removeClass(classname)}),element.addClass(newClass)}function setColumnWidth(columns,value){var className="col-md-"+value+" col-sm-"+value;WM.forEach(columns,function(column){refactorClassName(WM.element(column),className)})}function setRowHeight(gridRows,numberOfRows){var rowHeight=1/numberOfRows*100+"%";WM.forEach(gridRows,function(row){WM.element(row).css("height",rowHeight)})}function setDefaultColumnWidth(gridColumns,totalColWidth){var defaultWidth,cols=[];WM.forEach(gridColumns,function(column){var col=WM.element(column),width=col.attr("columnwidth");width?totalColWidth-=width:cols.push(col)}),cols.length&&(defaultWidth=parseInt(totalColWidth/cols.length,10),setColumnWidth(cols,defaultWidth))}function propertyChangeHandler(scope,element,key,newVal,oldVal){var oldValue,columnElements,rowElements,i;switch(key){case"columns":oldValue=oldVal||scope.columns,scope.$root.$emit("construct-grid",key,element,oldValue,newVal),parseInt(oldValue,10)!==parseInt(newVal,10)&&(rowElements=element.children(".app-grid-row"),WM.forEach(rowElements,function(rowElement){columnElements=WM.element(rowElement).find(".app-grid-column"),setDefaultColumnWidth(columnElements,12)}));break;case"rows":if(oldValue=oldVal||scope.rows,oldValue=parseInt(oldValue,10),scope.$root.$emit("construct-grid",key,element,oldValue,newVal),rowElements=element.children(".app-grid-row"),oldValue!==parseInt(newVal,10)&&setRowHeight(rowElements,newVal),newVal>oldValue)for(i=0;newVal-oldValue>i;i++)columnElements=rowElements.eq(oldValue+i).find(".app-grid-column"),setColumnWidth(columnElements,12/scope.columns);0===newVal&&(scope.columns=0)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.layoutgrid",["wm.layouts"]),notifyFor={columns:!0,rows:!0};return{restrict:"E",replace:!0,scope:{},transclude:!0,template:'<div init-widget class="app-grid-layout clearfix" '+$rootScope.getWidgetStyles()+" wmtransclude></div>",compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange,totalColumnWidth=12,gridRows=element.find(".app-grid-row");setRowHeight(gridRows,attrs.rows),WM.forEach(gridRows,function(row){var gridColumns=WM.element(row).find(".app-grid-column");setDefaultColumnWidth(gridColumns,totalColumnWidth)}),onPropertyChange=propertyChangeHandler.bind(void 0,scope,element),onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmGridrow",["PropertiesFactory","WidgetUtilService","$rootScope",function(PropertiesFactory,WidgetUtilService,$rootScope){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.gridrow",["wm.layouts"]);return{restrict:"E",replace:!0,scope:{},transclude:!0,template:'<div init-widget class="app-grid-row clearfix"'+$rootScope.getWidgetStyles()+" wmtransclude></div>",compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmGridcolumn",["PropertiesFactory","WidgetUtilService","$rootScope",function(PropertiesFactory,WidgetUtilService,$rootScope){"use strict";function setColumnWidth(element,value){var classArray=element.attr("class").split(" ");WM.forEach(classArray,function(classname){0===classname.indexOf("col-")&&element.removeClass(classname)}),element.addClass("col-md-"+value+" col-sm-"+value)}function propertyChangeHandler(element,key,newVal){switch(key){case"columnwidth":setColumnWidth(element,newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.gridcolumn",["wm.layouts"]),notifyFor={columnwidth:!0};return{restrict:"E",replace:!0,scope:{},transclude:!0,template:'<div init-widget class="app-grid-column"'+$rootScope.getWidgetStyles("container")+'><div class="app-ng-transclude" wmtransclude></div></div>',compile:function(){return{pre:function(scope,element,attrs){scope.widgetProps=widgetProps,attrs.columnwidth&&setColumnWidth(element,attrs.columnwidth)},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.container").directive("wmList",["PropertiesFactory","WidgetUtilService","$rootScope","$compile","CONSTANTS",function(PropertiesFactory,WidgetUtilService,$rootScope,$compile,CONSTANTS){"use strict";function transformList(dataSet){var newArray=[];return WM.isArray(dataSet)?newArray=dataSet:WM.isObject(dataSet)?newArray=[dataSet]:WM.isString(dataSet)&&dataSet.trim()&&WM.forEach(dataSet.split(","),function(val){val=val.trim(),newArray.push(val)}),newArray}function createList(dataSet,listElement,scope){var listData=transformList(dataSet);listElement.html(""),WM.forEach(listData,function(value){if(WM.isString(value)||WM.isNumber(value))listElement.append(WM.element('<wm-list-item class="'+scope.itemclass+'">'+value+"</wm-list-item>"));else if(WM.isArray(value))createList(value,listElement,scope);else if(WM.isObject(value)){var content="";WM.forEach(value,function(val,key){content+='<p class="clearfix"><wm-label caption="'+key+': " class="col-md-4 app-list-item-name"></wm-label><wm-label caption="'+val+'" class="col-md-8 app-list-item-value"></wm-label></p>'}),listElement.append(WM.element('<wm-list-item class="'+scope.itemclass+'">'+content+"</wm-list-item>"))}}),$compile(listElement.contents())(scope)}function propertyChangeHandler(scope,element,key,newVal,oldVal){switch(key){case"dataset":newVal&&""!==newVal.dataValue?createList(newVal.data||newVal,element,scope):oldVal&&!newVal&&createList("",element,scope);break;case"itemsperrow":if(scope.itemclass=newVal&&"col-md-"+12/+newVal,CONSTANTS.isStudioMode&&scope.dataset){var oldClass=oldVal&&"col-md-"+12/+oldVal;element.children(".app-list-item").removeClass(oldClass).addClass(scope.itemclass)}}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.list",["wm.layouts"]),notifyFor={dataset:!0,itemsperrow:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?"},transclude:!0,template:'<ul init-widget has-model class="app-list" data-ng-show="show"'+$rootScope.getWidgetStyles("container")+' data-element-type="wmList" wmtransclude></ul>',compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.widgetid||scope.$watch("scopedataset",function(newVal){newVal&&createList(newVal,element,scope)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmListItem",["PropertiesFactory","WidgetUtilService","$rootScope",function(PropertiesFactory,WidgetUtilService,$rootScope){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.listitem",["wm.layouts"]);return{restrict:"E",replace:!0,scope:{},transclude:!0,template:'<li init-widget  class="app-list-item"'+$rootScope.getWidgetStyles("container")+" wmtransclude></li>",compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.container").directive("wmListtemplate",["PropertiesFactory","WidgetUtilService","$rootScope","CONSTANTS",function(PropertiesFactory,WidgetUtilService,$rootScope,CONSTANTS){"use strict";function getRowClass(itemsperrow){var col=itemsperrow&&12/+itemsperrow;return" col-xs-"+col+" col-md-"+col}var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.listtemplate",["wm.containers"]);return{restrict:"E",replace:!0,scope:{scopedataset:"=?"},require:"^wmLivelist",transclude:CONSTANTS.isStudioMode,template:function(template,attrs){return CONSTANTS.isRunMode?(attrs.markup=template.children(),'<script data-identifier="listtemplate"></script>'):'<li init-widget class="app-listtemplate app-list-item" data-ng-show="show"'+$rootScope.getWidgetStyles("container")+"wmtransclude></li>"},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,controller){var listScope=controller.getListScope();listScope.markup=attrs.markup,listScope.itemclass=(attrs.itemclass||"")+getRowClass(listScope.itemsperrow),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.container").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/container/panel.html",'<div page-container init-widget class="app-panel" data-ng-show="show" '+$rootScope.getWidgetStyles("container")+" wmtransclude page-container-target></div>")}]).directive("wmPanel",["PropertiesFactory","WidgetUtilService","$templateCache","Utils",function(PropertiesFactory,WidgetUtilService,$templateCache,Utils){"use strict";
var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.panel",["wm.layouts","wm.containers","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onEnterkeypress:"&",onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/container/panel.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onEnterkeypress")&&template.attr("data-ng-keypress","onEnterkeypress({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs),scope.widgetid||(scope.onKeyPress=function(args){var action=Utils.getActionFromKey(args.$event);"ENTER"===action&&scope.onEnterkeypress(args)})}}}}}]),WM.module("wm.layouts.container").run(["$rootScope","$templateCache",function($rootScope,$templateCache){"use strict";$templateCache.put("template/layout/container/tabs.html",'<div class="app-tabs tabbable" init-widget data-ng-show="show"'+$rootScope.getWidgetStyles("container")+"><ul class=\"nav nav-tabs\" data-ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\"></ul><div class=\"tab-content\"  data-ng-class=\"{'tab-stacked': vertical, 'tab-justified': justified}\" wmtransclude></div></div>"),$templateCache.put("template/layout/container/tab-pane.html",'<div class="tab-pane" wmtransclude init-widget data-ng-show="show" data-ng-class="{active: isActive, disabled:disabled}"></div>'),$templateCache.put("template/layout/container/tab-header.html",'<li class="tab-header" data-ng-class="{active: tab.isActive, disabled: tab.disabled}" data-ng-show="tab.show" data-tab-id="{{tab.widgetid}}" data-ng-click="tab.select()" init-widget><a wmtransclude'+$rootScope.getWidgetStyles("container")+"></a></li>"),$templateCache.put("template/layout/container/tab-content.html",'<div page-container wmtransclude page-container-target class="tab-body" data-tab-id="{{tab.widgetid}}" init-widget'+$rootScope.getWidgetStyles("container")+"></div>")}]).directive("wmTabs",["PropertiesFactory","$templateCache","WidgetUtilService","Utils","$compile",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils,$compile){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.tabs",["wm.base","wm.layouts","wm.containers"]);return{restrict:"E",scope:{},replace:!0,transclude:!0,template:$templateCache.get("template/layout/container/tabs.html"),controller:function($scope,$element){$scope.tabs=[],this.register=function(tabScope){$scope.tabs.push(tabScope)},this.unregister=function(tab){var i,len=$scope.tabs.length;for(i=0;len>i&&$scope.tabs[i].$id!==tab.$id;i++);$scope.tabs.splice(i,1),$element.find('[data-tab-id="'+tab.widgetid+'"]').remove()},this.selectTab=function(tab){var i,_tab=$scope.activeTab,tabs=$scope.tabs;for(_tab&&(_tab.onDeselect(),_tab.isActive=!1),$scope.activeTab=tab,i=0;i<tabs.length;i++)if($scope.activeTab.$id===tabs[i].$id){$scope.activeTabIndex=i;break}tab.onSelect()},$scope.selectTab=this.selectTab},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){function selectTab(tab,onBeforeSwitchTab){Utils.triggerFn(onBeforeSwitchTab),tab&&tab.select()}var activeTab,tab,toolTipTarget,tabs=scope.tabs,addNewBtnTemplate='<li class="wm-widget-toolbar"><button class="app-button add-new-tab" data-ng-click="_addNewTab()"><i class="wm-icon add"></i>{{$root.locale.LABEL_ADD}}</button></li>';tabs.forEach(function(tab){activeTab?tab.isActive=!1:tab.isdefaulttab&&(activeTab=tab)}),activeTab=activeTab||tabs[0],activeTab.isActive=!0,activeTab.initialized=!0,scope.selectTab(activeTab),scope.next=function(onBeforeSwitchTab){selectTab(tabs[scope.activeTabIndex+1],onBeforeSwitchTab)},scope.previous=function(onBeforeSwitchTab){selectTab(tabs[scope.activeTabIndex-1],onBeforeSwitchTab)},scope.goToTab=function(tabNum,onBeforeSwitchTab){WM.isNumber(tabNum)&&tabNum>0&&tabNum<=tabs.length&&(tab=tabs[tabNum-1],selectTab(tab,onBeforeSwitchTab))},scope.widgetid&&(toolTipTarget=element.find("ul.nav-tabs"),scope._addNewTab=function(){scope.$root.$emit("canvas-add-widget",{parentId:scope.widgetid,widgetType:"wm-tabpane"}),selectTab(tabs[tabs.length-1]),addNewBtnTemplate.appendTo(toolTipTarget)},addNewBtnTemplate=$compile(addNewBtnTemplate)(scope),addNewBtnTemplate.appendTo(toolTipTarget)),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmTabpane",["PropertiesFactory","$templateCache","WidgetUtilService","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.tabpane",["wm.base"]);return{restrict:"E",scope:{onSelect:"&",onDeselect:"&",onClose:"&"},replace:!0,require:"^wmTabs",transclude:!0,template:$templateCache.get("template/layout/container/tab-pane.html"),controller:function($scope,$element){var tabsTarget=$element.closest(".tabbable").find(".nav-tabs");this.registerHead=function(scope){return tabsTarget.append(scope._element),$scope},this.registerContent=function(){return $scope}},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,ctrl){ctrl.register(scope),scope.$on("$destroy",function(){ctrl.unregister(scope)}),scope.select=function(){scope.isActive||scope.disabled||(scope.initialized||(scope.initialized=!0,element.find(".ng-isolate-scope").each(function(){Utils.triggerFn(WM.element(this).isolateScope().redraw)})),scope.isActive=!0,ctrl.selectTab(scope))},WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmTabheader",["$compile","PropertiesFactory","WidgetUtilService","$templateCache","Utils",function($compile,PropertiesFactory,WidgetUtilService,$templateCache,Utils){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"paneicon":scope.iconsource=Utils.getBackGroundImageUrl(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.tabheader",["wm.base","wm.layouts"]),notifyFor={paneicon:!0};return{restrict:"E",scope:{},replace:!0,require:"^wmTabpane",transclude:!0,template:$templateCache.get("template/layout/container/tab-header.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps,scope.widgetProps.show&&delete scope.widgetProps.show},post:function(scope,element,attrs,ctrl){var template,transcludeTarget=element.find("[wmtransclude]"),onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),0===transcludeTarget.children().length&&(template='<div class="tab-heading"><i class="app-icon" data-ng-show="iconsource" data-ng-style ="{backgroundImage:iconsource}">&nbsp;</i> {{heading}}<i data-ng-click="tab.onClose();" data-ng-if="tab.closable">&nbsp;</i></div>',transcludeTarget.append($compile(template)(scope))),scope._element=element,scope.tab=ctrl.registerHead(scope),scope.tab.isdefaulttab=scope.isdefaulttab,WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmTabcontent",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.tabcontent",["wm.base","wm.layouts"]);return{restrict:"E",scope:{},replace:!0,require:"^wmTabpane",transclude:!0,template:$templateCache.get("template/layout/container/tab-content.html"),compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps),scope.widgetProps.show&&delete scope.widgetProps.show},post:function(scope,element,attrs,ctrl){scope.tab=ctrl.registerContent(scope),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.device").service("MobileEventService",function(){"use strict";function swipe(direction,selector,callback){var startTime,ALLOWED_TIME=2e3,startPosition={},touchElement=WM.element(selector)[0];touchElement.addEventListener("touchstart",function(touchEvent){touchEvent.preventDefault(),startTime=(new Date).getTime();var touchObj=touchEvent.changedTouches[0];startPosition.x=touchObj.pageX,startPosition.y=touchObj.pageY},!1),touchElement.addEventListener("touchmove",function(touchEvent){touchEvent.preventDefault()},!1),touchElement.addEventListener("touchend",function(touchEvent){touchEvent.preventDefault();var actualSwipeDirection,swipeDuration=(new Date).getTime()-startTime,distance={},touchObj=touchEvent.changedTouches[0];ALLOWED_TIME>=swipeDuration&&(distance.x=touchObj.pageX-startPosition.x,distance.y=touchObj.pageY-startPosition.y,Math.abs(distance.x)>=0&&Math.abs(distance.x)>=Math.abs(distance.y)?actualSwipeDirection=distance.x<0?SWIPE_DIRECTION.LEFT:SWIPE_DIRECTION.RIGHT:Math.abs(distance.y)>=0&&Math.abs(distance.y)>=Math.abs(distance.x)&&(actualSwipeDirection=distance.y<0?SWIPE_DIRECTION.UP:SWIPE_DIRECTION.DOWN),actualSwipeDirection===direction&&callback())},!1)}var SWIPE_DIRECTION={LEFT:"LEFT",UP:"UP",DOWN:"DOWN",RIGHT:"RIGHT"};return{touch:function(selector,callback){var el=WM.element(selector)[0];el&&(el.addEventListener("touchend",function(){callback()},!1),el.addEventListener("click",function(){callback()},!1))},swipeUp:function(selector,callback){swipe(SWIPE_DIRECTION.UP,selector,callback)},swipeDown:function(selector,callback){swipe(SWIPE_DIRECTION.DOWN,selector,callback)},swipeLeft:function(selector,callback){swipe(SWIPE_DIRECTION.LEFT,selector,callback)},swipeRight:function(selector,callback){swipe(SWIPE_DIRECTION.RIGHT,selector,callback)}}}),WM.module("wm.layouts.device").service("DeviceViewService",["MobileEventService","Utils",function(MobileEventService,Utils){"use strict";function classSelector(className){return"."+className}function hidePageContainers(){Utils.isMobile()?WM.element(classSelector(NAV_BAR_CLASS_NAME)+","+classSelector(LEFT_PANEL_CLASS_NAME)+", "+classSelector(HEADER_CLASS_NAME)+" "+classSelector(SEARCH_CONTAINER_CLASS_NAME)).hide():(WM.element(classSelector(NAV_BAR_CLASS_NAME)+","+classSelector(LEFT_PANEL_CLASS_NAME)).show(),WM.element(classSelector(SEARCH_CONTAINER_CLASS_NAME)).show().css("display","inline-table"))}function toggleContainer(container){hidePageContainers(),Utils.isMobile()&&WM.element(container).toggle()}function toggleSearchContainer(){var searchEle=WM.element(classSelector(HEADER_CLASS_NAME)+" "+classSelector(SEARCH_CONTAINER_CLASS_NAME));"none"===searchEle.css("display")?(hidePageContainers(),searchEle.css("display","inline-table")):hidePageContainers()}function bindLeftPanelEvents(){MobileEventService.touch(classSelector(SWIPE_ELEM_CLASS_NAME),function(){toggleContainer(classSelector(LEFT_PANEL_CLASS_NAME))})}function bindSearchIconEvent(){MobileEventService.touch(classSelector(SEARCH_ELEM_CLASS_NAME),toggleSearchContainer)}function bindNavBarEvents(){MobileEventService.touch(classSelector(NAV_ICON_CLASS_NAME),function(){toggleContainer(classSelector(NAV_BAR_CLASS_NAME))})}function bindContentEvents(){MobileEventService.touch(classSelector(CONTENT_CLASS_NAME),hidePageContainers)}function bindRightPanelEvents(){MobileEventService.touch(classSelector(RIGHT_PANEL_CLASS_NAME),hidePageContainers)}var NAV_BAR_CLASS_NAME="app-top-nav",LEFT_PANEL_CLASS_NAME="app-left-panel",RIGHT_PANEL_CLASS_NAME="app-right-panel",SWIPE_ELEM_CLASS_NAME="app-mobile-swipe-icon",SEARCH_ELEM_CLASS_NAME="app-mobile-search-icon",SEARCH_CONTAINER_CLASS_NAME="app-search",NAV_ICON_CLASS_NAME="app-mobile-nav-icon",CONTENT_CLASS_NAME="app-content-column",HEADER_CLASS_NAME="app-header";return{update:function(element,hasTopNav,hasLeftNav,hasRightNav,hasHeaderSearch){bindContentEvents(),hasTopNav?bindNavBarEvents():element.find(classSelector(NAV_ICON_CLASS_NAME)).hide(),hasLeftNav?bindLeftPanelEvents():element.find(classSelector(SWIPE_ELEM_CLASS_NAME)).hide(),hasRightNav&&bindRightPanelEvents(),hasHeaderSearch&&(bindSearchIconEvent(),element.find(classSelector(SEARCH_ELEM_CLASS_NAME)).show())}}}]),WM.module("wm.layouts.page").service("ViewService",[function(){"use strict";var viewsScope=[],hideActiveView=function(viewGroup){var i;for(i=0;i<viewsScope.length;i+=1)viewsScope[i].show&&viewsScope[i].viewgroup===viewGroup&&(viewsScope[i].show=!1)},goToView=function(viewGroup,viewName){var i;for(i=0;i<viewsScope.length;i+=1)if(viewsScope[i].viewgroup===viewGroup&&viewsScope[i].name===viewName){hideActiveView(viewGroup),viewsScope[i].show=!0;break}},registerView=function(scope){viewsScope.push(scope)},unregisterView=function(scope){viewsScope.splice(viewsScope.indexOf(scope),1)},showView=function(name){var i,view=WM.element("[name="+name+"]"),parentViews=view.parents(".app-view");for(i=0;i<parentViews.length;i+=1)goToView(parentViews.attr("viewgroup")||"default",parentViews.attr("name"));view.length>0&&goToView(view.isolateScope().viewgroup,name)},hideView=function(name){hideActiveView(WM.element("[name="+name+"]").isolateScope().viewgroup)},getViews=function(){return viewsScope},clearViews=function(){viewsScope=[]};return{registerView:registerView,unregisterView:unregisterView,hideView:hideView,showView:showView,getViews:getViews,clearViews:clearViews}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/column.html",'<div init-widget class="app-column" '+$rootScope.getWidgetStyles("container")+' ><div class="app-ng-transclude" wmtransclude></div></div>')}]).directive("wmColumn",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.column",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{columnwidth:"@",onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/column.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope.columnwidth&&WM.element(element).addClass("col-md-"+scope.columnwidth+" col-sm-"+scope.columnwidth),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/content.html",'<div init-widget class="app-content clearfix" '+$rootScope.getWidgetStyles()+" wmtransclude></div>")}]).directive("wmContent",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.content",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,transclude:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/content.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/footer.html",'<div page-container page-container-target init-widget class="app-footer clearfix"'+$rootScope.getWidgetStyles("container")+" wmtransclude></div>")}]).directive("wmFooter",["PropertiesFactory","WidgetUtilService","CONSTANTS","$templateCache",function(PropertiesFactory,WidgetUtilService,CONSTANTS,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.footer",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/footer.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope,element){scope.widgetProps=WM.copy(widgetProps),CONSTANTS.isRunMode&&(element.scope().layout.footer=!0)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/header.html",'<div page-container init-widget class="app-header clearfix"'+$rootScope.getWidgetStyles("container")+'><div class="app-header-container" wmtransclude page-container-target></div><div class="app-mobile-header"><button class="app-mobile-swipe-icon">&nbsp;</button><button class="app-mobile-search-icon" style="display: none">&nbsp;</button><button class="app-mobile-nav-icon">&nbsp;</button></div></div>')}]).directive("wmHeader",["PropertiesFactory","WidgetUtilService","$templateCache","CONSTANTS",function(PropertiesFactory,WidgetUtilService,$templateCache,CONSTANTS){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.header",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/header.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope,element){scope.widgetProps=WM.copy(widgetProps),CONSTANTS.isRunMode&&(element.scope().layout.header=!0)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/leftpanel.html",'<div page-container init-widget class="app-left-panel col-md-{{contentwidth}} col-sm-{{contentwidth}}" '+$rootScope.getWidgetStyles("container")+' ><div class="app-ng-transclude" wmtransclude page-container-target></div></div>')}]).directive("wmLeftPanel",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.leftpanel",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{contentwidth:"@",onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/leftpanel.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").directive("wmPage",["DeviceViewService","CONSTANTS","$rootScope","$routeParams","Utils",function(DeviceViewService,CONSTANTS,$rootScope,$routeParams,Utils){"use strict";return{restrict:"E",replace:!0,transclude:!0,template:'<div class="app-page container" wmtransclude></div>',compile:function(){return{pre:function(scope,element,attrs){if(!scope.registerPageContainer&&CONSTANTS.isRunMode){var count=0;scope.layout={navigationBar:!1,leftSection:!1,rightSection:!1,header:!1,footer:!1,search:!1},scope.onPageLoad=function(){count||(Utils.triggerFn(scope.onPageReady),attrs.columns>1&&(scope.layout.leftSection=!0),attrs.columns>2&&(scope.layout.rightSection=!0),scope.layout.search=element.find(".app-header .app-search").length>0,DeviceViewService.update(element,scope.layout.navigationBar,scope.layout.leftSection,scope.layout.rightSection,scope.layout.search))},scope.registerPagePart=function(){count++},scope.onPagePartLoad=function(){--count,scope.onPageLoad()},WM.isFunction(scope.handleRoute)&&scope.handleRoute.apply(void 0,_.values($routeParams).slice(1))}},post:function(scope,element,attrs){element.addClass("layout-"+attrs.layouttype);var handlers=[],listenerName="on-"+(attrs.ngController?attrs.ngController.replace("PageController","")+"-variables-ready":"");CONSTANTS.isRunMode&&(Utils.triggerFn(scope.onPageLoad),handlers.push($rootScope.$on("on-app-variables-ready",function(){Utils.triggerFn(scope.$root.onAppVariablesReady)})),handlers.push($rootScope.$on(listenerName,function(){Utils.triggerFn(scope.onPageVariablesReady)})),scope.$on("$destroy",function(){handlers.forEach(Utils.triggerFn)}))}}}}}]).directive("wmPartial",["CONSTANTS","$rootScope","Utils",function(CONSTANTS,$rootScope,Utils){"use strict";return{restrict:"E",replace:!0,transclude:!0,template:'<div class="app-partial container" wmtransclude></div>',compile:function(){return{post:function(scope,element,attrs){var handlers=[],listenerName="on-"+(attrs.ngController?attrs.ngController.replace("PageController","")+"-variables-ready":"");CONSTANTS.isRunMode&&(scope.hasOwnProperty("onPageReady")&&Utils.triggerFn(scope.onPageReady),handlers.push($rootScope.$on("on-app-variables-ready",function(){Utils.triggerFn(scope.$root.onAppVariablesReady)})),handlers.push($rootScope.$on(listenerName,function(){Utils.triggerFn(scope.onPageVariablesReady)})),scope.$on("$destroy",function(){handlers.forEach(Utils.triggerFn)}))}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/rightpanel.html",'<div page-container init-widget class="app-right-panel col-md-{{contentwidth}} col-sm-{{contentwidth}}"'+$rootScope.getWidgetStyles("container")+' ><div class="app-ng-transclude" wmtransclude page-container-target></div></div>')}]).directive("wmRightPanel",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.rightpanel",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{contentwidth:"@",onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/rightpanel.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/row.html",'<div init-widget class="row app-row clearfix" data-ng-show="show"  '+$rootScope.getWidgetStyles()+" wmtransclude></div>")}]).directive("wmRow",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.row",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/row.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/topnav.html",'<div page-container init-widget class="app-top-nav clearfix"'+$rootScope.getWidgetStyles()+" wmtransclude page-container-target></div>")}]).directive("wmTopNav",["PropertiesFactory","WidgetUtilService","CONSTANTS","$templateCache",function(PropertiesFactory,WidgetUtilService,CONSTANTS,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.topnav",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/topnav.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope,element){scope.widgetProps=WM.copy(widgetProps),CONSTANTS.isRunMode&&(element.scope().layout.navigationBar=!0)},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.layouts.page").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/layout/page/view.html",'<div init-widget class="app-view" data-ng-show="show" '+$rootScope.getWidgetStyles("container")+" wmtransclude> </div>")}]).directive("wmView",["PropertiesFactory","WidgetUtilService","CONSTANTS","$templateCache","ViewService",function(PropertiesFactory,WidgetUtilService,CONSTANTS,$templateCache,ViewService){"use strict";
var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.view",["wm.layouts","wm.base.events.touch"]);return{restrict:"E",replace:!0,scope:{onSwipeup:"&",onSwipedown:"&",onSwipeleft:"&",onSwiperight:"&",onPinchin:"&",onPinchout:"&"},transclude:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/layout/page/view.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onSwipeup")&&template.attr("hm-swipe-up","onSwipeup({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipedown")&&template.attr("hm-swipe-down","onSwipedown({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwipeleft")&&template.attr("hm-swipe-left","onSwipeleft({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onSwiperight")&&template.attr("hm-swipe-right","onSwiperight({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchin")&&template.attr("hm-pinch-in","onPinchin({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onPinchout")&&template.attr("hm-pinch-out","onPinchout({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){ViewService.registerView(scope),scope.setActive=function(){ViewService.showView(scope.name)};var isDialogView=element.hasClass("dialog-view");isDialogView&&(CONSTANTS.isStudioMode&&element.attr("wm-droppable",!1),CONSTANTS.isRunMode&&(scope.show=!1)),WidgetUtilService.postWidgetCreate(scope,element,attrs),element.on("$destroy",function(){ViewService.unregisterView(scope)})}}}}}]);var base=WM.module("wm.widgets.base",[]).constant("WIDGET_CONSTANTS",{EVENTS:{onChange:"",onClick:"",onDblclick:"",onMousedown:"",onMouseup:"",onMouseover:"",onMouseout:"",onMousemove:"",onMouseenter:"",onMouseleave:"",onKeydown:"",onKeyup:"",onKeypress:"",onFocus:"",onBlur:"",onShow:"",onHide:"",onSuccess:"",onError:"",onOk:"",onSubmit:"",onCancel:"",onClose:"",onResult:"",onExpand:"",onCollapse:"",onSelect:"",onDeselect:"",onAbort:"",onProgress:"",onReady:"",onTransform:"",onSort:"",onGridButtonClick:"",onRenderData:"",onRowrender:"",onCellRightClick:"",onHeaderClick:"",onRowDeleted:"",onBeforeservicecall:"",onEnterkeypress:"",onSetrecord:"",onSwipeup:"",onSwipedown:"",onSwipeleft:"",onSwiperight:"",onPinchin:"",onPinchout:""},EVENTS_OPTIONS:["No Event","Javascript","New ServiceVariable","New LiveVariable","New NavigationCall","New NotificationCall"]}).run(["$rootScope",function($rootScope){"use strict";$rootScope.getWidgetStyles=function(type){return' data-ng-style="{backgroundColor: backgroundcolor,backgroundGradient: backgroundgradient,backgroundImage :picturesource,backgroundRepeat: backgroundrepeat,borderBottomWidth: borderbottom + borderunit,borderColor: bordercolor,borderLeftWidth: borderleft + borderunit,borderRadius: borderradius,borderRightWidth: borderright + borderunit,borderStyle: borderstyle,borderTopWidth: bordertop + borderunit,color: color,cursor: cursor,fontFamily: fontfamily,fontSize: fontsize + fontunit,fontStyle: fontstyle,fontVariant: fontvariant,fontWeight: fontweight,height: height,lineHeight: lineheight,marginBottom:  marginbottom + marginunit,marginLeft: marginleft + marginunit,marginRight: marginright + marginunit,marginTop: margintop + marginunit,maxHeight: maxheight,maxWidth: maxwidth,minHeight: minheight,minWidth: minwidth,opacity: opacity,paddingBottom: paddingbottom + paddingunit,paddingLeft: paddingleft + paddingunit,paddingRight: paddingright + paddingunit,paddingTop: paddingtop + paddingunit,'+("container"===type?"textAlign: horizontalalign,":"textAlign: textalign,")+'textDecoration: textdecoration,verticalAlign: verticalalign,whiteSpace: whitespace,width: width,wordBreak: wordbreak,zIndex: zindex}" '}}]);base.factories={},base.directives={},base.services={},base.factories.PropertiesFactory=["WIDGET_CONSTANTS",function(WIDGET_CONSTANTS){"use strict";function getPropertiesOf(widget,parents){var widgetProps,parentsArr;return parents?(parentsArr=WM.isArray(parents)?parents:[parents],parentsArr.push(widget),widgetProps={},parentsArr.forEach(function(parent){WM.isObject(properties[parent])&&Object.keys(properties[parent]).forEach(function(propName){var propObj=properties[parent][propName];widgetProps[propName]||(widgetProps[propName]={}),Object.keys(propObj).forEach(function(key){widgetProps[propName][key]=propObj[key]})})})):widgetProps=WM.copy(properties[widget]),Object.keys(widgetProps).forEach(function(key){var property=widgetProps[key];property.hasOwnProperty("show")||(property.show=!0),property.disabled=property.disabled||!1}),widgetProps}function getPropertyGroups(){return propertyGroups}function setRoles(pRoles){roles.length=0,roles.push("Everyone"),WM.isArray(pRoles)&&pRoles.forEach(function(pRole){roles.push(pRole)})}function getRoles(){return roles||[]}var widgetEventOptions=WM.copy(WIDGET_CONSTANTS.EVENTS_OPTIONS),roles=["Everyone"],result={properties:{"wm.base":{name:{type:"string"},show:{type:"boolean",value:!0,bindable:"in-bound"},"class":{type:"string"},accessroles:{type:"accessrolesselect",options:roles,value:"Everyone"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"block"}},"wm.base.editors":{width:{type:"string"},height:{type:"string"},minwidth:{type:"string"},maxwidth:{type:"string"},minheight:{type:"string"},maxheight:{type:"string"},border:{type:"string",widget:"box"},borderunit:{type:"string",options:["em","px"],value:"px",widget:"radio"},bordertop:{type:"string"},borderright:{type:"string"},borderbottom:{type:"string"},borderleft:{type:"string"},borderwidth:{type:"string"},borderstyle:{type:"string",options:["dashed","dotted","none","solid"],widget:"borderstyle"},bordercolor:{type:"string",widget:"color"},padding:{type:"string",widget:"box"},paddingunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},background:{type:"string"},backgroundcolor:{type:"string",widget:"color"},backgroundgradient:{type:"string"},backgroundimage:{type:"string",bindable:"in-bound"},backgroundrepeat:{type:"list",options:["no-repeat","repeat","repeat-x","repeat-y"]},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textalign:{type:"string",options:["left","center","right"],hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontVariant:{type:"list",options:["normal","small-caps"]},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},misc:{type:"string"},whitespace:{type:"list",options:[" ","normal","nowrap","pre","pre-line","pre-wrap"],value:" "},wordbreak:{type:"list",options:["break-word","normal"]},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"}},"wm.base.editors.abstracteditors":{disabled:{type:"boolean",bindable:"in-bound"},hint:{type:"string",value:"",bindable:"in-out-bound"},required:{type:"boolean"},tabindex:{type:"string"},onClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseenter:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseleave:{type:"event",options:widgetEventOptions,widget:"eventlist"},onFocus:{type:"event",options:widgetEventOptions,widget:"eventlist"},onBlur:{type:"event",options:widgetEventOptions,widget:"eventlist"},onChange:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.base.editors.captionproperties":{caption:{type:"string",value:"_unset_",bindable:"in-bound"},captionsize:{type:"string"},paddingtop:{value:"0"},paddingright:{value:"0"},paddingbottom:{value:"0"},paddingleft:{value:"0"},bordertop:{value:"0"},borderright:{value:"0"},borderbottom:{value:"0"},borderleft:{value:"0"}},"wm.base.editors.dataseteditors":{startupdate:{type:"boolean"},scopedataset:{type:"list",options:[]},datafield:{type:"list",options:["All Fields"],value:"All Fields"},displayfield:{type:"list",options:[""],value:""},displayexpression:{type:"string"},displaytype:{type:"list",options:["Currency","Date","Number","Text","Time"]}},"wm.base.events":{onClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onDblclick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseenter:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseleave:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.base.events.touch":{onSwipeup:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSwipedown:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSwipeleft:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSwiperight:{type:"event",options:widgetEventOptions,widget:"eventlist"},onPinchin:{type:"event",options:widgetEventOptions,widget:"eventlist"},onPinchout:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.base.events.focus":{onFocus:{type:"event",options:widgetEventOptions,widget:"eventlist"},onBlur:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.base.events.change":{onChange:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.base.events.successerror":{onSuccess:{type:"event",options:widgetEventOptions,widget:"eventlist"},onError:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.abstractinput":{type:{type:"string",value:"text"}},"wm.html":{content:{type:"string",bindable:"in-out-bound",widget:"textarea"},hint:{type:"string",bindable:"in-out-bound"},autoscroll:{type:"boolean"},height:{type:"string",value:"100"}},"wm.iframe":{iframesrc:{type:"string",bindable:"in-bound",widget:"string"},hint:{type:"string",bindable:"in-out-bound"},width:{type:"string",value:"300px"},height:{type:"string",value:"150px"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline"}},"wm.button":{hint:{type:"string",bindable:"in-out-bound"},iconname:{type:"list",options:["_none_","adjust","align-center","align-justify","align-left","align-right","arrow-down","arrow-left","arrow-right","arrow-up","asterisk","backward","ban-circle","barcode","bold","book","bullhorn","calendar","certificate","check","chevron-down","chevron-left","chevron-right","chevron-up","circle-arrow-left","circle-arrow-right","circle-arrow-up","cloud","cloud-download","cloud-upload","cog","collapse-down","collapse-up","comment","compressed","copyright-mark","credit-card","cutlery","dashboard","download","download-alt","earphone","edit","eject","envelope","euro","exclamation-sign","expand","export","eye-close","eye-open","facetime-video","fast-backward","fast-forward","file","film","filter","flag","flash","floppy-disk","floppy-open","floppy-remove","floppy-save","floppy-saved","folder-close","folder-open","font","forward","fullscreen","gbp","gift","glass","globe","hand-down","hand-left","hand-right","hand-up","hd-video","hdd","header","headphones","heart","home","import","inbox","indent-left","indent-right","info-sign","leaf","link","list","list-alt","log-in","log-out","magnet","map-marker","minus","minus-sign","move","music","new-window","ok","ok-circle","ok-sign","open","paperclip","pause","pencil","phone","phone-alt","picture","plane","play","plus","plus-sign","print","qrcode","question-sign","random","record","refresh","registration-mark","remove","remove-circle","remove-sign","repeat","resize-full","resize-small","resize-vertical","retweet","road","save","saved","screenshot","sd-video","search","send","share","share-alt","shopping-cart","signal","sort","sort-by-alphabet","sort-by-alphabet-alt","sound-5-1","sound-6-1","sound-7-1","sound-dolby","sound-stereo","star","star-empty","stats","step-backward","step-forward","stop","subtitles","tag","tags","text-height","text-width","th","th-large","th-list","thumbs-down","thumbs-up","time","tint","tower","transfer","trash","tree-conifer","upload","user","volume-down","volume-off","volume-up","warning-sign","wrench","zoom-in","zoom-out"]},caption:{type:"string",value:"Button",bindable:"in-out-bound"},iconurl:{type:"string"},iconwidth:{type:"string"},iconheight:{type:"string"},iconmargin:{type:"string"},disabled:{type:"boolean",bindable:"in-bound"},type:{type:"list",options:["button","reset","submit"]},tabindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}},"wm.buttongroup":{hint:{type:"string",bindable:"in-out-bound"},vertical:{type:"boolean"}},"wm.menu":{scopedataset:{type:"string"},dataset:{type:"object",bindable:"in-bound",widget:"string",value:"Menu Item 1, Menu Item 2, Menu Item 3"},caption:{type:"string",value:"Menu",bindable:"in-out-bound"},iconname:{type:"list",options:["_none_","adjust","align-center","align-justify","align-left","align-right","arrow-down","arrow-left","arrow-right","arrow-up","asterisk","backward","ban-circle","barcode","bold","book","bullhorn","calendar","certificate","check","chevron-down","chevron-left","chevron-right","chevron-up","circle-arrow-left","circle-arrow-right","circle-arrow-up","cloud","cloud-download","cloud-upload","cog","collapse-down","collapse-up","comment","compressed","copyright-mark","credit-card","cutlery","dashboard","download","download-alt","earphone","edit","eject","envelope","euro","exclamation-sign","expand","export","eye-close","eye-open","facetime-video","fast-backward","fast-forward","file","film","filter","flag","flash","floppy-disk","floppy-open","floppy-remove","floppy-save","floppy-saved","folder-close","folder-open","font","forward","fullscreen","gbp","gift","glass","globe","hand-down","hand-left","hand-right","hand-up","hd-video","hdd","header","headphones","heart","home","import","inbox","indent-left","indent-right","info-sign","leaf","link","list","list-alt","log-in","log-out","magnet","map-marker","minus","minus-sign","move","music","new-window","ok","ok-circle","ok-sign","open","paperclip","pause","pencil","phone","phone-alt","picture","plane","play","plus","plus-sign","print","qrcode","question-sign","random","record","refresh","registration-mark","remove","remove-circle","remove-sign","repeat","resize-full","resize-small","resize-vertical","retweet","road","save","saved","screenshot","sd-video","search","send","share","share-alt","shopping-cart","signal","sort","sort-by-alphabet","sort-by-alphabet-alt","sound-5-1","sound-6-1","sound-7-1","sound-dolby","sound-stereo","star","star-empty","stats","step-backward","step-forward","stop","subtitles","tag","tags","text-height","text-width","th","th-large","th-list","thumbs-down","thumbs-up","time","tint","tower","transfer","trash","tree-conifer","upload","user","volume-down","volume-off","volume-up","warning-sign","wrench","zoom-in","zoom-out"]},onSelect:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.tree":{scopedataset:{type:"string"},dataset:{type:"object",bindable:"in-bound",widget:"string",value:"node1, node2, node3"},onSelect:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.text":{autofocus:{type:"boolean"},readonly:{type:"boolean"},type:{type:"list",options:["date","email","number","password","text","url"],value:"text"},datavalue:{type:"string",value:"",bindable:"in-out-bound"},scopedatavalue:{type:"string"},regexp:{type:"string",value:".*"},placeholder:{type:"string",value:"Enter text"},maxchars:{type:"number",bindable:"in-bound"},changeOnkey:{type:"boolean"},minvalue:{type:"number",bindable:"in-bound"},maxvalue:{type:"number",bindable:"in-bound"},places:{type:"number",value:0}},"wm.currency":{datavalue:{type:"number",bindable:"in-out-bound"},scopedatavalue:{type:"string"},minvalue:{type:"number"},maxvalue:{type:"number"},readonly:{type:"boolean"},currency:{type:"list",value:"USD",options:["AED","AFN","ALL","AMD","ARS","AUD","AZN","BAM","BDT","BGN","BHD","BIF","BND","BOB","BRL","BWP","BYR","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","GBP","GEL","GHS","GNF","GTQ","HKD","HNL","HRK","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KHR","KMF","KRW","KWD","KZT","LBP","LKR","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MOP","MUR","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SDG","SEK","SGD","SOS","SYP","THB","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","XAF","XOF","YER","ZAR","ZMK"]},placeholder:{type:"string",value:"Enter value"},width:{type:"string"},height:{type:"string"},minwidth:{type:"string"},maxwidth:{type:"string"},minheight:{type:"string"},maxheight:{type:"string"},backgroundcolor:{type:"string",widget:"color"},backgroundgradient:{type:"string"},backgroundimage:{type:"string",bindable:"in-bound"},backgroundrepeat:{type:"list",options:["no-repeat","repeat","repeat-x","repeat-y"]},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textalign:{type:"string",options:["left","center","right"],hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},whitespace:{type:"list",options:[" ","normal","nowrap","pre","pre-line","pre-wrap"],value:" "},wordbreak:{type:"list",options:["break-word","normal"]},misc:{type:"string"},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"}},"wm.base.datetime":{datavalue:{type:"string",bindable:"in-out-bound"},scopedatavalue:{type:"string"},tabindex:{type:"string"},placeholder:{type:"string",value:"Select date"},border:{type:"string",widget:"box"},borderunit:{type:"string",options:["em","px"],value:"px",widget:"radio"},bordertop:{type:"string"},borderright:{type:"string"},borderbottom:{type:"string"},borderleft:{type:"string"},borderwidth:{type:"string"},borderstyle:{type:"string",options:["dashed","dotted","none","solid"],widget:"borderstyle"},bordercolor:{type:"string",widget:"color"},padding:{type:"string",widget:"box"},paddingunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textalign:{type:"string",options:["left","center","right"],hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontVariant:{type:"list",options:["normal","small-caps"]},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"}},"wm.date":{autofocus:{type:"boolean"},readonly:{type:"boolean",value:!1},disabled:{type:"boolean",value:!1},mindate:{type:"date"},maxdate:{type:"date"},datepattern:{value:"dd-MM-yyyy",type:"string"},datavalue:{type:"date, string, number",widget:"date",bindable:"in-out-bound"}},"wm.calendar":{autofocus:{type:"boolean"},disabled:{type:"boolean",value:!1},datepattern:{value:"dd-MMMM-yyyy",type:"string"},datavalue:{type:"date, string, number",widget:"date",bindable:"in-out-bound"}},"wm.time":{autofocus:{type:"boolean"},readonly:{type:"boolean",value:!1},disabled:{type:"boolean",value:!1},hourstep:{type:"number",value:1},minutestep:{type:"number",value:15},ismeridian:{type:"boolean",value:!0},hint:{type:"string",value:"",bindable:"in-out-bound"},required:{type:"boolean"}},"wm.message":{type:{type:"string",options:["error","info","loading","success","warn"],value:"success",bindable:"in-out-bound",widget:"list"},caption:{type:"string",value:"Message",bindable:"in-out-bound"},onClose:{type:"event",options:widgetEventOptions,widget:"list"}},"wm.composite":{hint:{type:"string",value:"",bindable:"in-out-bound"},captionposition:{type:"list",options:["left","right","top"],value:"left"},hintkey:{type:"string",value:""}},"wm.booleaneditors":{width:{type:"string"},height:{type:"string"},minwidth:{type:"string"},maxwidth:{type:"string"},minheight:{type:"string"},maxheight:{type:"string"},padding:{type:"string",widget:"box"},paddingunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"}},"wm.radio":{autofocus:{type:"boolean"},disabled:{value:!1},scopedatavalue:{type:"string"},datavalue:{type:"string",bindable:"in-out-bound"},checkedvalue:{type:"string"},radiogroup:{type:"string"}},"wm.radioset":{hint:{type:"string",value:"",bindable:"in-out-bound"},tabindex:{type:"string"},disabled:{type:"boolean",value:!1},readonly:{type:"boolean",value:!1},onClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseenter:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseleave:{type:"event",options:widgetEventOptions,widget:"eventlist"},onFocus:{type:"event",options:widgetEventOptions,widget:"eventlist"},onBlur:{type:"event",options:widgetEventOptions,widget:"eventlist"},onChange:{type:"event",options:widgetEventOptions,widget:"eventlist"},datavalue:{type:"string",bindable:"in-out-bound",show:!1},scopedatavalue:{type:"string"},dataset:{type:"object",bindable:"in-bound",widget:"string"},scopedataset:{type:"string"},datafield:{type:"list",options:["All Fields"],value:"All Fields"},displayfield:{type:"list",options:[""],value:""},displayexpression:{type:"string"},usekeys:{type:"boolean"},selectedvalue:{type:"string",value:"",bindable:"in-bound"}},"wm.colorpicker":{readonly:{type:"boolean",value:!1},disabled:{type:"boolean",value:!1},datavalue:{type:"string",bindable:"in-out-bound"},scopedatavalue:{type:"string"},placeholder:{type:"string",value:"Select Color"},tabindex:{type:"string"}},"wm.inputcolorpicker":{defaultcolor:{value:"#fff"}},"wm.inputslider":{caption:{value:"slider"}},"wm.slider":{caption:{type:"string",value:"slider",bindable:"in-out-bound"},hint:{type:"string",value:"",bindable:"in-out-bound"},readonly:{type:"boolean",value:!1},disabled:{type:"boolean",value:!1},minimum:{type:"string"},maximum:{type:"string"},step:{type:"string"},defaultvalue:{type:"number",bindable:"in-out-bound"},integervalues:{type:"boolean"},showbuttons:{type:"boolean"}},"wm.inputrangeslider":{caption:{value:"rangeslider"}},"wm.checkbox":{datavalue:{type:"boolean, string",bindable:"in-out-bound",widget:"string"},checkedvalue:{type:"string"},scopedatavalue:{type:"string"},startchecked:{type:"boolean"}},"wm.checkboxset":{hint:{type:"string",value:"",bindable:"in-out-bound"},tabindex:{type:"string"},disabled:{type:"boolean",value:!1},readonly:{type:"boolean",value:!1},onClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseenter:{type:"event",options:widgetEventOptions,widget:"eventlist"},onMouseleave:{type:"event",options:widgetEventOptions,widget:"eventlist"},onFocus:{type:"event",options:widgetEventOptions,widget:"eventlist"},onBlur:{type:"event",options:widgetEventOptions,widget:"eventlist"},onChange:{type:"event",options:widgetEventOptions,widget:"eventlist"},datavalue:{type:"string",bindable:"in-out-bound",show:!1},scopedatavalue:{type:"string"},dataset:{type:"object",bindable:"in-bound",widget:"string"},scopedataset:{type:"string"},usekeys:{type:"boolean"},datafield:{type:"list",options:["All Fields"],value:"All Fields"},displayfield:{type:"list",options:[""],value:""},displayexpression:{type:"string"},selectedvalues:{type:"string",bindable:"in-bound"},onReady:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.select":{autofocus:{type:"boolean"},readonly:{type:"boolean",value:!1},scopedatavalue:{type:"string"},datavalue:{type:"string",bindable:"in-out-bound"},scopedataset:{type:"string"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},allownone:{type:"boolean"},hasdownarrow:{type:"boolean",value:!0},restrictvalues:{type:"boolean",value:!0},disabled:{value:!1},multiple:{type:"boolean",value:!1}},"wm.label":{hint:{type:"string",value:"",bindable:"in-out-bound"},caption:{type:"string",value:"Label",bindable:"in-out-bound"},required:{type:"boolean"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}},"wm.popuplink":{helptext:{type:"string",value:"popup link"},popupcontent:{type:"string",value:"sample popup text"},ispopuptext:{type:"boolean",value:!0},popupplacement:{type:"list",options:["bottom","left","mouse","right","top"],value:"bottom"},popupidentifier:{type:"string"},popuparrow:{type:"boolean",value:!0},popupautoclose:{type:"boolean"}},"wm.picture":{hint:{type:"string",value:"",bindable:"in-out-bound"},picturesource:{type:"string",value:"resources/images/imagelists/default-image.png",bindable:"in-out-bound"},pictureaspect:{type:"list",options:["Both","H","None","V"],value:"None"},disabled:{type:"boolean",bindable:"in-bound"},tabindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}},"wm.textarea":{autofocus:{type:"boolean"},readonly:{type:"boolean"},datavalue:{type:"string",bindable:"in-out-bound"},scopedatavalue:{type:"string"},placeholder:{type:"string",value:"Place your text"},maxchars:{type:"number"}},"wm.basicdialog":{height:{type:"string"},iconname:{type:"list",options:["_none_","adjust","align-center","align-justify","align-left","align-right","arrow-down","arrow-left","arrow-right","arrow-up","asterisk","backward","ban-circle","barcode","bold","book","bullhorn","calendar","certificate","check","chevron-down","chevron-left","chevron-right","chevron-up","circle-arrow-left","circle-arrow-right","circle-arrow-up","cloud","cloud-download","cloud-upload","cog","collapse-down","collapse-up","comment","compressed","copyright-mark","credit-card","cutlery","dashboard","download","download-alt","earphone","edit","eject","envelope","euro","exclamation-sign","expand","export","eye-close","eye-open","facetime-video","fast-backward","fast-forward","file","film","filter","flag","flash","floppy-disk","floppy-open","floppy-remove","floppy-save","floppy-saved","folder-close","folder-open","font","forward","fullscreen","gbp","gift","glass","globe","hand-down","hand-left","hand-right","hand-up","hd-video","hdd","header","headphones","heart","home","import","inbox","indent-left","indent-right","info-sign","leaf","link","list","list-alt","log-in","log-out","magnet","map-marker","minus","minus-sign","move","music","new-window","ok","ok-circle","ok-sign","open","paperclip","pause","pencil","phone","phone-alt","picture","plane","play","plus","plus-sign","print","qrcode","question-sign","random","record","refresh","registration-mark","remove","remove-circle","remove-sign","repeat","resize-full","resize-small","resize-vertical","retweet","road","save","saved","screenshot","sd-video","search","send","share","share-alt","shopping-cart","signal","sort","sort-by-alphabet","sort-by-alphabet-alt","sound-5-1","sound-6-1","sound-7-1","sound-dolby","sound-stereo","star","star-empty","stats","step-backward","step-forward","stop","subtitles","tag","tags","text-height","text-width","th","th-large","th-list","thumbs-down","thumbs-up","time","tint","tower","transfer","trash","tree-conifer","upload","user","volume-down","volume-off","volume-up","warning-sign","wrench","zoom-in","zoom-out"]},iconwidth:{type:"string"},iconheight:{type:"string"},iconmargin:{type:"string"},title:{type:"string",value:"Dialog",bindable:"in-bound"},onClose:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.dialog.onOk":{onOk:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.alertdialog":{title:{type:"string",value:"Alert",bindable:"in-bound"},oktext:{type:"string",value:"OK",bindable:"in-bound"},iconname:{type:"list",value:"warning-sign"},message:{type:"string",value:"I am an alert box!",bindable:"in-bound"},alerttype:{type:"list",options:["error","information","success","warning"],value:"error"}},"wm.confirmdialog":{title:{type:"string",value:"Confirm",bindable:"in-bound"},canceltext:{type:"string",value:"CANCEL",bindable:"in-bound"},oktext:{type:"string",value:"OK",bindable:"in-bound"},iconname:{type:"list",value:"ok"},message:{type:"string",value:"I am confirm box!",bindable:"in-bound"},onCancel:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.iframedialog":{title:{type:"string",value:"External Content",bindable:"in-bound"},url:{type:"string",value:"http://www.wavemaker.com",bindable:"in-out-bound"},height:{type:"string",value:"400"},iconname:{type:"list",value:"globe"},oktext:{type:"string",value:"OK",bindable:"in-bound"}},"wm.pagedialog":{title:{type:"string",value:"Page Content",bindable:"in-bound"},oktext:{type:"string",value:"OK",bindable:"in-bound"},iconname:{type:"list",value:"file"}},"wm.logindialog":{title:{type:"string",value:"Login",bindable:"in-bound"},modal:{type:"boolean",value:!1},iconname:{type:"list",value:"login-in"}},"wm.designdialog":{title:{type:"string",value:"Form",bindable:"in-bound"},modal:{type:"boolean",value:!0},iconname:{type:"list",value:"edit"},iconclass:{type:"string"}},"wm.spinner":{show:{type:"boolean",value:!1},caption:{type:"string",value:"Loading..."},servicevariabletotrack:{type:"list",options:[]},image:{type:"string",bindable:"in-bound"},imagewidth:{type:"string"},imageheight:{type:"string"},background:{type:"string"},backgroundcolor:{type:"string",widget:"color"},backgroundgradient:{type:"string"},backgroundimage:{type:"string",bindable:"in-bound"},backgroundrepeat:{type:"list",options:["no-repeat","repeat","repeat-x","repeat-y"]},backgroundposition:{type:"string",hint:"top, left"},backgroundattachment:{type:"list",options:["fixed","local","scroll"]},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontVariant:{type:"list",options:["normal","small-caps"]},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},misc:{type:"string"},opacity:{type:"string",widget:"slider"},zindex:{type:"string"}},"wm.layouts":{name:{type:"string"},"class":{type:"string"},border:{type:"string",widget:"box"},borderunit:{type:"string",options:["em","px"],value:"px",widget:"radio"},bordertop:{type:"string"},borderright:{type:"string"},borderbottom:{type:"string"},borderleft:{type:"string"},borderwidth:{type:"string"},borderstyle:{type:"string",options:["dashed","dotted","none","solid"],widget:"borderstyle"},bordercolor:{type:"string",widget:"color"},padding:{type:"string",widget:"box"},paddingunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},background:{type:"string"},backgroundcolor:{type:"string",widget:"color"},backgroundgradient:{type:"string"},backgroundimage:{type:"string",bindable:"in-bound"},backgroundrepeat:{type:"list",options:["no-repeat","repeat","repeat-x","repeat-y"]},backgroundposition:{type:"string",hint:"top, left"},backgroundattachment:{type:"list",options:["fixed","local","scroll"]},color:{type:"string",hidelabel:!0,widget:"color"},text:{type:"string"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},horizontalalign:{type:"string",options:["left","center","right"],widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontVariant:{type:"list",options:["normal","small-caps"]},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},misc:{type:"string"},whitespace:{type:"list",options:[" ","normal","nowrap","pre","pre-line","pre-wrap"],value:" "},wordbreak:{type:"list",options:["break-word","normal"]},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"},accessroles:{type:"accessrolesselect",options:roles,value:"Everyone"}},"wm.containers":{"class":{type:"string"},show:{type:"boolean",value:!0,bindable:"in-bound"},height:{type:"string"},width:{type:"string"},accessroles:{type:"accessrolesselect",options:roles,value:"Everyone"}},"wm.layouts.header":{height:{type:"string"}},"wm.layouts.list":{height:{type:"string"},show:{type:"boolean",value:!0,bindable:"in-out-bound"}},"wm.layouts.listtemplate":{height:{type:"string"},width:{type:"string"}},"wm.layouts.listitem":{height:{type:"string"},width:{type:"string"}},"wm.layouts.topnav":{height:{type:"string"}},"wm.layouts.leftpanel":{},"wm.layouts.rightpanel":{},"wm.layouts.content":{height:{type:"string"}},"wm.layouts.panel":{marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margin:{type:"string",widget:"box"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},onEnterkeypress:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.layouts.footer":{height:{type:"string"}},"wm.layouts.layoutgrid":{name:{type:"string"},rows:{type:"number",value:"0"},columns:{type:"list",options:["1","2","3","4","6","12"],value:"0"},height:{type:"string",value:"400"},width:{type:"string",value:"100%"}},"wm.layouts.gridcolumn":{columnwidth:{type:"list",options:["1","2","3","4","5","6","7","8","9","10","11","12"]}},"wm.layouts.gridrow":{height:{type:"string"}},"wm.layouts.column":{},"wm.layouts.row":{show:{type:"boolean",value:!0}},"wm.layouts.view":{show:{type:"boolean",value:!0},viewgroup:{type:"string",value:"default"}},"wm.layouts.form":{"class":{type:"string"},name:{type:"string"},novalidate:{type:"boolean",value:!1},autocomplete:{type:"boolean",value:!0},action:{type:"string"},margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},method:{type:"list",options:["get","post"]},height:{type:"string"},width:{type:"string"},captionsize:{type:"string",value:""},captionalign:{type:"list",options:["left","center","right"],value:"left"},captionposition:{type:"list",options:["left","right","top"],value:"left"},submitbutton:{type:"boolean"},resetbutton:{type:"boolean"},layout:{type:"list",options:["inline","horizontal"],value:"horizontal"},onSubmit:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.layouts.liveform":{action:{type:"string"},autocomplete:{type:"boolean",value:!0},captionsize:{type:"string",value:""},captionalign:{type:"list",options:["left","center","right"],value:"left"},captionposition:{type:"list",options:["left","right","top"],value:"left"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},editfields:{type:"button",hidelabel:!0},height:{type:"string"},rowdata:{type:"string"},formdata:{type:"object",bindable:"in-bound",widget:"string"},method:{type:"list",options:["get","post"]},name:{type:"string"},novalidate:{type:"boolean",value:!0},scopedataset:{type:"string"},show:{type:"boolean",value:!0},updatemode:{type:"boolean",value:!1},width:{type:"string"},onBeforeservicecall:{type:"event",options:widgetEventOptions,widget:"eventlist"},onResult:{type:"event",options:widgetEventOptions,widget:"eventlist"},onError:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSuccess:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.grid":{width:{value:"100%"},height:{value:"200px"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},scopedataset:{type:"string"},pagesize:{type:"number"},editcolumn:{type:"button",hidelabel:!0},gridfirstrowselect:{type:"boolean"},casesensitivesort:{type:"boolean",value:!0},confirmdelete:{type:"string",value:"Are you sure you want to delete this?",bindable:"in-out-bound",show:!1},deleterow:{type:"boolean",bindable:"in-out-bound"},updaterow:{type:"boolean",bindable:"in-out-bound"},gridnoheader:{type:"boolean"},gridsearch:{type:"boolean",value:!1},insertrow:{type:"boolean",value:!1,bindable:"in-out-bound"},showrecordcount:{type:"boolean",value:!1,show:!1},shownavigation:{type:"boolean",value:!0},nodatamessage:{type:"string",value:"No data found",bindable:"in-out-bound"},selecteditem:{type:"object",bindable:"in-out-bound",show:!1,widget:"string"},onClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSelect:{type:"event",options:widgetEventOptions,widget:"eventlist"},onDeselect:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSort:{type:"event",options:widgetEventOptions,widget:"eventlist"},onRenderData:{type:"event",options:widgetEventOptions,widget:"eventlist"},onRowrender:{type:"event",options:widgetEventOptions,widget:"eventlist"},onHeaderClick:{type:"event",options:widgetEventOptions,widget:"eventlist"},onShow:{type:"event",options:widgetEventOptions,widget:"eventlist"},onHide:{type:"event",options:widgetEventOptions,widget:"eventlist"},onRowDeleted:{type:"event",options:widgetEventOptions,widget:"eventlist"},onEnterkeypress:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSetrecord:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.fileupload":{multiple:{type:"boolean",value:!1},contenttype:{type:"list",options:["all","audio","image","video"],value:"all"},fileuploadtitle:{type:"string",value:"Drop your files here to start uploading."},fileuploadmessage:{type:"string",value:"You can also browse for files"},tabindex:{type:"string"},filename:{type:"string",bindable:"in-out-bound"},filepath:{type:"string",bindable:"in-out-bound"},destination:{type:"string",widget:"fileupload-relativepath",bindable:"in-out-bound"},onSelect:{type:"event",options:widgetEventOptions,widget:"eventlist"},onProgress:{type:"event",options:widgetEventOptions,widget:"eventlist"},onAbort:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.youtube":{width:{value:"800px"},height:{value:"125px"},uploadpath:{type:"string"}},"wm.anchor":{caption:{type:"string",value:"Link",bindable:"in-out-bound"},hyperlink:{type:"string",bindable:"in-out-bound"},hint:{type:"string",value:"",bindable:"in-out-bound"},target:{type:"list",options:["_blank","_parent","_self","_top"],value:"_self",widget:"typeaheadlist"},tabindex:{type:"string"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size"},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textalign:{type:"string",options:["left","center","right"],hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},whitespace:{type:"list",options:[" ","normal","nowrap","pre","pre-line","pre-wrap"],value:" "},wordbreak:{type:"list",options:["break-word","normal"]},misc:{type:"string"},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline"}},"wm.prefabs":{margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},width:{type:"string"},height:{type:"string"}},"wm.accordion":{closeothers:{type:"boolean",value:!0},height:{type:"string"},width:{type:"string"},tabindex:{type:"string"}},"wm.accordionpane":{onExpand:{type:"event",options:widgetEventOptions,widget:"eventlist"},onCollapse:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.accordionheader":{heading:{type:"string",value:"Heading",bindable:"in-bound"},description:{type:"string"},paneicon:{type:"string",bindable:"in-bound"},tabindex:{type:"string"},isdefaultpane:{type:"boolean",bindable:"in-bound"}},"wm.richtexteditor":{show:{type:"boolean",value:!0},readonly:{type:"boolean"},datavalue:{type:"string",value:"",bindable:"in-out-bound"},showpreview:{type:"boolean",value:!1},placeholder:{type:"string"},tabindex:{type:"string"}},"wm.tabs":{vertical:{type:"boolean"}},"wm.tab":{heading:{type:"string",bindable:"in-bound"}},"wm.tabpane":{onSelect:{type:"event",options:widgetEventOptions,widget:"eventlist"},onDeselect:{type:"event",options:widgetEventOptions,widget:"eventlist"},disabled:{type:"boolean",bindable:"in-bound"}},"wm.tabheader":{heading:{type:"string",value:"Tab Title",bindable:"in-bound"},paneicon:{type:"string",bindable:"in-bound"},isdefaulttab:{type:"boolean",bindable:"in-bound"},tabindex:{type:"string"}},"wm.livelist":{pagesize:{type:"number"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},scopedataset:{type:"string"},showheader:{type:"boolean"},showrecordcount:{type:"boolean",value:!1,show:!1},shownavigation:{type:"boolean",value:!1},itemsperrow:{type:"list",options:["1","2","3","4","6","12"],value:"1"},selecteditem:{type:"object",bindable:"in-out-bound",show:!1,widget:"string"},onEnterkeypress:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSetrecord:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.livefilter":{dataset:{type:"array, object",bindable:"in-bound",widget:"string"},scopedataset:{type:"string"},editfilters:{type:"button",hidelabel:!0},result:{type:"object",bindable:"out-bound",widget:"string",show:"false"}},"wm.search":{scopedatavalue:{type:"string"},datavalue:{type:"string",bindable:"in-out-bound"},scopedataset:{type:"string"},displaylabel:{type:"string"},displayimagesrc:{type:"string"},dataset:{type:"array",bindable:"in-bound",widget:"string"},limit:{type:"number",value:5},searchkey:{type:"string"},placeholder:{type:"string",value:"Search"},onSubmit:{type:"event",options:widgetEventOptions,widget:"eventlist"},show:{type:"boolean",value:!0,bindable:"in-out-bound"},tabindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}},"wm.chart":{height:{type:"string",value:"210px"},width:{type:"string"},type:{type:"list",options:["Column","Line","Area","Cumulative Line","Bar","Pie","Donut"]},scopedataset:{type:"string"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},xaxisdatakey:{type:"list",widget:"list"},xaxislabel:{type:"string"},xnumberformat:{type:"list",options:["Decimal Digits","Precision","Exponential","Percentage","Round","Round Percentage","Round to Thousand","Round to Million","Round to Billion"]},xdigits:{type:"number",value:1},xdateformat:{type:"list",options:["%a","%A","%b","%B","%c","%d","%e","%H","%I","%j","%L","%m","%M","%p","%S","%U","%w","%W","%x","%X","%y","%Y","%Z","%%"],value:"%x"},yaxisdatakey:{type:"list",widget:"multiselect"},yaxislabel:{type:"string"},ynumberformat:{type:"list",options:["Decimal Digits","Precision","Exponential","Percentage","Round","Round Percentage","Round to Thousand","Round to Million","Round to Billion"]},ydigits:{type:"number",value:1},ydateformat:{type:"list",options:["%a","%A","%b","%B","%c","%d","%e","%H","%I","%j","%L","%m","%M","%p","%S","%U","%w","%W","%x","%X","%y","%Y","%Z","%%"],value:"%x"},show:{type:"boolean",value:!0,bindable:"in-out-bound"},tooltips:{type:"boolean",value:!0},showlegend:{type:"boolean",value:!0},legendposition:{type:"list",options:["Top","Bottom"],value:"Top"},showvalues:{type:"boolean",value:!1},showlabels:{type:"boolean",value:!0},showcontrols:{type:"boolean",value:!1},useinteractiveguideline:{type:"boolean",value:!1},staggerlabels:{type:"boolean",value:!1},reducexticks:{type:"boolean",value:!0},labeltype:{type:"list",options:["key","value","percent"],value:"percent"},offset:{type:"string",widget:"box"},offsettop:{type:"number",value:25},offsetbottom:{type:"number",value:45},offsetleft:{type:"number",value:75},offsetright:{type:"number",value:25},barspacing:{type:"number",value:.1,min:"0.1",max:"0.9",step:"0.1"},donutratio:{type:"number",value:.5,min:"0.1",max:"1",step:"0.1"},showlabelsoutside:{type:"boolean",value:!0},xaxislabeldistance:{type:"number",value:12},yaxislabeldistance:{type:"number",value:12},aggregation:{type:"list",options:["average","count","maximum","minimum","none","sum"],value:"none"},aggregationcolumn:{type:"list",widget:"list"},groupby:{type:"list",widget:"multiselect"},orderby:{type:"list",widget:"order-by"},theme:{type:"list",options:["Terrestrial","Annabelle","Azure","Retro","Mellow","Orient","GrayScale","Flyer"],value:"Terrestrial"},border:{type:"string",widget:"box"},borderunit:{type:"string",options:["em","px"],value:"px",widget:"radio"},bordertop:{type:"string"},borderright:{type:"string"},borderbottom:{type:"string"},borderleft:{type:"string"},borderwidth:{type:"string"},borderstyle:{type:"string",options:["dashed","dotted","none","solid"],widget:"borderstyle"},bordercolor:{type:"string",widget:"color"},padding:{type:"string",widget:"box"},paddingunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},paddingtop:{type:"string"},paddingright:{type:"string"},paddingbottom:{type:"string"},paddingleft:{type:"string"},margin:{type:"string",widget:"box"},marginunit:{type:"string",options:["%","em","px"],value:"px",widget:"radio"},margintop:{type:"string"},marginbottom:{type:"string"},marginright:{type:"string"},marginleft:{type:"string"},backgroundcolor:{type:"string",widget:"color"},backgroundimage:{type:"string",bindable:"in-bound"},color:{type:"string",hidelabel:!0,widget:"color"},fontweight:{type:"string",options:["bold"],hidelabel:!0,widget:"checkbox"},fontsize:{type:"number",hidelabel:!0,hint:"Font size",value:12},fontunit:{type:"string",options:["em","px"],value:"px",hidelabel:!0,widget:"radio"},textdecoration:{type:"string",options:["underline"],hidelabel:!0,widget:"checkbox"},fontstyle:{type:"string",options:["italic"],hidelabel:!0,widget:"checkbox"},fontfamily:{type:"string",hidelabel:!0,hint:"Arial, Geneva"},opacity:{type:"string",widget:"slider"},cursor:{type:"list",options:["crosshair","default","e-resize","help","move","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","se-resize","sw-resize","text","wait","w-resize"]},zindex:{type:"string"},onTransform:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.datanavigator":{show:{type:"boolean",value:!0,bindable:"in-bound"},dataset:{type:"array, object",bindable:"in-bound",widget:"string"},showrecordcount:{type:"boolean",value:!1},horizontalalign:{type:"string",options:["left","center","right"],value:"right",widget:"radio"},result:{type:"object",bindable:"out-bound",widget:"string",show:"false"},verticalalign:{type:"string",options:["bottom","middle","top"],value:"middle",widget:"radio"},onEnterKeyPress:{type:"event",options:widgetEventOptions,widget:"eventlist"},onSetrecord:{type:"event",options:widgetEventOptions,widget:"eventlist"}},"wm.login":{show:{type:"boolean",value:!0,bindable:"in-bound"},errormessage:{type:"string"}},"wm.pagecontainer":{content:{type:"list",options:[],widget:"pages-list",value:""}},"wm.video":{hint:{type:"string",value:"",bindable:"in-out-bound"},mp4format:{type:"string",value:"",bindable:"in-out-bound"},oggformat:{type:"string",value:"",bindable:"in-out-bound"},webmformat:{type:"string",value:"",bindable:"in-out-bound"},subtitlelang:{type:"string",value:"en",bindable:"in-out-bound"},subtitlesource:{type:"string",value:"",bindable:"in-out-bound"},videoposter:{type:"string",value:"resources/images/imagelists/default-image.png",bindable:"in-out-bound"},controls:{type:"boolean"},videosupportmessage:{type:"string",value:"Your browser does not support the video tag."},autoplay:{type:"boolean"},loop:{type:"boolean"},muted:{type:"boolean"},videopreload:{type:"list",options:["none","metadata","auto"],value:"none"},tabindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}},"wm.audio":{hint:{type:"string",value:"",bindable:"in-out-bound"},mp3format:{type:"string",value:"",bindable:"in-out-bound"},controls:{type:"boolean"},audiosupportmessage:{type:"string",value:"Your browser does not support the audio tag."},autoplay:{type:"boolean"},loop:{type:"boolean"},muted:{type:"boolean",value:!1},audiopreload:{type:"list",options:["none","metadata","auto"],value:"none"},tabindex:{type:"string"},showindevice:{type:"selectall",options:"all, xs, sm, md, lg",value:"all",displaytype:"inline-block"}}},propertyGroups:[{name:"properties",parent:"",show:!0},{name:"styles",parent:"",show:!0},{name:"events",parent:"",show:!0},{name:"mobile",parent:"",show:!0},{name:"security",parent:"",show:!0},{properties:["name","type","heading","description","placeholder","currency","paneicon","hint","caption","tabindex","target","title","message","oktext","canceltext","servicevariabletotrack","alerttype","iframesrc"],parent:"properties"},{name:"layout",properties:["width","height","pictureaspect","layoutkind","layout","itemsperrow","showheader","offset"],parent:"properties"},{name:"image",properties:["image","imagewidth","imageheight"],parent:"properties"},{name:"video",properties:["videoposter","mp4format","oggformat","webmformat","controls","videopreload","videosupportmessage","subtitlesource","subtitlelang"],parent:"properties"},{name:"audio",properties:["mp3format","audiopreload","controls","audiosupportmessage"],parent:"properties"},{name:"content",properties:["content","url"],parent:"properties"},{name:"display",properties:["picturesource","modal","vertical","fileuploadtitle","fileuploadmessage"],parent:"properties"},{name:"values",properties:["scopedatavalue","datavalue","selectedvalue","selectedvalues","discretevalues","integervalues","minimum","maximum","step","defaultvalue","defaultcolor","hyperlink","checkedvalue"],parent:"properties"},{name:"valuedisplay",properties:["places","datepattern","ismeridian","hourstep","minutestep","displaylabel","displayimagesrc","limit"],parent:"properties"},{name:"dataset",properties:["operation","scopedataset","dataset","formdata","options","formfield","editcolumn","editfields","editfilters","method","action","searchkey","usekeys","datafield","displayfield","displayexpression","aggregation","aggregationcolumn","groupby","orderby","orderbycolumn"],parent:"properties"},{name:"xaxis",properties:["xaxisdatakey","xaxislabel","xnumberformat","xdigits","xdateformat","xaxislabeldistance"],parent:"properties"},{name:"yaxis",properties:["yaxisdatakey","yaxislabel","ynumberformat","ydigits","ydateformat","yaxislabeldistance"],parent:"properties"},{name:"validation",properties:["required","regexp","minvalue","maxvalue","mindate","maxdate","novalidate","maxchars"],parent:"properties"},{name:"help",properties:["helptext"],parent:"properties"},{name:"behavior",properties:["radiogroup","viewgroup","startchecked","autofocus","readonly","ignoreparentreadonly","multiple","show","disabled","pagesize","dynamicslider","selectionclick","closeothers","lock","freeze","autoscroll","closable","destroyable","showDirtyFlag","casesensitivesort","link","uploadpath","contenttype","destination","isdefaulttab","isdefaultpane","autocomplete","showpreview","updatemode","errormessage","tooltips","showlegend","showvalues","showlabels","showcontrols","useinteractiveguideline","staggerlabels","reducexticks","barspacing","labeltype","autoplay","loop","muted","donutratio","showlabelsoutside","legendposition"],parent:"properties"},{name:"datagrid",properties:["insertrow","deleterow","updaterow","confirmdelete","nodatamessage","shownavigation","showrecordcount","gridsearch","gridnoheader","gridfirstrowselect"],parent:"properties"},{name:"caption",properties:["captionalign","captionposition","captionsize","mineditorwidth"],parent:"properties"},{name:"graphics",properties:["iconname","imagelist","imageindex","iconurl","iconwidth","iconheight","iconmargin"],parent:"properties"},{name:"format",properties:["showtooltip","horizontalalign","verticalalign","rows","columns","columnwidth"],parent:"properties"},{name:"selection",properties:["selectionmode"],parent:"properties"},{name:"popup",properties:["popupcontent","ispopuptext","popupplacement","popupidentifier","popuparrow","popupautoclose"],parent:"properties"},{name:"operations",properties:["submitbutton","resetbutton"],parent:"properties"},{properties:["class","theme"],parent:"styles"},{name:"textstyle",properties:["fontsize","fontunit","fontfamily","color","fontweight","fontstyle","textdecoration","textalign","whitespace"],parent:"styles"},{name:"backgroundstyle",properties:["backgroundcolor","backgroundimage","backgroundrepeat","backgroundposition","backgroundattachment"],parent:"styles"},{name:"border",properties:["bordercolor","borderstyle","border","borderunit"],parent:"styles"},{name:"displaystyle",properties:["padding","paddingunit","margin","marginunit","opacity","cursor","zindex"],parent:"styles"},{name:"events",properties:["onChange","onClick","onDblclick","onMousedown","onMouseup","onMouseover","onMouseout","onMousemove","onMouseenter","onMouseleave","onKeydown","onKeypress","onKeyup","onFocus","onBlur","onShow","onHide","onSuccess","onError","onOk","onSubmit","onCancel","onClose","onExpand","onCollapse","onSelect","onDeselect","onProgress","onTransform","onAbort","onSort","onGridButtonClick","onRenderData","onRowrender","onCellRightClick","onHeaderClick","onRowDeleted","onResult","onBeforeservicecall","onEnterkeypress","onSetrecord","onSwipeup","onSwipedown","onSwipeleft","onSwiperight","onPinchin","onPinchout"],parent:"events"},{name:"security",properties:["accessroles"],parent:"security"},{name:"devicesize",properties:["showindevice"],parent:"mobile"}]},properties=result.properties,propertyGroups=result.propertyGroups;
return{getPropertiesOf:getPropertiesOf,getPropertyGroups:getPropertyGroups,getRoles:getRoles,setRoles:setRoles}}],base.directives.compile=function($compile){"use strict";return function(scope,element,attrs){var unbindWatcher=scope.$watch(function(scope){return scope.$eval(attrs.compile)},function(value){var clone=value?value.clone():value;element.html(clone),$compile(element.contents())(element.scope()),unbindWatcher()})}},base.directives.pageContainer=["PropertiesFactory","CONSTANTS","Utils","$compile","$rootScope","$routeParams","Variables",function(PropertiesFactory,CONSTANTS,Utils,$compile,$rootScope,$routeParams,Variables){"use strict";function loadVariables(pageName){Variables.getPageVariables(pageName,function(variables){Variables.register(pageName,variables,!0)})}function evtHandler(e){e.stopPropagation(),e.preventDefault()}function bindEvtHandler(element){element.on("drop",evtHandler)}function unbindEvtHandler(element){element.off("drop",evtHandler)}function onPageIncludeChange(scope,element,attrs,newVal){var pageUrl,addToolBar,_scope,handler,target=scope.target,el="",page="pages/"+newVal+"/"+newVal,className="app-included-page";target||(scope.target=target=attrs.hasOwnProperty("pageContainerTarget")?element:element.find("[page-container-target]").eq(0)),CONSTANTS.isStudioMode&&target.find("div[data-ng-include], .wm-included-page-heading").remove(),newVal&&newVal.trim().length>0?(CONSTANTS.isStudioMode&&(bindEvtHandler(element),page="../services/projects/"+$routeParams.project_name+"/web/"+page,addToolBar=attrs.hasOwnProperty("widgetid")),pageUrl=Utils.preventCachingOf(page+".html"),Utils.loadScripts([page+".js"],function(){loadVariables(newVal),addToolBar&&(el='<button class="wm-included-page-heading button-primary" data-ng-click=openWorkspace("'+newVal+'"); title="edit '+newVal+'"><i class="wm-icon edit"></i></button>'),el=el+'<div class="'+className+'" data-ng-include="\''+pageUrl+"'\"></div>",_scope=element.scope(),target.html($compile(el)(_scope)),CONSTANTS.isRunMode?handler=_scope.$on("$includeContentLoaded",function(evt){evt.stopPropagation(),Utils.triggerFn(_scope.onPagePartLoad),handler()}):(scope.toolbar=target.find("button.wm-included-page-heading").first(),$rootScope.$safeApply(scope))})):CONSTANTS.isStudioMode&&("wm-top-nav"===scope.widgettype&&$rootScope.$emit("canvas-add-widget",{widgetType:"wm-list",parentName:scope.name},!0),unbindEvtHandler(element))}function propertyChangeHandler(scope,element,attrs,key,newVal){switch(key){case"content":onPageIncludeChange(scope,element,attrs,newVal);break;case"active":if(!CONSTANTS.isStudioMode||!scope.toolbar)return;newVal?scope.toolbar.addClass("active"):scope.toolbar.removeClass("active")}}var props=PropertiesFactory.getPropertiesOf("wm.pagecontainer"),notifyFor={content:!0,active:!0};return{priority:"1000",compile:function(){return{pre:function(scope,element,attrs){WM.extend(scope.widgetProps||{},WM.copy(props)),scope["page-container"]=!0,CONSTANTS.isRunMode&&(attrs.page||attrs.content)&&Utils.triggerFn(element.scope().registerPagePart)},post:function(scope,element,attrs){CONSTANTS.isStudioMode&&"wm-pagedialog"===scope.widgettype&&(scope.widgetProps.content.widget="pagedialog-pages-list");var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.hasOwnProperty("page")&&!scope.content&&(scope.content=scope.page),scope.$on("$destroy",function(){Variables.unload(element.attr("content"))})}}}}}],base.directives.ngController=function(Widgets,Variables){"use strict";return{restrict:"A",compile:function(){return{pre:function(scope){scope.ctrlScope=scope,scope.$root.Widgets=Widgets,scope.$root.Variables=Variables,scope.Widgets=Widgets,scope.Variables=Variables}}}}},base.directives.onFileChange=[function(){"use strict";return{link:function(scope,element,attrs){element[0].onchange=function(){scope[attrs.onFileChange](element[0])}}}}],base.directives.wmtransclude=function(){"use strict";return{restrict:"A",link:function(scope,element,attrs,nullCtrl,transcludeFn){scope.widgetid&&element.attr("data-droptarget-for",scope.widgettype),transcludeFn(element.scope(),function(clone){element.append(clone)})}}},base.directives.accessroles=function(CONSTANTS,$rootScope,$compile){"use strict";var directive={};return CONSTANTS.isRunMode&&$rootScope.isSecurityEnabled&&(directive={restrict:"A",priority:1e4,terminal:!0,compile:function(){return{pre:function(scope,element,attrs){var clonedElement,userRoles=$rootScope.userRoles||[],widgetRoles=attrs.accessroles?attrs.accessroles.split(","):[],matchRoles=function(arr1,arr2){return arr1.some(function(item){return-1!==arr2.indexOf(item)})};widgetRoles.length&&-1===widgetRoles.indexOf("Everyone")&&!matchRoles(widgetRoles,userRoles)?element.remove():(clonedElement=$compile(element.clone().removeAttr("accessroles"))(scope),element.replaceWith(clonedElement))}}}}),directive},base.directives.initWidget=["$rootScope","WidgetUtilService","DialogService","Utils","CONSTANTS","$parse","$timeout",function($rootScope,WidgetUtilService,DialogService,Utils,CONSTANTS,$parse,$timeout){"use strict";function isBooleanAttr(key){return"readonly"===key||"autofocus"===key||"disabled"===key||"startchecked"===key||"multiple"===key||"selected"===key||"required"===key||"controls"===key||"autoplay"===key||"loop"===key||"muted"===key}function PropertyManager(){var handlers={change:[]};this.ACTIONS={CHANGE:"change"},this.add=function(action,handler){handlers[action].push(handler)},this.get=function(action){return handlers[action]}}function handleAppCustomEvent(iScope,element,$evt,customEvtName){return Utils.stringEndsWith(customEvtName,".show")?(element.is("a")&&$evt.preventDefault(),void DialogService.showDialog(customEvtName.substr(0,customEvtName.indexOf(".")))):Utils.stringEndsWith(customEvtName,".hide")?(element.is("a")&&$evt.preventDefault(),void DialogService.hideDialog(customEvtName.substr(0,customEvtName.indexOf(".")))):iScope.hasOwnProperty("hyperlink")&&Utils.stringStartsWith(customEvtName,"goToPage-")?void(iScope.hyperlink="#/"+customEvtName.substr(9)):void $rootScope.$emit("invoke-service",customEvtName)}function overrideEventHandlers(iScope,scope,element,attrs){var overrideFlg,getParentMethod,fn,events=["onSwipeup","onSwipedown","onSwipeleft","onSwiperight","onPinchin","onPinchout","onClick","onDblclick","onChange","onMouseenter","onMouseleave","onFocus","onBlur","onSubmit","onClose"];events.forEach(function(evt){overrideFlg=!1,attrs[evt]&&(fn=attrs[evt].split(";").map(function(fnName){var trimmedFnName=fnName.trim();return trimmedFnName.length&&-1===fnName.indexOf("(")&&-1===fnName.indexOf("=")?(overrideFlg=!0,'$root._handleAppCustomEvent(this, thisElement, $event, "'+trimmedFnName+'")'):trimmedFnName}).join(";"),overrideFlg&&(getParentMethod=$parse(fn),iScope[evt]=function(locals){return locals.thisElement=element,getParentMethod(scope,locals)}))})}function createVariableWatch(watchExpr){dereigsterFnsOfVariableWatchers[watchExpr]=$rootScope.$watch(watchExpr,function(newVal){firedVariableWatchers[watchExpr]=newVal,listenersOnVariables[watchExpr].forEach(function(callback){Utils.triggerFn(callback,newVal)})},!0)}function registerVariableWatch(watchExpr){dereigsterFnsOfVariableWatchers[watchExpr]||$timeout(function(){createVariableWatch(watchExpr)},void 0,!0)}function bindToVariable(watchExpr,callback){var watchExists=WM.isDefined(listenersOnVariables[watchExpr]);return watchExists?firedVariableWatchers.hasOwnProperty(watchExpr)&&callback(firedVariableWatchers[watchExpr]):(listenersOnVariables[watchExpr]=[],registerVariableWatch(watchExpr)),listenersOnVariables[watchExpr].push(callback),function(){var index,arr=listenersOnVariables[watchExpr];arr&&(index=arr.indexOf(callback),arr.splice(index,1),arr.length||(Utils.triggerFn(dereigsterFnsOfVariableWatchers[watchExpr]),delete listenersOnVariables[watchExpr],delete dereigsterFnsOfVariableWatchers[watchExpr],delete firedVariableWatchers[watchExpr]))}}function onWatchExprValueChange(iScope,key,watchExpr,newVal){iScope[key]=WM.isDefined(newVal)&&null!==newVal&&""!==newVal?newVal:CONSTANTS.isStudioMode?watchExpr:""}function binddatavalue_setter(iScope,scope,ws,key,bindKey,val){var watchExpr,listenerFn,fn=iScope._watchers[key];ws[bindKey]!==val&&(ws[bindKey]=val,Utils.triggerFn(fn),Utils.stringStartsWith(val,"bind:")?(watchExpr=val.replace("bind:",""),listenerFn=onWatchExprValueChange.bind(void 0,iScope,key,watchExpr),iScope._watchers[key]=Utils.stringStartsWith(watchExpr,"Variables")?bindToVariable(watchExpr,listenerFn):scope.$watch(watchExpr,listenerFn,!0)):iScope[key]="")}function datavalue_setter(iScope,element,attrs,bindKey,val){var temp,modifiedVal=val;return Utils.stringStartsWith(val,"bind:")?void(iScope[bindKey]=val):(element.is("select")&&attrs.multiple?modifiedVal=val.split(",").map(function(opt){return(""+opt).trim()}):element.is('input[type="number"]')||element.is(".app-currency")?(temp=+val,isNaN(temp)&&(temp=0),modifiedVal=temp):element.is('input[type="checkbox"]')&&(iScope.checkedvalue||(modifiedVal="true"===val||val===!0)),iScope._model_=modifiedVal,void Utils.triggerFn(iScope._onChange))}function bindproperty_setter(iScope,scope,ws,key,bindKey,val){var watchExpr,listenerFn,fn=iScope._watchers[key];ws[bindKey]!==val&&(ws[bindKey]=val,Utils.triggerFn(fn),val?Utils.stringStartsWith(val,"bind:")&&(watchExpr=val.replace("bind:",""),listenerFn=onWatchExprValueChange.bind(void 0,iScope,key,watchExpr),iScope._watchers[key]=Utils.stringStartsWith(watchExpr,"Variables")?bindToVariable(watchExpr,listenerFn):scope.$watch(watchExpr,listenerFn,!0)):iScope[key]="show"===key?!0:"")}function property_setter(iScope,element,attrs,props,ws,key,bindKey,newVal){var oldVal=ws[key];return WM.isString(newVal)&&Utils.stringStartsWith(newVal,"bind:")?void(iScope[bindKey]=newVal):("boolean"===props.type?newVal=isBooleanAttr(key)?newVal===key||newVal===!0||"true"===newVal:newVal===!0||"true"===newVal:"number"===props.type&&(newVal=+newVal),void((newVal!==oldVal||WM.isObject(newVal)&&WM.isObject(oldVal))&&("name"===key&&$rootScope.$emit("name-change",element.attr("widgetid"),newVal,oldVal,iScope),ws[key]=newVal,WidgetUtilService.onScopeValueChangeProxy(iScope,element,attrs,key,newVal,oldVal))))}function processEventAttr(iScope,attrs,attrName){var evtName=attrName.substring("3"),onEvtName="on"+evtName.charAt(0).toUpperCase()+evtName.substring(1),fnNamesKey=evtName+"FnNames";iScope[fnNamesKey]=[],attrs[onEvtName].split(";").forEach(function(token){if(token=token.trim(),token.length){var index=token.indexOf("(");index>=0&&(token=token.substring(0,token.indexOf("("))),iScope[fnNamesKey].push(token)}})}function watchProperty(iScope,attrs,attrName,propValue){"{"===propValue.charAt(0)&&"{"===propValue.charAt(1)&&attrs.$observe(attrName,function(newValue){iScope[attrName]=newValue})}function processAttr(iScope,scope,attrs,widgetProps,attrName,attrValue){var propValue=attrValue;widgetProps.hasOwnProperty(attrName)?"class"===attrName?iScope._initState[attrName]=propValue:scope.prefabname&&Utils.stringStartsWith(propValue,"resources/")?(propValue=CONSTANTS.isRunMode?"./app/prefabs/"+scope.prefabname+"/"+propValue:"../services/prefabs/"+scope.prefabid+"/files/webapp/"+propValue,iScope._initState[attrName]=propValue):(iScope._initState[attrName]=attrs[attrName],watchProperty(iScope,attrs,attrName,propValue)):(iScope[attrName]=attrs[attrName],watchProperty(iScope,attrs,attrName,propValue))}function processAttrs(iScope,scope,tElement,attrs){var widgetProps=iScope.widgetProps;sliceFn.call(tElement.context.attributes).forEach(function(attr){var attrName=attr.name,attrValue=attr.value.trim();0===attrName.indexOf("on-")&&attrs.widgetid?processEventAttr(iScope,attrs,attrName):attrs.hasOwnProperty(attrName)&&!iScope.$$isolateBindings[attrName]&&processAttr(iScope,scope,attrs,widgetProps,attrName,attrValue)})}function deregisterWatchersOniScope(iScope){Object.keys(iScope._watchers).forEach(function(key){Utils.triggerFn(iScope._watchers[key])})}var listenersOnVariables={},dereigsterFnsOfVariableWatchers={},firedVariableWatchers={},sliceFn=Array.prototype.slice;return CONSTANTS.isRunMode&&($rootScope._handleAppCustomEvent=handleAppCustomEvent),{restrict:"A",compile:function(tElement){return{pre:function(tScope,element,attrs){var hasDataValue,datavalue_value,ws,iScope=element.isolateScope(),hasModel=attrs.hasOwnProperty("hasModel"),scope=element.scope();iScope&&iScope.widgetProps&&(iScope.propertyManager=new PropertyManager,ws=iScope._widgetState={},iScope._watchers={},iScope.$on("$destroy",deregisterWatchersOniScope.bind(void 0,iScope)),iScope._initState={},hasModel&&!attrs.widgetid&&attrs.$observe("scopedatavalue",function(newValue){WidgetUtilService.injectModelUpdater(element,newValue)}),CONSTANTS.isStudioMode&&WM.extend(iScope.widgetProps,{active:{}}),Object.keys(iScope.widgetProps).forEach(function(key){if(!iScope.$$isolateBindings[key]){var bindKey="bind"+key,props=iScope.widgetProps[key];if(hasModel&&"datavalue"===key)return Object.defineProperty(iScope,bindKey,{get:function(){return ws[bindKey]},set:binddatavalue_setter.bind(void 0,iScope,scope,ws,key,bindKey)}),void Object.defineProperty(iScope,key,{get:function(){return iScope._model_},set:datavalue_setter.bind(void 0,iScope,element,attrs,bindKey)});("in-bound"===props.bindable||"in-out-bound"===props.bindable)&&Object.defineProperty(iScope,bindKey,{get:function(){return ws[bindKey]},set:bindproperty_setter.bind(void 0,iScope,scope,ws,key,bindKey)}),Object.defineProperty(iScope,key,{get:function(){return ws[key]},set:property_setter.bind(void 0,iScope,element,attrs,props,ws,key,bindKey)}),"boolean"===props.type?WM.isDefined(props.value)&&(iScope._initState[key]=props.value):props.value&&(iScope._initState[key]=props.value)}}),processAttrs(iScope,scope,tElement,attrs),iScope._initState.hasOwnProperty("datavalue")&&(hasDataValue=!0,datavalue_value=iScope._initState.datavalue,delete iScope._initState.datavalue),Object.keys(iScope._initState).forEach(function(key){var value=iScope._initState[key];iScope[key]=value}),hasDataValue&&(iScope.datavalue=datavalue_value),CONSTANTS.isRunMode&&overrideEventHandlers(iScope,scope,element,attrs))}}}}}],base.services.WidgetUtilService=["$filter","$parse","$rootScope","CONSTANTS","WIDGET_CONSTANTS","Utils",function($filter,$parse,$rootScope,CONSTANTS,WIDGET_CONSTANTS,Utils){"use strict";function cleanupMarkup(element){var attrsToBeRemoved="data-ng-style data-ng-change data-ng-click data-ng-dblclick data-ng-mouseout data-ng-mouseover data-ng-blur data-ng-focus data-ng-show data-ng-hide data-ng-readonly data-ng-disabled data-ng-required data-ng-attr-placeholder ng-attr-name on-change on-focus on-blur on-click on-dblclick on-mouseover on-mouseout";element.find("*").removeAttr(attrsToBeRemoved),element.removeAttr(attrsToBeRemoved)}function onScopeValueChangeProxy(scope,element,attrs,key,newVal,oldVal){if("placeholder"===key||"type"===key)element.is("input")||element.is("textarea")?attrs.$set(key,newVal):element.find("input").attr(key,newVal);else if("backgroundimage"===key)scope.picturesource=Utils.getBackGroundImageUrl(newVal);else if("backgroundcolor"===key)scope.picturesource||(scope.picturesource="none");else if("class"===key)element.removeClass(oldVal).addClass(newVal);else if("name"===key)attrs.$set("name",newVal);else if("showindevice"===key){var newValues=newVal?newVal.split(","):newVal,oldValues=oldVal?oldVal.split(","):oldVal,allOldIndex=WM.element.inArray("all",oldValues),allNewIndex=WM.element.inArray("all",newValues);if(WM.isArray(newValues)?allOldIndex>=0?(allNewIndex>=0&&newValues.length>1&&newValues.splice(allNewIndex,1),scope.showindevice=newValues.join()):scope.showindevice=allNewIndex>=0?"all":newValues.join():scope.showindevice="all",CONSTANTS.isRunMode)if(0===WM.element.inArray("all",newValues)){var tobeRemovedClasses=deviceSizeArray.all.classToRemove.reduce(function(str,device){return str+" "+(device+scope.widgetProps.showindevice.displaytype||"block")},"");element.removeClass(tobeRemovedClasses)}else{var tobeAddedClasses=newValues.forEach.reduce(function(str,value){return str+" "+deviceSizeArray[value].class+(scope.widgetProps.showindevice.displaytype||"block")},"");element.addClass(tobeAddedClasses)}}var triggerFn=Utils.triggerFn;scope.propertyManager.get(scope.propertyManager.ACTIONS.CHANGE).forEach(function(handler){var notifyFor=handler.notifyFor;(notifyFor&&notifyFor[key]||!notifyFor)&&triggerFn(handler,key,newVal,oldVal)})}function postWidgetCreate(scope,element,attrs){function triggerInitValueChange(){Object.keys(scope._initState).forEach(function(key){var value=scope[key];WM.isDefined(value)&&onScopeValueChangeProxy(scope,element,attrs,key,value)}),Utils.triggerFn(scope.onReady,scope,element,attrs)}cleanupMarkup(element),scope&&scope._initState&&triggerInitValueChange()}function findCtrlScope(scope){if(!scope.ctrlScope&&scope.$id!==$rootScope.$id){var tScope=scope;do if(tScope=tScope.$parent,tScope.ctrlScope){scope.ctrlScope=tScope.ctrlScope;break}while(tScope.$id!==$rootScope.$id)}}function injectModelUpdater(element,model){function updateModel(){if(element.attr("datepicker-popup")||element.hasClass("app-timeinput")){var datePrimitive=new Date(isolateScope._model_).valueOf();isolateScope._model_=isNaN(datePrimitive)?void 0:datePrimitive}if(element.hasClass("app-calendar")){var formattedDate=new Date(isolateScope._model_);isolateScope._model_=$filter("date")(formattedDate,isolateScope.datepattern)}_model&&ctrlScope&&_model.assign(ctrlScope,isolateScope._model_)}var _model,dotIdx,braceIdx,idx,name,isolateScope=element.isolateScope(),ctrlScope=element.scope();model&&(_model=$parse(model)),ctrlScope.ctrlScope||findCtrlScope(ctrlScope),ctrlScope.ctrlScope&&(model&&(dotIdx=model.indexOf("."),braceIdx=model.indexOf("["),-1===dotIdx&&-1===braceIdx?ctrlScope=ctrlScope.ctrlScope:(idx=-1===braceIdx?dotIdx:-1===dotIdx?braceIdx:Math.min(dotIdx,braceIdx),idx>0&&(name=model.substring(0,idx),WM.isDefined(ctrlScope.ctrlScope[name])||(ctrlScope.ctrlScope[name]={}),WM.isUndefined(ctrlScope[name])&&Object.defineProperty(ctrlScope,name,{get:function(){return ctrlScope.ctrlScope[name]}})))),isolateScope._onChange=function($event){updateModel(),isolateScope.onChange&&isolateScope.onChange({$event:$event,$scope:isolateScope})},model&&ctrlScope&&isolateScope.$on("$destroy",ctrlScope.$watch(model,function(newVal){isolateScope._model_!==newVal&&(isolateScope._model_=newVal)},!0)))}function getUnits(value){var percentPattern=/^[0-9]*%$|^[0-9]*\.[0-9]+%$/,pixelPattern=/^[0-9]*px$|^[0-9]*$|^[0-9]*\.[0-9]+px$|^[0-9]*\.[0-9]*$/,emPattern=/^[0-9]*em$|^[0-9]*\.[0-9]+em$/,result=UNITS.NOT_SUPPORTED_UNIT;return pixelPattern.test(value)?result=UNITS.PIXEL:percentPattern.test(value)?result=UNITS.PERCENT:emPattern.test(value)&&(result=UNITS.EM),result}function convertEmToPixel(value,parent){var fontSize=parent.css("font-size")||WM.element("body").css("font-size"),result=0;return value>0&&(result=parseInt(fontSize,10)*value),result}function convertPixelToEm(value,parent){var fontSize=parent.css("font-size")||WM.element("body").css("font-size");return value/parseInt(fontSize,10)}function getAdjustedValue(border,padding,widthUnit,parent){var result=0,leftBorder=parseInt(border.left,10),isLeftBorderNumber=!isNaN(leftBorder),rightBorder=parseInt(border.right,10),isRightBorderNumber=!isNaN(rightBorder),leftPadding=parseInt(padding.left,10),isLeftPaddingNumber=!isNaN(leftPadding),rightPadding=parseInt(padding.right,10),isRightPaddingNumber=!isNaN(rightPadding);return widthUnit!==UNITS.PERCENT&&(void 0!==border.style&&""!==border.style&&"none"!==border.style&&(widthUnit===border.unit?result=result+(isLeftBorderNumber?leftBorder:0)+(isRightBorderNumber?rightBorder:0):border.unit===UNITS.EM?result=result+convertEmToPixel(isLeftBorderNumber?leftBorder:0,parent)+convertEmToPixel(isRightBorderNumber?rightBorder:0,parent):widthUnit===UNITS.EM&&(result=result+convertPixelToEm(isLeftBorderNumber?leftBorder:0,parent)+convertPixelToEm(isRightBorderNumber?rightBorder:0,parent))),(leftPadding>0||rightPadding>0)&&(widthUnit===padding.unit?result=result+(isLeftPaddingNumber?leftPadding:0)+(isRightPaddingNumber?rightPadding:0):padding.unit===UNITS.EM?result=result+convertEmToPixel(isLeftPaddingNumber?leftPadding:0,parent)+convertEmToPixel(isRightPaddingNumber?rightPadding:0,parent):padding.unit===UNITS.PIXEL?result=result+convertPixelToEm(isLeftPaddingNumber?leftPadding:0,parent)+convertPixelToEm(isRightPaddingNumber?rightPadding:0,parent):padding.unit===UNITS.PERCENT&&(result=result+(isLeftPaddingNumber?leftPadding:0)*result/100+(isRightPaddingNumber?rightPadding:0)*result/100))),result}function calculateWidth(allottedWidth,captionSize,border,padding,parent){var captionUnit,captionWidth,elementWidth,labelWidth,widthUnit=getUnits(allottedWidth),wrapperWidth=parseInt(allottedWidth,10),difference=0;return widthUnit!==UNITS.NOT_SUPPORTED_UNIT&&(captionSize?(captionUnit=getUnits(captionSize),captionUnit!==UNITS.NOT_SUPPORTED_UNIT&&(captionWidth=parseInt(captionSize,10),labelWidth=captionWidth+captionUnit,captionUnit===UNITS.PERCENT?elementWidth=100-captionWidth+captionUnit:captionUnit===widthUnit&&(difference=getAdjustedValue(border,padding,widthUnit,WM.element(parent)),elementWidth=wrapperWidth-captionWidth-difference+widthUnit))):widthUnit===UNITS.PERCENT?(elementWidth=70+widthUnit,labelWidth=30+widthUnit):(difference=getAdjustedValue(border,padding,widthUnit,WM.element(parent)),elementWidth=Math.round(.7*wrapperWidth)-difference+widthUnit,labelWidth=wrapperWidth-parseInt(elementWidth,10)-difference+widthUnit)),{elementWidth:elementWidth,labelWidth:labelWidth,widthUnit:widthUnit}}function isWidgetEvent(event){return WIDGET_CONSTANTS.EVENTS.hasOwnProperty(event)}var UNITS={NOT_SUPPORTED_UNIT:"unsupported unit",PERCENT:"%",PIXEL:"px",EM:"em"},deviceSizeArray={all:{"class":"",classToRemove:["visible-xs-","visible-sm-","visible-md-","visible-lg-"]},xs:{"class":"visible-xs-"},sm:{"class":"visible-sm-"},md:{"class":"visible-md-"},lg:{"class":"visible-lg-"}};return{postWidgetCreate:postWidgetCreate,injectModelUpdater:injectModelUpdater,calculateWidth:calculateWidth,COMPOSITE_WIDGET_WIDTH:328,isWidgetEvent:isWidgetEvent,onScopeValueChangeProxy:onScopeValueChangeProxy}}],base.services.Widgets=["$rootScope","wmToaster","CONSTANTS",function($rootScope,wmToaster,CONSTANTS){"use strict";function byId(widgetId){return registry[widgetId]}function byName(name){return byId(nameIdMap[name])}function byType(types){if(!types)return registry;"string"==typeof types&&(types="form-widgets"===types?["wm-label","wm-text","wm-checkbox","wm-checkboxset","wm-radio","wm-radioset","wm-textarea","wm-select","wm-button","wm-picture","wm-anchor","wm-date","wm-calendar","wm-time","wm-currency","wm-colorpicker","wm-slider","wm-fileupload","wm-grid","wm-livegrid","wm-livefilter","wm-livelist","wm-datanavigator","wm-html","wm-prefab","wm-richtexteditor"]:types.split(","));var collection={};return WM.forEach(types,function(type){type=type.trim(),WM.forEach(registry,function(widget){widget.widgettype===type&&(collection[widget.name]=widget)})}),collection}function isValidName(name){var errMsgTitle,errMsgDesc,isValid=!0;return name?nameIdMap[name]&&(isValid=!1,errMsgTitle="MESSAGE_ERROR_DUPLICATE_WIDGETNAME_TITLE",errMsgDesc="MESSAGE_ERROR_DUPLICATE_WIDGETNAME_DESC"):(isValid=!1,errMsgTitle="MESSAGE_ERROR_INVALID_WIDGETNAME_TITLE",errMsgDesc="MESSAGE_ERROR_INVALID_WIDGETNAME_DESC"),isValid||wmToaster.show("error",$rootScope.locale[errMsgTitle],$rootScope.locale[errMsgDesc]),isValid}function unregister(name){var widgetId=nameIdMap[name];delete registry[widgetId],delete nameIdMap[name]}var registry={},nameIdMap={},returnObj={};return returnObj.byId=byId,returnObj.byName=byName,returnObj.isValidName=isValidName,returnObj.byType=byType,$rootScope.$on("name-change",function(evt,widgetId,newName,oldName,scope){(!CONSTANTS.isStudioMode||widgetId)&&(delete nameIdMap[oldName],delete returnObj[oldName],widgetId=widgetId||newName,nameIdMap[newName]=widgetId,registry[widgetId]=scope,Object.defineProperty(returnObj,newName,{configurable:!0,get:function(){return byName(newName)}}),scope.$on("$destroy",function(){unregister(scope.name)}))}),returnObj}],base.service(base.services),base.directive(base.directives),base.factory(base.factories),WM.module("wm.widgets").config(function(WidgetPropertiesProvider){"use strict";WidgetPropertiesProvider.addGroup({name:"layouts",namekey:"LABEL_LAYOUTS",iconclass:"layouts",open:!0,isLayout:!0}),WidgetPropertiesProvider.addGroup({name:"widgets",namekey:"LABEL_WIDGETS",iconclass:"widgets"}),WidgetPropertiesProvider.register("wm-column",{widgetType:"wm-column",template:"<wm-column></wm-column>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-content",{widgetType:"wm-content",template:"<wm-content></wm-content>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-footer",{widgetType:"wm-footer",template:"<wm-footer></wm-footer>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-form",{widgetType:"wm-form",template:"<wm-form></wm-form>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!0,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-header",{widgetType:"wm-header",template:"<wm-header></wm-header>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-layoutgrid",{widgetType:"wm-layoutgrid",template:"<wm-layoutgrid rows='3' columns='3'><wm-gridrow><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn></wm-gridrow><wm-gridrow><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn></wm-gridrow><wm-gridrow><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn><wm-gridcolumn></wm-gridcolumn></wm-gridrow></wm-layoutgrid>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-gridrow",{widgetType:"wm-gridrow",template:"<wm-gridrow></wm-gridrow>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-gridcolumn",{widgetType:"wm-gridcolumn",template:"<wm-gridcolumn></wm-gridcolumn>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-left-panel",{widgetType:"wm-left-panel",template:"<wm-left-panel></wm-left-panel>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-list",{widgetType:"wm-list",template:"<wm-list></wm-list>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!0,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-listtemplate",{widgetType:"wm-listtemplate",template:"<wm-listtemplate></wm-listtemplate>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-list-item",{widgetType:"wm-list-item",template:"<wm-list-item></wm-list-item>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-liveform",{widgetType:"wm-liveform",template:"<wm-liveform></wm-liveform>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-page",{widgetType:"wm-page",template:"<wm-page></wm-page>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-partial",{widgetType:"wm-partial",template:"<wm-partial></wm-partial>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-right-panel",{widgetType:"wm-right-panel",template:"<wm-right-panel></wm-right-panel>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-row",{widgetType:"wm-row",template:"<wm-row></wm-row>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!1,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-top-nav",{widgetType:"wm-top-nav",template:"<wm-top-nav></wm-top-nav>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!1,canBeCopied:!1,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-view",{widgetType:"wm-view",template:"<wm-view></wm-view>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-accordion",{widgetType:"wm-accordion",template:"<wm-accordion><wm-accordionpane><wm-accordionheader></wm-accordionheader><wm-accordioncontent></wm-accordioncontent></wm-accordionpane></wm-accordion>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-accordionpane",{widgetType:"wm-accordionpane",template:"<wm-accordionpane><wm-accordionheader></wm-accordionheader><wm-accordioncontent></wm-accordioncontent></wm-accordionpane>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-accordionheader",{widgetType:"wm-accordionheader",template:"<wm-accordionheader></wm-accordionheader>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!1,parent:"wm-accordionpane"}),WidgetPropertiesProvider.register("wm-accordioncontent",{widgetType:"wm-accordioncontent",template:"<wm-accordioncontent></wm-accordioncontent>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!0,canBeCopied:!1,parent:"wm-accordionpane",isPageContainer:!0}),WidgetPropertiesProvider.register("wm-tabs",{widgetType:"wm-tabs",template:"<wm-tabs><wm-tabpane><wm-tabheader></wm-tabheader><wm-tabcontent></wm-tabcontent></wm-tabpane></wm-tabs>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-tabpane",{widgetType:"wm-tabpane",template:"<wm-tabpane><wm-tabheader></wm-tabheader><wm-tabcontent></wm-tabcontent></wm-tabpane>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-tabheader",{widgetType:"wm-tabheader",template:"<wm-tabheader></wm-tabheader>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!1,parent:"wm-tabpane"}),WidgetPropertiesProvider.register("wm-tabcontent",{widgetType:"wm-tabcontent",template:"<wm-tabcontent></wm-tabcontent>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!0,isDeletable:!0,canBeCopied:!1,parent:"wm-tabpane",isPageContainer:!0}),WidgetPropertiesProvider.register("wm-composite-text",{widgetType:"wm-composite-text",template:"<wm-composite widget='text'><wm-label class='col-md-2'></wm-label><wm-text></wm-text></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-currency",{widgetType:"wm-composite-currency",template:"<wm-composite widget='currency'><wm-label class='col-md-2'></wm-label><wm-currency></wm-currency></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-radio",{widgetType:"wm-composite-radio",template:"<wm-composite widget='radio'><wm-radio class='col-md-push-2'></wm-radio><wm-label class='col-md-2 col-md-push-2'></wm-label></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-radioset",{widgetType:"wm-composite-radioset",template:"<wm-composite widget='radioset'><wm-label class='col-md-2'></wm-label><wm-radioset height='auto'></wm-radioset></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-checkbox",{widgetType:"wm-composite-checkbox",template:"<wm-composite widget='checkbox'><wm-checkbox class='col-md-push-2'></wm-checkbox><wm-label class='col-md-2 col-md-push-2'></wm-label></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-checkboxset",{widgetType:"wm-composite-checkboxset",template:"<wm-composite widget='checkboxset'><wm-label class='col-md-2'></wm-label><wm-checkboxset height='auto'></wm-checkboxset></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-select",{widgetType:"wm-composite-select",template:"<wm-composite widget='select'><wm-label class='col-md-2'></wm-label><wm-select></wm-select></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-date",{widgetType:"wm-composite-date",template:"<wm-composite widget='date'><wm-label class='col-md-2'></wm-label><wm-date></wm-date></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-time",{widgetType:"wm-composite-time",template:"<wm-composite widget='time'><wm-label class='col-md-2'></wm-label><wm-time></wm-time></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-textarea",{widgetType:"wm-composite-textarea",template:"<wm-composite widget='textarea'><wm-label class='col-md-2'></wm-label><wm-textarea></wm-textarea></wm-composite>"}),WidgetPropertiesProvider.register("wm-composite-colorpicker",{widgetType:"wm-composite-colorpicker",template:"<wm-composite widget='colorpicker'><wm-label class='col-md-2'></wm-label><wm-colorpicker></wm-colorpicker></wm-composite>"}),WidgetPropertiesProvider.register("wm-anchor",{widgetType:"wm-anchor",template:"<wm-anchor></wm-anchor>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-colorpicker",{widgetType:"wm-colorpicker",template:"<wm-colorpicker></wm-colorpicker>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-composite",{template:"<wm-composite></wm-composite>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-button",{widgetType:"wm-button",template:"<wm-button></wm-button>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-buttongroup",{widgetType:"wm-buttongroup",template:"<wm-buttongroup><wm-button caption='left'></wm-button><wm-button caption='center'></wm-button><wm-button caption='right'></wm-button></wm-buttongroup>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!0,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-menu",{widgetType:"wm-menu",template:"<wm-menu></wm-menu>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-tree",{widgetType:"wm-tree",template:"<wm-tree></wm-tree>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-slider",{widgetType:"wm-slider",template:"<wm-composite widget='slider'><wm-label class='col-md-2'></wm-label><wm-slider></wm-slider></wm-composite>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-checkbox",{widgetType:"wm-checkbox",template:"<wm-checkbox></wm-checkbox>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-checkboxset",{widgetType:"wm-checkboxset",template:"<wm-checkboxset></wm-checkboxset>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-currency",{widgetType:"wm-currency",template:"<wm-currency></wm-currency>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-date",{widgetType:"wm-date",template:"<wm-date></wm-date>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-calendar",{widgetType:"wm-calendar",template:"<wm-calendar></wm-calendar>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-fileupload",{widgetType:"wm-fileupload",template:"<wm-fileupload></wm-fileupload>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-radio",{widgetType:"wm-radio",template:"<wm-radio></wm-radio>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-radioset",{widgetType:"wm-radioset",template:"<wm-radioset></wm-radioset>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-select",{widgetType:"wm-select",template:"<wm-select></wm-select>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-text",{widgetType:"wm-text",template:"<wm-text></wm-text>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-textarea",{widgetType:"wm-textarea",template:"<wm-textarea></wm-textarea>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-time",{widgetType:"wm-time",template:"<wm-time></wm-time>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-grid",{widgetType:"wm-grid",template:'<wm-grid><wm-grid-column caption=\'Column1\' pcdisplay="true" mobiledisplay="true"></wm-grid-column><wm-grid-column caption=\'Column2\' pcdisplay="true" mobiledisplay="true"></wm-grid-column><wm-grid-column caption=\'Column3\' pcdisplay="true" mobiledisplay="true"></wm-grid-column><wm-grid-column caption=\'Column4\' pcdisplay="true" mobiledisplay="true"></wm-grid-column><wm-grid-column caption=\'Column5\' pcdisplay="true" mobiledisplay="true"></wm-grid-column></wm-grid>',isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-html",{widgetType:"wm-html",template:"<wm-html></wm-html>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-iframe",{widgetType:"wm-iframe",template:"<wm-iframe></wm-iframe>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-label",{widgetType:"wm-label",template:"<wm-label></wm-label>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-livefilter",{widgetType:"wm-livefilter",template:"<wm-livefilter></wm-livefilter>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-livegrid",{widgetType:"wm-livegrid",template:"<wm-livegrid><wm-grid deleterow='true' updaterow='true' insertrow='true' gridfirstrowselect='true'></wm-grid><wm-liveform novalidate='false'></wm-liveform></wm-livegrid>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-message",{widgetType:"wm-message",template:"<wm-message></wm-message>",isContainer:!1,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-picture",{widgetType:"wm-picture",template:"<wm-picture></wm-picture>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-video",{widgetType:"wm-video",template:"<wm-video controls='controls' videopreload='none'></wm-video>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-audio",{widgetType:"wm-audio",template:"<wm-audio controls='controls' audiopreload='none'></wm-audio>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-prefab",{widgetType:"wm-prefab",template:"<wm-prefab></wm-prefab>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!1}),WidgetPropertiesProvider.register("wm-spinner",{widgetType:"wm-spinner",template:"<wm-spinner show='true'></wm-spinner>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-design-dialog",{widgetType:"wm-design-dialog",template:"<wm-view class='dialog-view'><wm-dialog dialogtype='design-dialog' modal='true'><wm-dialogheader></wm-dialogheader><wm-dialogcontent><wm-form><wm-composite widget='text'><wm-label class='col-md-2' caption='Name'></wm-label><wm-text></wm-text></wm-composite></wm-form></wm-dialogcontent><wm-dialogactions><wm-button class='btn-secondary'  caption='Cancel'></wm-button><wm-button class='btn-primary'  caption='Save'></wm-button></wm-dialogactions></wm-dialog></wm-view>"}),WidgetPropertiesProvider.register("wm-dialog",{widgetType:"wm-dialog",template:"<wm-dialog></wm-dialog>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDeletable:!0,canBeCopied:!0,isDroppable:!1,parent:"wm-view"}),WidgetPropertiesProvider.register("wm-dialogheader",{widgetType:"wm-dialogheader",template:"<wm-dialogheader></wm-dialogheader>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDeletable:!1,canBeCopied:!0,isDroppable:!1}),WidgetPropertiesProvider.register("wm-dialogcontent",{widgetType:"wm-dialogcontent",template:"<wm-dialogcontent></wm-dialogcontent>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDeletable:!1,canBeCopied:!0,isDroppable:!0}),WidgetPropertiesProvider.register("wm-dialogactions",{widgetType:"wm-dialogactions",template:"<wm-dialogactions></wm-dialogactions>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDeletable:!1,canBeCopied:!0,isDroppable:!0}),WidgetPropertiesProvider.register("wm-alertdialog",{widgetType:"wm-alertdialog",template:"<wm-view class='dialog-view'><wm-alertdialog></wm-alertdialog></wm-view>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDeletable:!0,canBeCopied:!0,isDroppable:!1,parent:"wm-view"}),WidgetPropertiesProvider.register("wm-confirmdialog",{widgetType:"wm-confirmdialog",template:"<wm-view class='dialog-view'><wm-confirmdialog></wm-confirmdialog></wm-view>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDeletable:!0,canBeCopied:!0,isDroppable:!1,parent:"wm-view"}),WidgetPropertiesProvider.register("wm-iframedialog",{widgetType:"wm-iframedialog",template:"<wm-view class='dialog-view'><wm-iframedialog></wm-iframedialog></wm-view>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDeletable:!0,canBeCopied:!0,isDroppable:!1,parent:"wm-view"}),WidgetPropertiesProvider.register("wm-pagedialog",{widgetType:"wm-pagedialog",template:"<wm-view class='dialog-view'><wm-pagedialog></wm-pagedialog></wm-view>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDeletable:!0,canBeCopied:!0,isDroppable:!1,parent:"wm-view",isPageContainer:!0}),WidgetPropertiesProvider.register("wm-logindialog",{widgetType:"wm-logindialog",template:"<wm-view class='dialog-view'><wm-logindialog modal='false' iconname='log-in' title='Login'><wm-dialogheader></wm-dialogheader><wm-dialogcontent><wm-form><wm-message scopedataset='loginMessage' class='app-login-dialog-message'></wm-message><wm-composite><wm-label caption='Username' class='col-md-4'></wm-label><wm-text placeholder='Enter username' class='app-login-dialog-username' name='usernametext'></wm-text></wm-composite><wm-composite widget='text'><wm-label caption='Password'  class='col-md-4'></wm-label><wm-text type='password' placeholder='Enter password' class='app-login-dialog-password' name='passwordtext'></wm-text></wm-composite></wm-form></wm-dialogcontent><wm-dialogactions><wm-button class='btn-primary' caption='Sign in'></wm-button></wm-dialogactions></wm-logindialog></wm-view>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!1,isDeletable:!0,canBeCopied:!1,isDroppable:!1,parent:"wm-view"}),WidgetPropertiesProvider.register("wm-livelist",{widgetType:"wm-livelist",template:"<wm-livelist><wm-listtemplate></wm-listtemplate></wm-livelist>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-search",{widgetType:"wm-search",template:"<wm-search></wm-search>",isContainer:!0,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-panel",{widgetType:"wm-panel",template:"<wm-panel></wm-panel>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!0,isDeletable:!0,canBeCopied:!0,isPageContainer:!0}),WidgetPropertiesProvider.register("wm-richtexteditor",{widgetType:"wm-richtexteditor",template:"<wm-richtexteditor></wm-richtexteditor>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-chart",{template:"<wm-chart></wm-chart>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!0,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-chart-line",{widgetType:"wm-chart",template:"<wm-chart type='Line'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-column",{widgetType:"wm-chart",template:"<wm-chart type='Column'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-pie",{widgetType:"wm-chart",template:"<wm-chart type='Pie'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-area",{widgetType:"wm-chart",template:"<wm-chart type='Area'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-bar",{widgetType:"wm-chart",template:"<wm-chart type='Bar'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-cumulativeline",{widgetType:"wm-chart",template:"<wm-chart type='Cumulative Line'></wm-chart>"}),WidgetPropertiesProvider.register("wm-chart-donut",{widgetType:"wm-chart",template:"<wm-chart type='Donut'></wm-chart>"}),WidgetPropertiesProvider.register("wm-datanavigator",{widgetType:"wm-datanavigator",template:"<wm-datanavigator></wm-datanavigator>",isContainer:!1,isResizable:!0,isMovableInsideCanvas:!1,isDroppable:!1,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.register("wm-login",{widgetType:"wm-login",template:"<wm-login><wm-composite> <wm-label caption='Username'></wm-label> <wm-text placeholder='Enter username' name='usernametext' class='app-login-username'></wm-text> </wm-composite> <wm-composite widget='text'> <wm-label caption='Password'></wm-label> <wm-text type='password' name='passwordtext' placeholder='Enter password' class='app-login-password'></wm-text> </wm-composite> <wm-button type='submit' caption='Sign in' width='100%' class='app-login-button btn-primary'></wm-button> <wm-composite widget='checkbox'> <wm-checkbox name='checkbox1' class='app-login-rememberme' scopedatavalue='user.rememberMe' ></wm-checkbox> <wm-label caption='Remember Me' class='app-login-remembermetext'></wm-label> <wm-anchor caption='Forgot Password' class='app-login-forgotlink'></wm-anchor> </wm-composite> </wm-login>",isContainer:!0,isResizable:!1,isMovableInsideCanvas:!0,isDroppable:!0,isDeletable:!0,canBeCopied:!0}),WidgetPropertiesProvider.addSubGroup({name:"pagelayouts",namekey:"LABEL_LAYOUTS_PAGELAYOUTS",parent:"layouts",widgets:[{widgetType:"wm-page",layoutType:"one-column",name:"1 Column",namekey:"LABEL_LAYOUTS_1_COLUMN",iconclass:"one-col-layout",isDraggable:!1},{widgetType:"wm-page",layoutType:"two-column",name:"2 Column",namekey:"LABEL_LAYOUTS_2_COLUMN",iconclass:"two-col-layout",isDraggable:!1},{widgetType:"wm-page",layoutType:"three-column",name:"3 Column",namekey:"LABEL_LAYOUTS_3_COLUMN",iconclass:"three-col-layout",isDraggable:!1},{widgetType:"wm-page",layoutType:"blank",name:"blankLayout",namekey:"LABEL_LAYOUTS_BLANK",iconclass:"blank",isDraggable:!1}]}),WidgetPropertiesProvider.addSubGroup({name:"contentlayouts",namekey:"LABEL_WIDGETS_CONTENTLAYOUTS",parent:"layouts",widgets:[{widgetType:"wm-accordion",name:"accordion",namekey:"LABEL_WIDGET_ACCORDION",iconclass:"accordion",isDraggable:!0},{widgetType:"wm-tabs",name:"tabs",namekey:"LABEL_WIDGET_TABS",iconclass:"tabs",isDraggable:!0},{widgetType:"wm-form",name:"Form Layout",namekey:"LABEL_WIDGET_FORM",iconclass:"form",isDraggable:!0},{widgetType:"wm-layoutgrid",name:"Layout grid",namekey:"LABEL_WIDGET_LAYOUTGRID",iconclass:"layoutgrid",isDraggable:!0},{widgetType:"wm-list",name:"List",namekey:"LABEL_WIDGET_LIST",iconclass:"list",isDraggable:!0},{widgetType:"wm-panel",name:"Panel",namekey:"LABEL_WIDGET_PANEL",iconclass:"panel",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"formwidgets",namekey:"LABEL_WIDGETS_FORMWIDGETS",parent:"widgets",widgets:[{widgetType:"wm-button",name:"Button",namekey:"LABEL_WIDGET_BUTTON",iconclass:"button",isDraggable:!0},{widgetType:"wm-buttongroup",name:"Button Group",namekey:"LABEL_WIDGET_BUTTON_GROUP",iconclass:"button-group",isDraggable:!0},{widgetType:"wm-menu",name:"Menu",namekey:"LABEL_WIDGET_MENU",iconclass:"menu",isDraggable:!0},{widgetType:"wm-composite-text",name:"Text",namekey:"LABEL_WIDGET_TEXT",iconclass:"text",isDraggable:!0},{widgetType:"wm-composite-textarea",name:"Textarea",namekey:"LABEL_WIDGET_TEXTAREA",iconclass:"textarea",isDraggable:!0},{widgetType:"wm-composite-select",name:"Select",namekey:"LABEL_WIDGET_SELECT",iconclass:"select",isDraggable:!0},{widgetType:"wm-composite-radio",name:"Radio",namekey:"LABEL_WIDGET_RADIO",iconclass:"radio",isDraggable:!0},{widgetType:"wm-composite-radioset",name:"Radioset",namekey:"LABEL_WIDGET_RADIOSET",iconclass:"radioset",isDraggable:!0},{widgetType:"wm-composite-checkbox",name:"Checkbox",namekey:"LABEL_WIDGET_CHECKBOX",iconclass:"checkbox",isDraggable:!0},{widgetType:"wm-composite-checkboxset",name:"Checkboxset",namekey:"LABEL_WIDGET_CHECKBOXSET",iconclass:"checkboxset",isDraggable:!0},{widgetType:"wm-composite-date",name:"Date",namekey:"LABEL_WIDGET_DATE",iconclass:"date",isDraggable:!0},{widgetType:"wm-calendar",name:"Calendar",namekey:"LABEL_WIDGET_CALENDAR",iconclass:"calendar",isDraggable:!0},{widgetType:"wm-composite-time",name:"Time",namekey:"LABEL_WIDGET_TIME",iconclass:"time",isDraggable:!0},{widgetType:"wm-composite-currency",name:"Currency",namekey:"LABEL_WIDGET_CURRENCY",iconclass:"currency",isDraggable:!0},{widgetType:"wm-fileupload",name:"Fileupload",namekey:"LABEL_WIDGET_FILEUPLOAD",iconclass:"fileupload",isDraggable:!0},{widgetType:"wm-composite-colorpicker",name:"Colorpicker",namekey:"LABEL_WIDGET_COLORPICKER",iconclass:"colorpicker",isDraggable:!0},{widgetType:"wm-slider",name:"slider",namekey:"LABEL_WIDGET_SLIDER",iconclass:"slider",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"basicwidgets",namekey:"LABEL_WIDGETS_BASICWIDGETS",parent:"widgets",widgets:[{widgetType:"wm-label",name:"Label",namekey:"LABEL_WIDGET_LABEL",iconclass:"label",isDraggable:!0},{widgetType:"wm-anchor",name:"Anchor",namekey:"LABEL_WIDGET_ANCHOR",iconclass:"anchor",isDraggable:!0},{widgetType:"wm-picture",name:"Picture",namekey:"LABEL_WIDGET_PICTURE",iconclass:"picture",isDraggable:!0},{widgetType:"wm-tree",name:"Tree",namekey:"LABEL_WIDGET_TREE",iconclass:"tree",isDraggable:!0},{widgetType:"wm-video",name:"Video",namekey:"LABEL_WIDGET_VIDEO",iconclass:"video",isDraggable:!0},{widgetType:"wm-audio",name:"Audio",namekey:"LABEL_WIDGET_AUDIO",iconclass:"audio",isDraggable:!0},{widgetType:"wm-html",name:"html",namekey:"LABEL_WIDGET_HTML",iconclass:"html",isDraggable:!0},{widgetType:"wm-iframe",name:"iframe",namekey:"LABEL_WIDGET_IFRAME",iconclass:"iframe",isDraggable:!0},{widgetType:"wm-message",name:"Message",namekey:"LABEL_WIDGET_MESSAGE",iconclass:"message",isDraggable:!0},{widgetType:"wm-spinner",name:"Spinner",namekey:"LABEL_WIDGET_SPINNER",iconclass:"spinner",isDraggable:!0},{widgetType:"wm-search",name:"Search",namekey:"LABEL_WIDGET_SEARCH",iconclass:"search",isDraggable:!0},{widgetType:"wm-richtexteditor",name:"Richtext editor",namekey:"LABEL_WIDGET_RICHTEXTEDITOR",iconclass:"richtexteditor",isDraggable:!0},{widgetType:"wm-datanavigator",name:"Data Navigator",namekey:"LABEL_WIDGET_DATANAVIGATOR",iconclass:"datanavigator",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"grids",namekey:"LABEL_WIDGETS_GRIDS",parent:"widgets",widgets:[{widgetType:"wm-grid",name:"Grid",namekey:"LABEL_WIDGET_GRID",iconclass:"grid",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"charts",namekey:"LABEL_WIDGETS_CHARTS",parent:"widgets",widgets:[{widgetType:"wm-chart-line",name:"Line",namekey:"LABEL_WIDGET_LINECHART",iconclass:"linechart",isDraggable:!0},{widgetType:"wm-chart-column",name:"Column",namekey:"LABEL_WIDGET_COLUMNCHART",iconclass:"columnchart",isDraggable:!0},{widgetType:"wm-chart-area",name:"Area",namekey:"LABEL_WIDGET_AREACHART",iconclass:"areachart",isDraggable:!0},{widgetType:"wm-chart-pie",name:"Pie",namekey:"LABEL_WIDGET_PIECHART",iconclass:"piechart",isDraggable:!0},{widgetType:"wm-chart-bar",name:"Bar",namekey:"LABEL_WIDGET_BARCHART",iconclass:"barchart",isDraggable:!0},{widgetType:"wm-chart-cumulativeline",name:"Cumulative line",namekey:"LABEL_WIDGET_CUMULATIVELINECHART",iconclass:"cumulativelinechart",isDraggable:!0},{widgetType:"wm-chart-donut",name:"Donut",namekey:"LABEL_WIDGET_DONUTCHART",iconclass:"donutchart",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"livewidgets",namekey:"LABEL_LIVE_WIDGETS",parent:"widgets",widgets:[{widgetType:"wm-livelist",name:"Live List",namekey:"LABEL_WIDGET_LIVELIST",iconclass:"livelist",isDraggable:!0},{widgetType:"wm-liveform",name:"Live Form",namekey:"LABEL_WIDGET_LIVEFORM",iconclass:"liveform",isDraggable:!0},{widgetType:"wm-livefilter",name:"Live Filter",namekey:"LABEL_WIDGET_LIVEFILTER",iconclass:"livefilter",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"advancedwidgets",namekey:"LABEL_ADVANCED_WIDGETS",parent:"widgets",widgets:[{widgetType:"wm-login",name:"Login",namekey:"LABEL_WIDGET_LOGIN",iconclass:"login",isDraggable:!0}]}),WidgetPropertiesProvider.addSubGroup({name:"dialogs",namekey:"LABEL_WIDGETS_DIALOGS",parent:"widgets",widgets:[{widgetType:"wm-design-dialog",name:"Design Dialog",namekey:"LABEL_WIDGET_DESIGN_DIALOG",iconclass:"design-dialog",isDraggable:!0},{widgetType:"wm-alertdialog",name:"Alert Dialog",namekey:"LABEL_WIDGET_ALERT_DIALOG",iconclass:"alert-dialog",isDraggable:!0},{widgetType:"wm-confirmdialog",name:"Confirm Dialog",namekey:"LABEL_WIDGET_CONFIRM_DIALOG",iconclass:"confirm-dialog",isDraggable:!0},{widgetType:"wm-iframedialog",name:"Iframe Dialog",namekey:"LABEL_WIDGET_IFRAME_DIALOG",iconclass:"iframe-dialog",isDraggable:!0},{widgetType:"wm-pagedialog",name:"Page Dialog",namekey:"LABEL_WIDGET_PAGE_DIALOG",iconclass:"page-dialog",isDraggable:!0},{widgetType:"wm-logindialog",name:"Login Dialog",namekey:"LABEL_WIDGET_LOGIN_DIALOG",iconclass:"login-dialog",isDraggable:!0}]})
}),WM.module("wm.widgets.base").provider("WidgetProperties",function(){"use strict";function modifyGroup(groupName,groupProperty,propertyNewValue){var group;for(i=0;i<widgetGroups.length;i+=1)if(group=widgetGroups[i],group.name===groupName){group[groupProperty]=propertyNewValue;break}}function combineGroups(){var length=widgetGroups.length,group=null,map={};for(mainGroups=[],i=0;length>i;i+=1)group=widgetGroups[i],group.parent?map[group.parent].push(group):(map[group.name]=[],mainGroups.push(group),group.subGroups=map[group.name])}function register(widgetType,props){widgetProps[widgetType]=props}function getConfig(widgetType){return widgetType?widgetProps[widgetType]:{}}function addGroup(groupDetails){widgetGroups.push(groupDetails)}function addSubGroup(subGroupDetails){var index;if(subGroupDetails&&(subGroupDetails.name||subGroupDetails.nameKey)&&subGroupDetails.parent){for(subGroupDetails.widgets||(subGroupDetails.widgets=[]),index=0;index<widgetGroups.length;index+=1)if(widgetGroups[index].name===subGroupDetails.name)return widgetGroups[index];return WM.forEach(subGroupDetails.widgets,function(widget){widget.category=subGroupDetails.name}),widgetGroups.push(subGroupDetails),combineGroups(),subGroupDetails}}function getGroup(groupName){if(groupName)for(var i=0;i<mainGroups.length;i+=1)if(mainGroups[i].name===groupName)return mainGroups[i]}function getSubGroup(groupName,subGroupName){if(groupName&&subGroupName){var i,subGroup=null,group=getGroup(groupName);for(i=0;i<group.subGroups.length&&(subGroup=group.subGroups[i],subGroup.name!==subGroupName);i+=1);return subGroup}}function getLayout(layoutType){var layouts=getSubGroup("layouts","pagelayouts").widgets,layoutConfig=null;return WM.forEach(layouts,function(layout){layout.layoutType===layoutType&&(layoutConfig=layout)}),layoutConfig||{}}function getGroups(){return mainGroups}function deleteDbWidgets(groupName,subGroupName){var widget,i,subGroup=getSubGroup(groupName,subGroupName),widgetsCount=subGroup.widgets.length,widgets=subGroup.widgets,newWidgets=[];for(i=0;widgetsCount>i;i+=1)widget=widgets[i],widget.projectID||newWidgets.push(widget);subGroup.widgets=newWidgets}var widgetProps={},widgetGroups=[],mainGroups=[],i=0;combineGroups(),this.register=register,this.getConfig=getConfig,this.getSubGroup=getSubGroup,this.addSubGroup=addSubGroup,this.addGroup=addGroup,this.$get=function(){return{register:register,getConfig:getConfig,getLayout:getLayout,getGroup:getGroup,getSubGroup:getSubGroup,addSubGroup:addSubGroup,getGroups:getGroups,modifyGroup:modifyGroup,deleteDbWidgets:deleteDbWidgets,addGroup:addGroup}}}),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/anchor.html",'<a data-identifier="anchor" href="{{hyperlink}}" class="app-anchor" init-widget data-ng-show="show" title="{{hint}}" '+$rootScope.getWidgetStyles()+'>{{caption || "Link"}}</a>')}]).directive("wmAnchor",["PropertiesFactory","$templateCache","WidgetUtilService","Utils","CONSTANTS",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils,CONSTANTS){"use strict";function propertyChangeHandler(scope,attrs,key,newVal){switch(key){case"target":attrs.$set("target",newVal);break;case"hyperlink":CONSTANTS.isRunMode&&Utils.stringStartsWith(newVal,"www.")&&(scope.hyperlink="http://"+newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.anchor",["wm.base","wm.base.events","wm.base.events.focus"]),notifyFor={target:!0,hyperlink:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/anchor.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/htmlTemplate.html",'<div class="app-html-container" init-widget title="{{hint}}" data-ng-show="show" '+$rootScope.getWidgetStyles()+' ><div class="html-content"></div> </div>')}]).directive("wmHtml",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(element,targetEl,key,newVal){switch(key){case"content":targetEl.html(newVal);break;case"autoscroll":newVal=newVal===!0||"true"===newVal,element.css("overflow",newVal?"auto":"hidden")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.html",["wm.base","wm.base.editors","wm.base.events"]),notifyFor={content:!0,autoscroll:!0};return{restrict:"E",replace:!0,scope:{onClick:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/htmlTemplate.html"));return isWidgetInsideCanvas||tAttrs.hasOwnProperty("onClick")&&template.children().first().attr("data-ng-click","onClick({$event: $event, $scope: this})"),template[0].outerHTML},compile:function(tElement){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var targetElement=element.children().first(),onPropertyChange=propertyChangeHandler.bind(void 0,element,targetElement),content=tElement.context.innerHTML;targetElement.html(content),scope.content=content,element.css("overflow","hidden"),onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/iframe.html",'<iframe init-widget class="app-iframe" scrolling="auto" marginheight="0" marginwidth="0" frameborder="0" hint="{{title}}" seamless="seamless" data-ng-show="show" data-ng-style="{width: width,height: height}"></iframe>')}]).directive("wmIframe",["PropertiesFactory","$rootScope","$templateCache","WidgetUtilService","$sce","CONSTANTS","Utils","$location",function(PropertiesFactory,$rootScope,$templateCache,WidgetUtilService,$sce,CONSTANTS,Utils,$location){"use strict";function propertyChangeHandler(scope,element,key,newVal){switch(key){case"iframesrc":newVal&&WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.iframesrc=$sce.trustAsResourceUrl(newVal),CONSTANTS.isStudioMode&&$rootScope.preferences.blockNonSecureContent&&Utils.stringStartsWith(newVal,"http://")&&Utils.stringStartsWith($location.$$absUrl,"https://")?(scope.showContentLoadError=!0,scope.errMsg=$rootScope.locale.MESSAGE_ERROR_CONTENT_DISPLAY+newVal):scope.showContentLoadError=!1,element.attr("src",scope.iframesrc))}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.iframe",["wm.base"]),notifyFor={iframesrc:!0};return{restrict:"E",scope:{},replace:!0,template:$templateCache.get("template/widget/iframe.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/label.html",'<label class="control-label app-label" data-ng-show="show" title="{{hint}}" init-widget  data-ng-class="{required:required}" '+$rootScope.getWidgetStyles()+"></label>")}]).directive("wmLabel",["PropertiesFactory","$templateCache","WidgetUtilService","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(element,key,newVal){switch(key){case"caption":element.text(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.label",["wm.base","wm.base.editors","wm.base.events"]),notifyFor={caption:!0};return{restrict:"E",scope:{onClick:"&",onDblclick:"&",onMouseenter:"&",onMouseleave:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/label.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onDblclick")&&template.attr("data-ng-dblclick","onDblclick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/message.html",'<p class="alert app-message" data-ng-show="show" init-widget '+$rootScope.getWidgetStyles()+'data-ng-class=\'{"alert-success":messageType.isSuccess, "alert-danger":messageType.isError, "alert-warning":messageType.isWarn, "alert-info":messageType.isInfo, "alert-info alert-loading":messageType.isLoading}\' ><i class="icon"></i><span ng-bind-html="caption"></span><i class="close" data-ng-hide="hideClose">&times;</i></p>')}]).directive("wmMessage",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function setDataSet(dataset,scope){!WM.isArray(dataset)&&WM.isObject(dataset)?(scope.caption=dataset.caption,scope.type=dataset.type,scope.show=dataset.show=!0):scope.show=!1}function propertyChangeHandler(scope,attrs,key,newVal){switch(key){case"type":"success"===newVal?scope.messageType={isSuccess:!0}:"error"===newVal?scope.messageType={isError:!0}:"warn"===newVal?scope.messageType={isWarn:!0}:"info"===newVal?scope.messageType={isInfo:!0}:"loading"===newVal&&(scope.messageType={isLoading:!0});break;case"dataset":attrs.dataset&&setDataSet(newVal,scope)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.message",["wm.base"]),notifyFor={type:!0,dataset:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onClose:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/message.html"));return isWidgetInsideCanvas||tAttrs.hasOwnProperty("onClose")&&template.children().last().attr("data-ng-click","dismiss({$event: $event, $scope: this})"),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope.hideClose=attrs.hideClose||!1,scope.dismiss=function(eventObject){scope.onClose({$event:eventObject.$event,$scope:eventObject.$scope}),scope.dataset?(scope.dataset.show=!1,setDataSet(null,scope)):scope.scopedataset?(scope.scopedataset.show=!1,setDataSet(null,scope)):scope.show=!1},scope.toggle=function(showHide,caption,type){WM.isUndefined(showHide)?scope.show=!scope.show:(scope.show="show"===showHide?!0:"hide"===showHide?!1:showHide,scope.caption=caption||scope.caption,scope.type=type||scope.type)};var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.widgetid||scope.$watch("scopedataset",function(newVal){attrs.scopedataset&&setDataSet(newVal,scope)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/picture.html",'<img init-widget alt="" title="{{hint}}" class="app-picture" data-ng-src="{{imagesource}}" '+$rootScope.getWidgetStyles()+' data-ng-show="show">')}]).directive("wmPicture",["PropertiesFactory","$templateCache","WidgetUtilService","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils){"use strict";function propertyChangeHandler(scope,element,key,newVal){switch(key){case"pictureaspect":switch(newVal){case"None":element.css({width:"",height:""});break;case"H":element.css({width:"100%",height:""});break;case"V":element.css({width:"",height:"100%"});break;case"Both":element.css({width:"100%",height:"100%"})}break;case"picturesource":scope.imagesource=Utils.getImageUrl(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.picture",["wm.base","wm.base.editors","wm.base.events"]),notifyFor={pictureaspect:!0,picturesource:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/picture.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/video.html",'<video init-widget alt="{{hint}}" title="{{hint}}" class="app-video" preload="{{videopreload}}" data-ng-attr-poster="{{postersource}}" data-ng-src="{{mp4videoUrl}}" '+$rootScope.getWidgetStyles()+' data-ng-show="show" ><source type="video/mp4" data-ng-src="{{mp4videoUrl}}" data-ng-if="mp4videoUrl"><source type="video/webm" data-ng-src="{{webmvideoUrl}}" data-ng-if="webmvideoUrl"><source type="video/ogg" data-ng-src="{{oggvideoUrl}}" data-ng-if="oggvideoUrl"><track kind="subtitles" label="{{subtitlelang}}" data-ng-if="tracksource" data-ng-src="{{tracksource}}" srclang="{{subtitlelang}}" default>{{videosupportmessage}}</video>')}]).directive("wmVideo",["PropertiesFactory","$templateCache","WidgetUtilService","Utils","$sce",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils,$sce){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"videoposter":scope.postersource=Utils.getImageUrl(newVal);break;case"mp4format":WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.mp4videoUrl=$sce.trustAsResourceUrl(newVal));break;case"oggformat":WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.oggvideoUrl=$sce.trustAsResourceUrl(newVal));break;case"webmformat":WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.webmvideoUrl=$sce.trustAsResourceUrl(newVal));break;case"subtitlesource":WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.tracksource=Utils.getResourceUrl(newVal))}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.video",["wm.base","wm.containers"]),notifyFor={videoposter:!0,mp4format:!0,oggformat:!0,webmformat:!0,subtitlesource:!0};return{restrict:"E",replace:!0,scope:{},template:$templateCache.get("template/widget/video.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/audio.html",'<audio init-widget alt="{{hint}}" title="{{hint}}" class="app-audio"  preload="{{audiopreload}}" data-ng-src="{{mp3audioUrl}}" '+$rootScope.getWidgetStyles()+' data-ng-show="show" ><source type="audio/mp3" src="{{mp3audioUrl}}">{{audiosupportmessage}}</audio>')}]).directive("wmAudio",["PropertiesFactory","$templateCache","WidgetUtilService","$sce",function(PropertiesFactory,$templateCache,WidgetUtilService,$sce){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"mp3format":WM.isString(newVal)&&-1===newVal.indexOf("Variables")&&(scope.mp3audioUrl=$sce.trustAsResourceUrl(newVal))}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.audio",["wm.base","wm.containers"]),notifyFor={mp3format:!0};return{restrict:"E",replace:!0,scope:{},template:$templateCache.get("template/widget/audio.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/form/searchlist.html",'<a><img data-ng-src="{{match.model.wmImgSrc}}" data-ng-if="match.model.wmImgSrc" width="16"><span bind-html-unsafe="match.label | typeaheadHighlight:query"></span></a>'),$templateCache.put("template/widget/form/search.html",'<div class="app-search input-group" init-widget has-model data-ng-show="show" data-ng-style="{ color: color,  height: height,  width: width,  cursor: cursor,  fontFamily: fontfamily,  fontSize: fontsize,  fontWeight: fontweight,  fontStyle: fontstyle,  opacity: opacity,  textDecoration: textdecoration,  whiteSpace: whitespace,  wordBreak: wordbreak,  zIndex: zindex }"><input data-ng-if="dataSetType === \'listOfObjects\'" type="text" class="app-textbox form-control" placeholder="{{placeholder}}" data-ng-model="query"typeahead="item.{{displaylabel}} for item in itemList | filter:{\'{{searchkey}}\':$viewValue} | limitTo:limit" typeahead-on-select="onTypeAheadSelect($event, $item, $model, $label)"typeahead-template-url="template/widget/form/searchlist.html"><input data-ng-if="dataSetType === \'listOfStrings\'" type="text" class="app-textbox form-control" placeholder="{{placeholder}}"data-ng-model="query"typeahead="item for item in itemList | filter:$viewValue | limitTo:limit" typeahead-on-select="onTypeAheadSelect($event, $item, $model, $label)"typeahead-template-url="template/widget/form/searchlist.html"><span class="input-group-addon"><form data-ng-submit="onSubmit({$event: $event, $scope: this})" ><button class="app-search-button glyphicon glyphicon-search" type="submit" data-ng-click="onTypeAheadSelect($event, $item, $model, $label)"></button></form></span></div>')}]).directive("wmSearch",["PropertiesFactory","$templateCache","WidgetUtilService","CONSTANTS",function(PropertiesFactory,$templateCache,WidgetUtilService,CONSTANTS){"use strict";function setDataSet(data,scope){if(!data)return scope.dataSetType||(scope.dataSetType="listOfStrings"),void(scope.itemList||(scope.itemList=[]));if(CONSTANTS.isRunMode){var dataSet=WM.copy(data);WM.isArray(dataSet)?(WM.isObject(dataSet[0])?(scope.dataSetType="listOfObjects",scope.displayimagesrc&&WM.forEach(dataSet,function(eachItem,index){dataSet[index].wmImgSrc=eachItem[scope.displayimagesrc]})):(scope.dataSetType="listOfStrings",WM.forEach(dataSet,function(val,index){dataSet[index]=val.toString()})),scope.itemList=dataSet):WM.isString(dataSet)&&dataSet.trim()&&setDataSet(dataSet.split(","),scope)}}function propertyChangeHandler(scope,key,newVal){switch(key){case"searchkey":scope.searchkey=newVal&&newVal.replace(dataSetRegEx,"");break;case"displaylabel":scope.displaylabel=newVal&&newVal.replace(dataSetRegEx,"");break;case"dataset":setDataSet(newVal,scope);break;case"displayimagesrc":scope.displayimagesrc=newVal}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.search",["wm.base"]),dataSetRegEx=new RegExp(/scopedataset\./gi),notifyFor={searchkey:!0,displaylabel:!0,dataset:!0,displayimagesrc:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onSubmit:"&"},template:$templateCache.get("template/widget/form/search.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.onTypeAheadSelect=function($event,$item,$model,$label){$event=$event||{},$item&&$item.wmImgSrc&&($item=WM.copy($item),delete $item.wmImgSrc),$event.data={item:$item,model:$model,label:$label,query:element.find("input").val()},scope.onSubmit({$event:$event,$scope:scope})},scope.$watch("scopedataset",function(newVal){setDataSet(newVal,scope)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/spinner.html",'<div class="app-spinner {{size}}" data-ng-show="show" init-widget title="{{hint}}" '+$rootScope.getWidgetStyles()+' ><div class="spinner-message"><span class="spinner-image" data-ng-style="{backgroundImage:picture, width: imagewidth, height: imageheight}"></span><span class="spinner-text">{{caption}}</span></div></div>')}]).directive("wmSpinner",["PropertiesFactory","$rootScope","$templateCache","WidgetUtilService","Utils",function(PropertiesFactory,$rootScope,$templateCache,WidgetUtilService,Utils){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"image":scope.picture=Utils.getBackGroundImageUrl(newVal);break;case"backgroundimage":scope.backgroundimgsource=Utils.getBackGroundImageUrl(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.spinner",["wm.base"]),notifyFor={image:!0,backgroundimage:!0};return{restrict:"E",scope:{},replace:!0,template:$templateCache.get("template/widget/spinner.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var handlers=[],onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs),scope.widgetid||(handlers.push($rootScope.$on("invoke-service",function(event,variableName){variableName===scope.servicevariabletotrack&&(scope.show=!0)})),handlers.push($rootScope.$on("invoke-service-end",function(event,variable){variable.name===scope.servicevariabletotrack&&(scope.show=!1)})),scope.$on("$destroy",function(){handlers.forEach(Utils.triggerFn)}))}}}}}]),WM.module("wm.widgets.basic").directive("wmTree",["PropertiesFactory","$rootScope","WidgetUtilService","$timeout",function(PropertiesFactory,$rootScope,WidgetUtilService,$timeout){"use strict";function constructNodes(scope,nodes,parent){var ul=WM.element("<ul></ul>");parent.append(ul),nodes.forEach(function(node){var expandCollapseIcon,li=WM.element("<li></li>"),nodeIcon=WM.element("<i></i>");li.data("nodedata",node).append(nodeIcon).append('<span class="title">'+node.label+"</span>").appendTo(ul),node.icon&&nodeIcon.addClass("glyphicon glyphicon-"+node.icon),node.children&&node.children.length?(li.addClass("parent-node collapsed"),expandCollapseIcon=WM.element('<i class="collapsed"></i>'),node.icon&&nodeIcon.addClass("glyphicon glyphicon-"+node.icon),li.prepend(expandCollapseIcon),scope.widgetid||constructNodes(scope,node.children,li)):(node.icon||nodeIcon.addClass("leaf-node"),li.addClass("leaf-node"))})}function getNodes(newVal){var nodes=[];return WM.isString(newVal)?(newVal=newVal.trim(),newVal&&(nodes=newVal.split(",").map(function(item){return{label:item&&item.trim()}}))):WM.isArray(newVal)?nodes=newVal:WM.isObject(newVal)&&(nodes=[newVal]),nodes}function propertyChangeHandler(scope,element,key,newVal){switch(key){case"scopedataset":case"dataset":var nodes=getNodes(newVal);element.empty(),nodes.length&&constructNodes(scope,nodes,element)}}function bindEvents(scope,element){element.on("click",function(evt){var fn,target=WM.element(evt.target),li=target.closest("li");target.is("i")?target.hasClass("collapsed")?(li.removeClass("collapsed").addClass("expanded"),target.removeClass("collapsed").addClass("expanded")):target.hasClass("expanded")&&(li.removeClass("expanded").addClass("collapsed"),target.removeClass("expanded").addClass("collapsed")):target.is("span.title")&&(element.find(".selected").removeClass("selected"),li.addClass("selected"),fn=scope.onSelect({$event:evt,$scope:scope,$item:li.data("nodedata")}),WM.isFunction(fn)&&fn())})}var widgetProps=PropertiesFactory.getPropertiesOf("wm.tree",["wm.base","wm.base.editors"]),notifyFor={scopedataset:!0,dataset:!0};return{restrict:"E",scope:{scopedataset:"=?",onSelect:"&"},template:'<div class="app-tree" init-widget '+$rootScope.getWidgetStyles("container")+' data-ng-show="show"></div>',replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope.widgetid||bindEvents(scope,element);var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs),!scope.widgetid&&attrs.hasOwnProperty("scopedataset")&&$timeout(function(){scope.$watch("scopedataset",function(newVal){onPropertyChange("scopedataset",newVal)})},0,!0)}}}}}]),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/chart.html",'<div init-widget class="app-chart" title="{{hint}}" data-ng-show="show" '+$rootScope.getWidgetStyles()+" ><svg></svg></div>")}]).directive("wmChart",function(PropertiesFactory,$templateCache,WidgetUtilService,CONSTANTS,Variables,QueryBuilder,Utils,$timeout){"use strict";function isPieChart(scope){return"Pie"===scope.type}function isDonutChart(scope){return"Donut"===scope.type}function isPieType(scope){return isPieChart(scope)||isDonutChart(scope)}function isChartDataJSON(scope){return"Column"===scope.type||"Line"===scope.type||"Pie"===scope.type||"Bar"===scope.type||"Donut"===scope.type}function isChartDataArray(scope){return"Cumulative Line"===scope.type||"Area"===scope.type}function isLineTypeChart(type){return"Line"===type||"Area"===type||"Cumulative Line"===type}function isVisuallyGrouped(scope){scope.visuallyGrouped=!1,scope.groupingColumn="",scope.groupingExpression="";var groupingColumnIndex,groupbyColumns=scope.groupby?scope.groupby.split(","):[],yAxisKeys=scope.yaxisdatakey?scope.yaxisdatakey.split(","):[];return scope.groupby&&groupbyColumns.every(function(column,index){return scope.xaxisdatakey!==column&&-1===WM.element.inArray(column,yAxisKeys)?(scope.visuallyGrouped=!0,scope.groupingColumn=column,groupingColumnIndex=index,groupbyColumns.splice(groupingColumnIndex,1),!1):!0}),scope.groupby&&(scope.groupingColumn&&(scope.groupingExpression=scope.groupingColumn),scope.groupingColumn&&groupbyColumns.length&&(scope.groupingExpression+=","),groupbyColumns.length&&(scope.groupingExpression+=groupbyColumns.join())),scope.groupingColumn}function formatData(scope,d,dataType,options){var formattedData,datakey=options.isXaxis&&options.xDataKeyArr&&options.xDataKeyArr.length?options.xDataKeyArr[d]:d;switch(dataType){case"date":return isLineTypeChart(scope.type)?datakey:d3.time.format(options.dateFormat)(new Date(d));case"string":case"year":return datakey;default:return formattedData=d3.format(options.format)(d),"Round to Thousand"===options.numberFormat||"Round to Million"===options.numberFormat||"Round to Billion"===options.numberFormat?formattedData=d3.format(".2f")(d)+tickformats[options.numberFormat].prefix:options.numberFormat||(formattedData=d3.format(".3s")(d)),formattedData}}function constructSampleData(){var i,jsonFormatData=[],pieChartData=[],arrayFormatData=[],pieName="Group";for(i=1;5>i;i+=1)pieChartData.push({x:pieName+i,y:i}),jsonFormatData.push({x:i,y:i}),arrayFormatData.push([i,i]);sampleData.jsonFormat=jsonFormatData,sampleData.arrayFormat=arrayFormatData,sampleData.pieChartFormat=pieChartData}function getSampleData(scope){var dataType;return Utils.isEmptyObject(sampleData)&&constructSampleData(),isPieType(scope)?sampleData.pieChartFormat:(dataType=isChartDataJSON(scope)?"jsonFormat":"arrayFormat",[{values:sampleData[dataType],key:"Default"}])}function getDataType(key,scope){if(scope.chartData){var t=scope.chartData[0];return typeof t[key]}return null}function getColumnType(key,scope){if(scope.dataset&&scope.dataset.propertiesMap){var axisData=WM.element.grep(scope.dataset.propertiesMap.columns,function(obj){return obj.fieldName===key});if(axisData&&axisData.length)return axisData[0].type}return null}function hideOrShowProperties(properties,scope,show){var _widgetProps=scope.widgetProps;properties.forEach(function(prop){_widgetProps[prop].show=show})}function initFormatOptions(scope){hideOrShowProperties(formatOptions,scope,!1)}function configurePropertiesPanel(scope){var chartType=scope.type;hideOrShowProperties(allOptions,scope,!1),hideOrShowProperties(options[chartType],scope,!0)}function displayFormatOptions(scope,key,numberFormat,digits,dateFormat){var type;if(scope.dataset&&(type=scope[key]?getColumnType(scope[key].split(",")[0],scope):null),!isPieType(scope))switch(type){case"integer":case"float":hideOrShowProperties([numberFormat,digits],scope,!0),hideOrShowProperties([dateFormat],scope,!1);break;case"string":hideOrShowProperties([numberFormat,digits,dateFormat],scope,!1);break;case"date":hideOrShowProperties([numberFormat,digits],scope,!1),hideOrShowProperties([dateFormat],scope,!0)}}function setFormatOptions(numberformat,digits){var formater,nodigits=digits.toString();switch(numberformat){case"Display Digits":formater=nodigits+"f";break;case"Decimal Digits":formater="."+nodigits+"f";break;case"Precision":formater="."+nodigits+"g";break;case"Exponential":formater="."+nodigits+"e";break;case"Percentage":formater="."+nodigits+"%";break;case"Round":formater=","+nodigits+"r";break;case"Round Percentage":formater="."+nodigits+"p"}return formater}function isSingleYAxis(scope){return isPieChart(scope)||isDonutChart(scope)?!0:!1}function setYAxisDataKey(scope,options,dataSet){isSingleYAxis(scope)?(scope.widgetProps.yaxisdatakey.widget="list",scope.widgetProps.yaxisdatakey.options=options):scope.$root.$emit("update-multiselect-property",{propertyName:"yaxisdatakey",value:dataSet})
}function modifyAxesOptions(scope){var options;scope.binddataset&&WM.isObject(scope.dataset)?(scope.widgetProps.aggregation.disabled=!1,scope.widgetProps.aggregationcolumn.disabled="none"===scope.aggregation,scope.widgetProps.aggregationcolumn.options=scope.chartData&&WM.isObject(scope.chartData[0])?Object.keys(scope.chartData[0]):[],options=scope.chartData&&WM.isObject(scope.chartData[0])?Object.keys(scope.chartData[0]):[],scope.widgetProps.xaxisdatakey.options=options,setYAxisDataKey(scope,options,scope.binddataset),displayFormatOptions(scope,"xaxisdatakey","xnumberformat","xdigits","xdateformat"),displayFormatOptions(scope,"yaxisdatakey","ynumberformat","ydigits","ydateformat")):scope.binddataset||(scope.widgetProps.xaxisdatakey.options=[],setYAxisDataKey(scope,[],""),scope.widgetProps.aggregationcolumn.options=[],scope.xaxisdatakey=scope.yaxisdatakey="",scope.xaxislabel=scope.yaxislabel="",scope.widgetProps.yaxisdatakey.selectedvalues="",scope.aggregation="none",scope.aggregationcolumn="",scope.widgetProps.aggregationcolumn.disabled=!0,scope.widgetProps.aggregation.disabled=!0)}function isValidAxis(scope){return scope.binddataset?scope.xaxisdatakey&&scope.yaxisdatakey:!0}function isAggregationEnabled(scope){return"none"!==scope.aggregation&&scope.aggregationcolumn&&scope.groupby||scope.groupby||scope.orderby}function isNumberType(dataType){return"integer"===dataType||"float"===dataType||"number"===dataType}function getxAxisVal(scope,dataObj,xKey,index){return isLineTypeChart(scope.type)&&!isNumberType(scope.xAxisDataType)?(-1===scope.xDataKeyArr.indexOf(dataObj[xKey])&&scope.xDataKeyArr.push(dataObj[xKey]),index):dataObj[xKey]}function valueFinder(scope,dataObj,xKey,yKey,index){var dataPoint,xVal=getxAxisVal(scope,dataObj,xKey,index),yVal=parseFloat(dataObj[yKey])||dataObj[yKey];return isChartDataJSON(scope)?dataPoint={x:xVal,y:yVal}:isChartDataArray(scope)&&(dataPoint=[xVal,yVal]),dataPoint}function getChartData(scope){if(scope.sampleData=getSampleData(scope),CONSTANTS.isStudioMode){if(scope.binddataset&&!scope.chartData)return[];if(!scope.chartData||""===scope.chartData)return scope.sampleData}else if(!scope.chartData||!isValidAxis(scope)&&isAggregationEnabled(scope))return scope.sampleData;var yAxisKey,datum=[],xAxisKey=scope.xaxisdatakey,yAxisKeys=scope.yaxisdatakey?scope.yaxisdatakey.split(","):[],dataSet=scope.chartData;return scope.isLiveVariable?(scope.xAxisDataType=getColumnType(xAxisKey,scope),scope.yAxisDataType=getColumnType(yAxisKeys[0],scope)):(scope.xAxisDataType=getDataType(xAxisKey,scope),scope.yAxisDataType=getDataType(yAxisKeys[0],scope)),WM.isArray(dataSet)&&(isPieType(scope)?(yAxisKey=yAxisKeys[0],datum=_.map(dataSet,function(dataObj){return valueFinder(scope,dataObj,xAxisKey,yAxisKey)})):yAxisKeys.forEach(function(yAxisKey){datum.push({values:_.map(dataSet,function(dataObj,index){return valueFinder(scope,dataObj,xAxisKey,yAxisKey,index)}),key:yAxisKey})})),datum}function getAggregationFunction(option){switch(option){case"average":return"AVG";case"count":return"COUNT";case"maximum":return"MAX";case"minimum":return"MIN";case"sum":return"SUM";default:return""}}function getGroupedData(scope,queryResponse){var key,i,chartData=[],groupData={},newValue=[],index=0;for(scope.xAxisDataType=getColumnType(scope.xaxisdatakey,scope),scope.yAxisDataType=getColumnType(scope.yaxisdatakey,scope);0!==queryResponse.length;){for(key=queryResponse[queryResponse.length-1][scope.groupingColumn],newValue.unshift(valueFinder(scope,queryResponse[queryResponse.length-1],scope.xaxisdatakey,scope.yaxisdatakey,0)),queryResponse.splice(queryResponse.length-1,1),i=queryResponse.length-1;i>=0;i-=1)key===queryResponse[i][scope.groupingColumn]&&(newValue.unshift(valueFinder(scope,queryResponse[i],scope.xaxisdatakey,scope.yaxisdatakey,index)),queryResponse.splice(i,1),index+=1);groupData={key:key,values:newValue},chartData.push(groupData),newValue=[],index=0}return chartData}function getOrderbyColumns(orderbyExp){var orderbyColumns=orderbyExp.split(","),columns=[];return orderbyColumns.forEach(function(column){columns.push(column.split(" ")[0])}),columns}function getOrderbyExpression(orderby){var orderbyCols=(orderby?orderby.replace(/:/g," "):"").split(","),trimmedCols="";return orderbyCols=orderbyCols.map(function(col){return col.trim()}),trimmedCols=orderbyCols.join()}function getQueryColumns(scope){var columns=[],groupbyColumns=scope.groupby?scope.groupby.split(","):[],groupbyAliasKeys=[],yAxisKeys=scope.yaxisdatakey?scope.yaxisdatakey.split(","):[],yAxisAliasKeys=[];return groupbyColumns.forEach(function(columnName,index){columnName!==scope.aggregationcolumn&&(groupbyAliasKeys[index]=columnName+" AS "+columnName)}),yAxisKeys.forEach(function(yAxisKey,index){yAxisKey!==scope.aggregationcolumn&&(yAxisAliasKeys[index]=yAxisKey+" AS "+yAxisKey)}),"none"!==scope.aggregation&&scope.aggregationcolumn&&columns.push(getAggregationFunction(scope.aggregation)+"("+scope.aggregationcolumn+") AS "+scope.aggregationcolumn),scope.groupby&&groupbyAliasKeys.forEach(function(column){-1===columns.indexOf(column)&&columns.push(column)}),-1===columns.indexOf(scope.xaxisdatakey+" AS "+scope.xaxisdatakey)&&columns.push(scope.xaxisdatakey+" AS "+scope.xaxisdatakey),yAxisAliasKeys.forEach(function(yAxisKey){-1===columns.indexOf(yAxisKey)&&columns.push(yAxisKey)}),columns}function getAggregatedData(scope,callback){{var query,variableName,variable,columns,groupbyExpression,yAxisKeys=scope.yaxisdatakey?scope.yaxisdatakey.split(","):[],orderbyexpression=(yAxisKeys.indexOf(scope.aggregationcolumn),scope.orderby?getOrderbyExpression(scope.orderby):"");scope.orderby?getOrderbyColumns(orderbyexpression):[]}isVisuallyGrouped(scope),groupbyExpression=scope.groupingExpression||scope.groupby,-1!==scope.binddataset.indexOf("bind:Variables.")?(variableName=scope.binddataset.replace("bind:Variables.",""),variableName=variableName.substr(0,variableName.indexOf("."))):variableName=scope.dataset.variableName,variable=Variables.getVariableByName(variableName),columns=getQueryColumns(scope),query=QueryBuilder.getQuery({tableName:variable.type,columns:columns,filterFields:scope.filterFields,groupby:groupbyExpression,orderby:orderbyexpression}),QueryBuilder.executeQuery({databaseName:variable.liveSource,query:query,page:1,size:500,nativeSql:!1},function(response){var chartData=[];WM.forEach(response.content,function(data){var obj={};"none"!==scope.aggregation&&(obj[scope.aggregationcolumn]=data[scope.aggregationcolumn]),obj[scope.xaxisdatakey]=data[scope.xaxisdatakey],yAxisKeys.forEach(function(yAxisKey){obj[yAxisKey]=data[yAxisKey]}),chartData.push(obj)}),("none"!==scope.aggregation&&scope.aggregationcolumn||scope.orderby||scope.groupby)&&!scope.visuallyGrouped?scope.chartData=chartData:scope.visuallyGrouped&&(scope.chartData=getGroupedData(scope,response.content)),Utils.triggerFn(callback)})}function setTextStyle(property,scope){var charttext=d3.select("#wmChart"+scope.$id+" svg").selectAll("text");switch(property){case"fontsize":case"fontunit":charttext.style({"font-size":scope.fontsize+scope.fontunit});break;case"fontfamily":charttext.style({"font-family":scope.fontfamily});break;case"fontstyle":charttext.style({"font-style":scope.fontstyle});break;case"fontweight":charttext.style({"font-weight":scope.fontweight});break;case"textdecoration":charttext.style({"text-decoration":scope.textdecoration});break;case"color":charttext.style({fill:scope.color})}}function modifyLegendPosition(scope){var legendWrapHeight,legendWrapTransform,coordinates,y,chartId="wmChart"+scope.$id,legendWrap=d3.select("#"+chartId+" .nv-legendWrap"),getChartHeight=function(){var chartHeight=$("#"+chartId+">svg>.nvd3.nv-wrap")[0].getBoundingClientRect().height;return 0===chartHeight&&(chartHeight=$("#"+chartId+">svg")[0].getBoundingClientRect().height-(legendWrapHeight+15)),chartHeight},getAxisLabelHeight=function(axis){var axisLabel=d3.select("#"+chartId+" .nv-"+axis+".nv-axis .nv-axislabel")[0][0];return axisLabel?axisLabel.getBoundingClientRect().height:0};if(legendWrap[0][0]){switch(legendWrapHeight=legendWrap[0][0].getBoundingClientRect().height,legendWrapTransform=legendWrap?legendWrap.attr("transform").replace(/, /g,","):"",coordinates=/translate\(\s*([^\s,)]+)[ ,]([^\s,)]+)/.exec(legendWrapTransform),scope.legendposition){case"Top":y=-(legendWrapHeight+15);break;case"Bottom":scope.offsetbottom>legendWrapHeight&&(y=getChartHeight()-(legendWrapHeight+15),"Bar"!==scope.type&&scope.xaxislabel?y-=getAxisLabelHeight("x"):"Bar"===scope.type&&scope.yaxislabel&&(y-=getAxisLabelHeight("y")));break;default:y=+coordinates[2]}legendWrap.attr("transform","translate("+coordinates[1]+", "+y+")")}}function angle(d){var a=90*(d.startAngle+d.endAngle)/Math.PI-90;return a>90?a-180:a}function plotChart(scope,element){var datum,xFormat,yFormat;(isValidAxis(scope)||CONSTANTS.isRunMode&&isAggregationEnabled(scope))&&(scope.xnumberformat&&scope.xdigits&&(xFormat=setFormatOptions(scope.xnumberformat,scope.xdigits)),scope.ynumberformat&&scope.ydigits?yFormat=setFormatOptions(scope.ynumberformat,scope.ydigits):"Cumulative Line"===scope.type&&(yFormat=setFormatOptions("Percentage","2")),scope.chartData=scope.onTransform&&scope.onTransform({$scope:scope})||scope.chartData,datum=scope.visuallyGrouped&&CONSTANTS.isRunMode&&!isPieType(scope)?scope.chartData:getChartData(scope),datum&&nv.addGraph(function(){if(element[0].getBoundingClientRect().height){var chart,xDivider,yDivider,pieLabels,pieGroups,angleArray,xnumberformat=scope.xnumberformat,ynumberformat=scope.ynumberformat;switch(element.find("svg").html(""),scope.type){case"Column":chart=nv.models.multiBarChart().x(function(d){return d.x}).y(function(d){return d.y}).staggerLabels(scope.staggerlabels).reduceXTicks(scope.reducexticks).rotateLabels(0).showControls(scope.showcontrols).transitionDuration(350).tooltips(scope.tooltips).groupSpacing(scope.barspacing);break;case"Cumulative Line":chart=nv.models.cumulativeLineChart().x(function(d){return d[0]}).y(function(d){return d[1]/100}).useInteractiveGuideline(!0).showControls(scope.showcontrols).tooltips(scope.tooltips);break;case"Line":chart=nv.models.lineChart().useInteractiveGuideline(!0).tooltips(scope.tooltips);break;case"Area":chart=nv.models.stackedAreaChart().x(function(d){return d[0]}).y(function(d){return d[1]}).clipEdge(!0).showControls(scope.showcontrols).useInteractiveGuideline(!0).tooltips(scope.tooltips);break;case"Bar":chart=nv.models.multiBarHorizontalChart().x(function(d){return d.x}).y(function(d){return d.y}).showControls(scope.showcontrols).showValues(scope.showvalues);break;case"Pie":case"Donut":chart=nv.models.pieChart().x(function(d){return d.x}).y(function(d){return d.y}).tooltips(scope.tooltips).showLabels(scope.showlabels).labelType(scope.labeltype).labelThreshold(.04),isDonutChart(scope)?chart.donut(!0).donutRatio(scope.donutratio).donutLabelsOutside(scope.showlabelsoutside):chart.pieLabelsOutside(scope.showlabelsoutside)}return chart.showLegend(scope.showlegend).margin({top:scope.offsettop,right:scope.offsetright,bottom:scope.offsetbottom,left:scope.offsetleft}).color(themes[scope.theme]),scope.xaxislabel=scope.xaxislabel||scope.xaxisdatakey,scope.yaxislabel=scope.yaxislabel||scope.yaxisdatakey,isPieType(scope)||(xnumberformat&&scope.xAxisDataType&&"date"!==scope.xAxisDataType&&"string"!==scope.xAxisDataType&&(xDivider=tickformats[xnumberformat]&&tickformats[xnumberformat].divider||0,xDivider&&chart.x(function(d){return d.x/xDivider})),ynumberformat&&scope.yAxisDataType&&"date"!==scope.yAxisDataType&&"string"!==scope.yAxisDataType&&(yDivider=tickformats[ynumberformat]&&tickformats[ynumberformat].divider||0,yDivider&&chart.y(function(d){return d.y/yDivider})),chart.xAxis.axisLabel(scope.xaxislabel).axisLabelDistance(scope.xaxislabeldistance).tickFormat(function(d){return formatData(scope,d,scope.xAxisDataType,{dateFormat:scope.xdateformat,numberFormat:xnumberformat,format:xFormat,isXaxis:!0,xDataKeyArr:scope.xDataKeyArr})}),chart.yAxis.axisLabel(scope.yaxislabel).axisLabelDistance(scope.yaxislabeldistance).tickFormat(function(d){return formatData(scope,d,scope.yAxisDataType,{dateFormat:scope.ydateformat,numberFormat:ynumberformat,format:yFormat,isXaxis:!1,xDataKeyArr:scope.xDataKeyArr})})),datum.length<1&&chart.noData("Loading data..."),d3.select("#wmChart"+scope.$id+" svg").datum(datum).call(chart),setTextStyle("fontsize",scope),setTextStyle("fontfamily",scope),setTextStyle("fontstyle",scope),setTextStyle("fontweight",scope),setTextStyle("textdecoration",scope),setTextStyle("color",scope),modifyLegendPosition(scope),scope.showlabelsoutside||!isDonutChart(scope)&&!isPieChart(scope)||(chart=d3.select("#wmChart"+scope.$id+" svg"),pieLabels=chart.select(".nv-pieLabels").selectAll(".nv-label"),pieGroups=chart.select(".nv-pie").selectAll(".nv-slice"),angleArray=[],pieGroups&&pieGroups.length&&(pieGroups.each(function(){d3.select(this).attr("transform",function(d){angleArray.push(angle(d))})}),pieLabels.each(function(d,i){var group=d3.select(this);WM.element(group[0][0]).find("text").attr("transform","rotate("+angleArray[i]+")")}))),CONSTANTS.isRunMode&&nv.utils.windowResize(function(){if(element[0].getBoundingClientRect().height)chart.update();else{var parent=element.parents(".app-accordion-panel, .tab-pane").isolateScope();parent&&(parent.initialized=!1)}}),chart}}))}function plotChartInRun(scope,element){(scope.filterFields||isAggregationEnabled(scope))&&scope.binddataset&&isValidAxis(scope)&&!isPieType(scope)?getAggregatedData(scope,function(){plotChart(scope,element)}):plotChart(scope,element)}function propertyChangeHandler(scope,element,key,newVal){switch(key){case"dataset":scope.xDataKeyArr=[],newVal.filterFields&&(scope.filterFields=newVal.filterFields);var variableName,variableObj;-1!==scope.binddataset.indexOf("bind:Variables.")?(variableName=scope.binddataset.replace("bind:Variables.",""),variableName=variableName.substr(0,variableName.indexOf("."))):variableName=scope.dataset.variableName,variableObj=Variables[variableName],scope.isLiveVariable=variableObj&&"wm.LiveVariable"===variableObj.category,scope.chartData=scope.isLiveVariable?newVal&&(newVal.data||""):newVal,!WM.isArray(scope.chartData)&&WM.isObject(scope.chartData)&&(scope.chartData=[scope.chartData]),CONSTANTS.isStudioMode&&modifyAxesOptions(scope),WM.isObject(newVal)&&(scope.isLiveVariable&&newVal.data&&newVal.data.length||newVal.length)&&(CONSTANTS.isStudioMode?_plotChart(scope,element):scope.binddataset&&_plotChart(scope,element));break;case"xaxisdatakey":CONSTANTS.isStudioMode&&scope.chartReady&&(displayFormatOptions(scope,"xaxisdatakey","xnumberformat","xdigits","xdateformat"),_plotChart(scope,element));break;case"yaxisdatakey":CONSTANTS.isStudioMode&&scope.chartReady&&(scope.widgetProps.yaxisdatakey.selectedvalues=newVal,displayFormatOptions(scope,"yaxisdatakey","ynumberformat","ydigits","ydateformat"),_plotChart(scope,element));break;case"type":CONSTANTS.isStudioMode&&scope.chartReady&&(isSingleYAxis(scope)?(scope.widgetProps.yaxisdatakey.widget="list",scope.binddataset&&(scope.widgetProps.yaxisdatakey.options=scope.chartData&&WM.isObject(scope.chartData[0])?Object.keys(scope.chartData[0]):[])):(scope.widgetProps.yaxisdatakey.widget="multiselect",scope.binddataset&&$timeout(function(){scope.$root.$emit("update-multiselect-property",{propertyName:"yaxisdatakey",value:scope.binddataset})},5)),configurePropertiesPanel(scope),_plotChart(scope,element));break;case"height":case"width":case"show":case"xaxislabel":case"yaxislabel":case"xnumberformat":case"xdigits":case"xdateformat":case"ynumberformat":case"ydigits":case"ydateformat":case"showlegend":case"showvalues":case"showlabels":case"showcontrols":case"staggerlabels":case"reducexticks":case"offsettop":case"offsetbottom":case"offsetright":case"offsetleft":case"barspacing":case"xaxislabeldistance":case"yaxislabeldistance":case"theme":case"labeltype":case"donutratio":case"showlabelsoutside":CONSTANTS.isStudioMode&&scope.chartReady&&_plotChart(scope,element);break;case"aggregation":case"aggregationcolumn":CONSTANTS.isStudioMode&&scope.chartReady&&modifyAxesOptions(scope);break;case"groupby":CONSTANTS.isStudioMode&&scope.chartReady&&(scope.widgetProps.groupby.selectedvalues=newVal,modifyAxesOptions(scope),isVisuallyGrouped(scope));break;case"orderby":CONSTANTS.isStudioMode&&scope.chartReady&&(scope.widgetProps.orderby.selectedvalues=newVal);break;case"fontsize":case"fontunit":case"color":case"fontfamily":case"fontweight":case"fontstyle":case"textdecoration":CONSTANTS.isStudioMode&&scope.chartReady&&setTextStyle(key,scope);break;case"legendposition":CONSTANTS.isStudioMode&&modifyLegendPosition(scope)}}var _plotChart,widgetProps=PropertiesFactory.getPropertiesOf("wm.chart",["wm.base"]),themes={Terrestrial:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Annabelle:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Azure:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],Retro:["#0ca7a1","#ffa615","#334957","#acc5c2","#988f90","#8accc9","#515151","#f27861","#36c9fd","#794668","#0f709d","#0d2738","#44be78","#4a1839","#6a393f","#557d8b","#6c331c","#1c1c1c","#861500","#09562a"],Mellow:["#f0dcbf","#88c877","#aeb918","#2e2c23","#ddddd2","#dfe956","#4c963b","#5d3801","#e1eec3","#cd8472","#fcfab3","#9a4635","#9295ad","#2e3f12","#565677","#557d8b","#4f4d02","#0c0c1b","#833324","#24120e"],Orient:["#a80000","#cc6c3c","#f0e400","#000084","#fccc6c","#009c6c","#cc309c","#78cc00","#fc84e4","#48e4fc","#4878d8","#186c0c","#606060","#a8a8a8","#000000","#d7d7d7","#75a06e","#190d0b","#888888","#694b84"],GrayScale:["#141414","#353535","#5b5b5b","#848484","#a8a8a8","#c3c3c3","#e0e0e0","#c8c8c8","#a5a5a5","#878787","#656565","#4e4e4e","#303030","#1c1c1c","#4f4f4f","#3b3b3b","#757575","#606060","#868686","#c1c1c1"],Flyer:["#3f454c","#5a646e","#848778","#cededf","#74c4dd","#0946ed","#380bb1","#000ff0","#f54a23","#1db262","#bca3aa","#ffa500","#a86b32","#63a18c","#56795e","#934343","#b75f5f","#752d2d","#4e1111","#920606"]},options={Column:["showcontrols","staggerlabels","reducexticks","barspacing","xaxislabel","yaxislabel","yaxislabeldistance"],Line:["xaxislabel","yaxislabel","yaxislabeldistance"],Area:["showcontrols","xaxislabel","yaxislabel","yaxislabeldistance"],"Cumulative Line":["showcontrols","xaxislabel","yaxislabel","yaxislabeldistance"],Bar:["showvalues","showcontrols","xaxislabel","yaxislabel","xaxislabeldistance"],Pie:["showlabels","labeltype","showlabelsoutside"],Donut:["showlabels","labeltype","donutratio","showlabelsoutside"]},allOptions=["showvalues","showlabels","showcontrols","useinteractiveguideline","staggerlabels","reducexticks","barspacing","labeltype","donutratio","showlabelsoutside","xaxislabel","yaxislabel","xaxislabeldistance","yaxislabeldistance"],tickformats={"Round to Thousand":{prefix:"K",divider:1e3},"Round to Million":{prefix:"M",divider:1e6},"Round to Billion":{prefix:"B",divider:1e9}},formatOptions=["xnumberformat","xdigits","xdateformat","xaxislabeldistance","ynumberformat","ydigits","ydateformat","yaxislabeldistance"],sampleData={},notifyFor={dataset:!0,xaxisdatakey:!0,yaxisdatakey:!0,type:!0,height:!0,width:!0,show:!0,xaxislabel:!0,yaxislabel:!0,xnumberformat:!0,xdigits:!0,xdateformat:!0,ynumberformat:!0,ydigits:!0,ydateformat:!0,showlegend:!0,showvalues:!0,showlabels:!0,showcontrols:!0,staggerlabels:!0,reducexticks:!0,offsettop:!0,offsetbottom:!0,offsetright:!0,offsetleft:!0,barspacing:!0,xaxislabeldistance:!0,yaxislabeldistance:!0,theme:!0,labeltype:!0,donutratio:!0,showlabelsoutside:!0,aggregation:!0,aggregationcolumn:!0,groupby:!0,orderby:!0,fontsize:!0,fontunit:!0,color:!0,fontfamily:!0,fontweight:!0,fontstyle:!0,textdecoration:!0,legendposition:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onTransform:"&"},template:$templateCache.get("template/widget/form/chart.html"),compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){scope.chartReady=!1,element.attr("id","wmChart"+scope.$id),initFormatOptions(scope),_plotChart=CONSTANTS.isRunMode?plotChartInRun:plotChart,CONSTANTS.isRunMode&&!scope.binddataset&&_plotChart(scope,element),CONSTANTS.isRunMode&&scope.$watch("scopedataset",function(newVal){scope.chartData=newVal||scope.chartData,scope.chartData&&_plotChart(scope,element)});var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs),scope.chartReady=!0,CONSTANTS.isStudioMode&&(scope.binddataset||(displayFormatOptions(scope,"xaxisdatakey","xnumberformat","xdigits","xdateformat"),displayFormatOptions(scope,"yaxisdatakey","ynumberformat","ydigits","ydateformat"),_plotChart(scope,element)),configurePropertiesPanel(scope),scope.$root.$on("canvas-resize",function(){_plotChart(scope,element)})),scope.redraw=_plotChart.bind(void 0,scope,element)}}}}}),WM.module("wm.widgets.basic").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/datanavigator.html",'<div data-identifier="datanavigator" class="app-datanavigator clearfix" data-ng-show="show" init-widget'+$rootScope.getWidgetStyles()+'><ul class="pagination"><li><a name="first" href="javascript:void(0);" data-ng-click="navigatePage(\'first\', $event)"><<</a></li><li><a name="prev" href="javascript:void(0);" data-ng-click="navigatePage(\'prev\', $event)"><</a></li><li class="pagecount"><span><input type="text" data-ng-model="currentPage" data-ng-keydown="navigatePage(\'index\', $event)" class="form-control app-text"/><label class="app-label"> of {{pageCount}}</label></span></li><li><a name="next" href="javascript:void(0);" data-ng-click="navigatePage(\'next\', $event)">></a></li><li><a name="last" href="javascript:void(0);" data-ng-click="navigatePage(\'last\', $event)"  data-ng-hide="isDisableLast">>></a><span class="anchor-overlay" data-ng-show="isDisableLast">>></span></li><li data-ng-show="showrecordcount" class="totalcount"><span><label class="app-label">Total Records: {{dataSize}}</label></span></li></ul></div>')}]).directive("wmDatanavigator",["PropertiesFactory","$templateCache","WidgetUtilService","Utils","Variables","$rootScope",function(PropertiesFactory,$templateCache,WidgetUtilService,Utils,Variables,$rootScope){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"dataset":scope.setPagingValues(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.datanavigator",["wm.base","wm.base.editors"]),notifyFor={dataset:!0};return{restrict:"E",scope:{onEnterKeyPress:"&",onSetRecord:"&"},replace:!0,controller:function($scope){$scope.pageCount=0,$scope.resetPageNavigation=function(){$scope.pageCount=0,$scope.currentPage=1,$scope.dataSize=0},$scope.calculatePagingValues=function(){$scope.pageCount=$scope.dataSize>$scope.maxResults?Math.ceil($scope.dataSize/$scope.maxResults):1,$scope.currentPage=$scope.currentPage||1},$scope.isPagingValuesComputed=function(){return WM.isDefined($scope.maxResults)&&WM.isDefined($scope.dataSize)&&WM.isDefined($scope.currentPage)&&WM.isDefined($scope.pageCount)},$scope.setDefaultPagingValues=function(dataSize,maxResults,currentPage){dataSize||maxResults?($scope.maxResults=maxResults||$scope.maxResults,$scope.dataSize=dataSize||$scope.dataSize,$scope.currentPage=currentPage||$scope.currentPage,$scope.calculatePagingValues()):($scope.pageCount=1,$scope.currentPage=1,$scope.maxResults=dataSize,$scope.dataSize=dataSize)},$scope.setPagingValues=function(newVal){var dataSize,maxResults,currentPage,startIndex,data;$scope.result=newVal,$scope.binddataset&&(-1!==$scope.binddataset.indexOf("bind:Variables.")?($scope.variableName=$scope.binddataset.replace("bind:Variables.",""),$scope.variableName=$scope.variableName.substr(0,$scope.variableName.indexOf("."))):$scope.variableName=newVal.variableName,newVal?(newVal.pagingOptions?($scope.filterFields=newVal.filterFields||{},$scope.isPagingValuesComputed()&&newVal.pagingOptions.relatedDataChange||(dataSize=newVal.pagingOptions.dataSize,-1===dataSize&&($scope.showrecordcount=!1,$scope.isDisableLast=!0),maxResults=newVal.pagingOptions.maxResults,currentPage=newVal.pagingOptions.currentPage,$scope.setDefaultPagingValues(dataSize,maxResults,currentPage))):WM.isString(newVal)||(dataSize=WM.isArray(newVal)?newVal.length:1,maxResults=$scope.pagingOptions&&$scope.pagingOptions.maxResults||dataSize,currentPage=1,$scope.setDefaultPagingValues(dataSize,maxResults,currentPage),startIndex=($scope.currentPage-1)*$scope.maxResults,data=WM.isArray(newVal)?newVal.slice(startIndex,startIndex+$scope.maxResults):newVal,$scope.result=data),$rootScope.$safeApply($scope)):$scope.resetPageNavigation())},$scope.isFirstPage=function(){return 1===$scope.currentPage},$scope.isLastPage=function(){return $scope.currentPage===$scope.pageCount},$scope.goToLastPage=function(isRefresh){$scope.isLastPage()?isRefresh&&$scope.goToPage():($scope.currentPage=$scope.pageCount,$scope.goToPage())},$scope.goToFirstPage=function(isRefresh){$scope.isFirstPage()?isRefresh&&$scope.goToPage():($scope.currentPage=1,$scope.goToPage())},$scope.goToPage=function(callback){$scope.firstRow=($scope.currentPage-1)*$scope.maxResults,$scope.getPageData(callback)},$scope.getPageData=function(callback){var data,startIndex,variable=Variables.getVariableByName($scope.variableName);"wm.LiveVariable"===variable.category?Variables.call("getData",$scope.variableName,{page:$scope.currentPage,isNotTriggerForRelated:!0,filterFields:$scope.filterFields,scope:variable.activeScope},function(data,propertiesMap,relatedData,pagingOptions){$scope.result={data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions},$scope.invokeSetRecord(data),Utils.triggerFn(callback)},WM.noop):(startIndex=($scope.currentPage-1)*$scope.maxResults,data=$scope.dataset.slice(startIndex,startIndex+$scope.maxResults),$scope.result=data,$scope.invokeSetRecord(data),Utils.triggerFn(callback))},$scope.invokeSetRecord=function(data){$scope.onSetrecord?$scope.onSetrecord({$data:data,$index:$scope.currentPage}):$scope.$parent.onSetrecord&&$scope.$parent.onSetrecord({$data:data,$index:$scope.currentPage})},$scope.validateCurrentPage=function(){return $scope.currentPage<0?($scope.goToFirstPage(),!1):$scope.currentPage>$scope.pageCount?($scope.goToLastPage(),!1):!0},$scope.navigatePage=function(index,event,isRefresh,callback){switch(index){case"first":return void $scope.goToFirstPage(isRefresh);case"prev":if($scope.isFirstPage()||!$scope.validateCurrentPage())return;$scope.currentPage-=1;break;case"next":if($scope.isLastPage()||!$scope.validateCurrentPage())return;$scope.currentPage+=1;break;case"last":return void $scope.goToLastPage(isRefresh);case"index":var _action=Utils.getActionFromKey(event);if("ENTER"!==_action)return;if($scope.onEnterkeypress?$scope.onEnterkeypress():$scope.$parent.onEnterkeypress&&$scope.$parent.onEnterkeypress(),!$scope.validateCurrentPage())return}$scope.goToPage(callback)}},template:$templateCache.get("template/widget/datanavigator.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.basic").service("wmToaster",["toaster",function(toaster){"use strict";var _showToaster=function(type,title,desc,timeout){(title||desc)&&(WM.element(".toast").hide(),toaster.pop(type,title,desc,timeout))};return{success:function(title,desc){_showToaster("success",title,desc)},error:function(title,desc){_showToaster("error",title,desc)},info:function(title,desc){_showToaster("info",title,desc)},warn:function(title,desc){_showToaster("warning",title,desc)},show:function(type,title,desc,timeout){_showToaster(type,title,desc,timeout)}}}]),WM.module("wm.widgets.dialog").constant("LOCAL_CONSTANTS",{DEFAULT_DIALOG_HEADER_ICON_SIZE:"16px"}).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/dialog.html",'<div class="app-dialog" init-widget data-ng-show="show"  data-ng-style="{width: width, height: height}" wmtransclude> </div>'),$templateCache.put("template/widget/dialog/dialog-header.html",'<div data-identifier="dialog-header" class="app-dialog-header" init-widget><h3 class="app-dialog-title"> <i class="{{iconclass ? (\'wm-icon24 \' + iconclass) : (\'glyphicon glyphicon-\' + iconname)}}" data-ng-style="{width:iconwidth, height:iconheight, margin:iconmargin}"></i> {{caption}}</h3><div class="app-dialog-close" data-ng-click="hideDialog()"> </div></div>'),$templateCache.put("template/widget/dialog/design.html",'<div class="app-dialog-body"data-ng-style="{height: height}" data-identifier="dialog-content" init-widget wmtransclude></div>'),$templateCache.put("template/widget/dialog/dialog-footer.html",'<div class="app-dialog-footer" data-identifier="actions" init-widget wmtransclude></div>')}]).directive("wmDialog",["PropertiesFactory","WidgetUtilService","DialogService","$rootScope","$templateCache","$compile","CONSTANTS",function(PropertiesFactory,WidgetUtilService,DialogService,$rootScope,$templateCache,$compile,CONSTANTS){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"height":scope.content&&(scope.content[key]=parseInt(.6*newVal,10));break;case"iconname":case"iconwidth":case"iconheight":case"iconmargin":case"iconclass":scope.header[key]=newVal;break;case"title":scope.header.caption=newVal}}var id,transcludedContent="",widgetProps=PropertiesFactory.getPropertiesOf("wm.designdialog",["wm.basicdialog","wm.base"]),notifyFor={height:!0,iconname:!0,iconwidth:!0,iconheight:!0,iconmargin:!0,iconclass:!0,title:!0};return{restrict:"E",transclude:CONSTANTS.isStudioMode,controller:function($scope){this.dialogtype=$scope.dialogtype},scope:{dialogtype:"@",dialogid:"@"},template:function(template,attrs){if(transcludedContent=template.html(),CONSTANTS.isRunMode){var dialog=template[0].outerHTML.replace("<wm-dialog ","<wm-dialog-container ");return dialog=dialog.replace("</wm-dialog>","</wm-dialog-container>"),transcludedContent=dialog,id=attrs.name,'<script type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/dialog.html")},replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){CONSTANTS.isStudioMode&&element.append($compile(transcludedContent)(scope)),scope=scope||element.isolateScope(),scope.header=element.find("[data-identifier=dialog-header]").isolateScope()||{},scope.content=element.find("[data-identifier=dialog-content]").isolateScope()||{};var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager&&scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmDialogContainer",["$templateCache","PropertiesFactory","WidgetUtilService",function($templateCache,PropertiesFactory,WidgetUtilService){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"height":scope.content&&(scope.content[key]=parseInt(.6*newVal,10));break;case"iconname":case"iconwidth":case"iconheight":case"iconmargin":case"iconclass":scope.header[key]=newVal;
break;case"title":scope.header.caption=newVal}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.designdialog",["wm.basicdialog","wm.base"]),notifyFor={height:!0,iconname:!0,iconwidth:!0,iconheight:!0,iconmargin:!0,iconclass:!0,title:!0};return{restrict:"E",transclude:!0,controller:function($scope,$element){this.dialogtype=$scope.dialogtype,this.onDialogOk=$scope.onOk,this.onDialogCancel=$scope.onCancel,this.onDialogClose=$scope.onClose,$element.scope().onClose=$scope.onClose},scope:{dialogid:"@",onOk:"&",onClose:"&",onCancel:"&"},template:$templateCache.get("template/widget/dialog/dialog.html"),replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope=scope||element.isolateScope(),scope.header=element.find("[data-identifier=dialog-header]").isolateScope()||{},scope.content=element.find("[data-identifier=dialog-content]").isolateScope()||{};var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmDialogheader",["PropertiesFactory","DialogService","WidgetUtilService","LOCAL_CONSTANTS","$templateCache",function(PropertiesFactory,DialogService,WidgetUtilService,LOCAL_CONSTANTS,$templateCache){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"iconname":scope.iconurl&&""!==newVal&&"_none_"!==newVal?(scope.iconurl="",scope.iconwidth=scope.iconheight=LOCAL_CONSTANTS.DEFAULT_DIALOG_HEADER_ICON_SIZE):scope.iconwidth=scope.iconheight=scope.iconurl||""===newVal||"_none_"===newVal?"":LOCAL_CONSTANTS.DEFAULT_DIALOG_HEADER_ICON_SIZE}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.dialog.dialogheader",["wm.base"]),notifyFor={iconname:!0};return{restrict:"E",replace:!0,controller:"DialogController",scope:{},template:$templateCache.get("template/widget/dialog/dialog-header.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,dialogCtrl){scope.onClose=scope.$parent.onClose,scope.dialogid=element.parent().attr("dialogid");var onCloseEventName=element.parent().attr("on-close"),onPropertyChange=propertyChangeHandler.bind(void 0,scope);scope.hideDialog=function(){dialogCtrl&&dialogCtrl._CloseButtonHandler(onCloseEventName)},onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmDialogcontent",["$templateCache","PropertiesFactory","WidgetUtilService",function($templateCache,PropertiesFactory,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.dialog.dialogcontent",["wm.base"]);return{restrict:"E",replace:!0,require:"?^wmDialog",scope:{},transclude:!0,template:$templateCache.get("template/widget/dialog/design.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmDialogactions",["PropertiesFactory","WidgetUtilService","$templateCache",function(PropertiesFactory,WidgetUtilService,$templateCache){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.dialog.dialogactions",["wm.base"]);return{restrict:"E",replace:!0,transclude:!0,scope:{},template:$templateCache.get("template/widget/dialog/dialog-footer.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.dialog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/alertdialog.html",'<div class="app-dialog app-alert-dialog {{type}}" dialogclass init-widget data-ng-show="show" ><wm-dialogheader iconname={{iconname}} caption={{title}}></wm-dialogheader><div class="app-dialog-body" data-ng-style="{height:height}"><p class="app-dialog-message {{alerttype}}"> {{message}}</p></div><div class="app-dialog-footer"><wm-button  class="btn-primary"  caption={{oktext}} on-click="okButtonHandler()"></wm-button></div></div>')}]).directive("wmAlertdialog",function($templateCache,PropertiesFactory,WidgetUtilService,CONSTANTS){"use strict";function propertyChangeHandler(scope,attrs,key){switch(key){case"message":attrs.notificationdialog&&!CONSTANTS.isRunMode&&(scope.message="Alert Notification Message");break;case"oktext":attrs.notificationdialog&&!CONSTANTS.isRunMode&&(scope.oktext="OK")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.alertdialog",["wm.basicdialog","wm.base","wm.dialog.onOk"]),notifyFor={message:!0,oktext:!0};return{restrict:"E",controller:"DialogController",scope:{dialogid:"@",onOk:"&",onClose:"&"},replace:!0,template:function(template,attrs){if(void 0===template.attr("inscript")&&template.attr("inscript",!1),CONSTANTS.isRunMode&&"false"===template.attr("inscript")){template.attr("inscript",!0);var transcludedContent=template[0].outerHTML,id=attrs.name;return'<script backdrop="static" type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/alertdialog.html")},compile:function(){return{pre:function(scope,element,attrs){scope.widgetProps=WM.copy(widgetProps),attrs.widgetid&&attrs.notificationdialog&&_.forEach(Object.keys(scope.widgetProps),function(propName){"class"!==propName&&(scope.widgetProps[propName].disabled=!0)})},post:function(scope,element,attrs,dialogCtrl){scope.okButtonHandler||(scope.okButtonHandler=function(){dialogCtrl._OkButtonHandler(attrs.onOk)});var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager&&scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}),WM.module("wm.widgets.dialog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/confirmdialog.html",'<div class="app-dialog app-confirm-dialog" dialogclass init-widget data-ng-show="show" ><wm-dialogheader caption={{title}} iconname={{iconname}} iconclass="{{iconclass}}"></wm-dialogheader><div class="app-dialog-body"  data-ng-style="{height:height}"><p class="app-dialog-message {{messageclass}}"> {{message}}</p></div><div class="app-dialog-footer"><wm-button class="btn-secondary" caption={{canceltext}} on-click="cancelButtonHandler()"></wm-button><wm-button  class="btn-primary"  caption={{oktext}} on-click="okButtonHandler()"></wm-button></div> </div>')}]).directive("wmConfirmdialog",function($templateCache,PropertiesFactory,WidgetUtilService,CONSTANTS){"use strict";function propertyChangeHandler(scope,attrs,key){switch(key){case"message":attrs.notificationdialog&&!CONSTANTS.isRunMode&&(scope.message="Confirm Notification Message");break;case"oktext":attrs.notificationdialog&&!CONSTANTS.isRunMode&&(scope.oktext="OK");break;case"canceltext":attrs.notificationdialog&&!CONSTANTS.isRunMode&&(scope.canceltext="CANCEL")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.confirmdialog",["wm.basicdialog","wm.base","wm.dialog.onOk"]),notifyFor={message:!0,oktext:!0,canceltext:!0};return{restrict:"E",controller:"DialogController",scope:{dialogid:"@",onOk:"&",onClose:"&",onCancel:"&",okParams:"@"},replace:!0,template:function(template,attrs){if(void 0===template.attr("inscript")&&template.attr("inscript",!1),CONSTANTS.isRunMode&&"false"===template.attr("inscript")){template.attr("inscript",!0);var transcludedContent=template[0].outerHTML,id=attrs.name;return'<script backdrop="static" type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/confirmdialog.html")},compile:function(){return{pre:function(scope,element,attrs){scope.widgetProps=WM.copy(widgetProps),attrs.widgetid&&attrs.notificationdialog&&_.forEach(Object.keys(scope.widgetProps),function(propName){"class"!==propName&&(scope.widgetProps[propName].disabled=!0)})},post:function(scope,element,attrs,dialogCtrl){scope.cancelButtonHandler||(scope.cancelButtonHandler=function(){dialogCtrl._CancelButtonHandler(attrs.onCancel)}),scope.okButtonHandler||(scope.okButtonHandler=function(){dialogCtrl._OkButtonHandler(attrs.onOk)}),scope.okbuttonclass&&WM.element(element.find("button")[1]).addClass(scope.okbuttonclass),scope.cancelbuttonclass&&WM.element(element.find("button")[0]).addClass(scope.cancelbuttonclass);var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager&&scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}),WM.module("wm.widgets.dialog").controller("DialogController",function($scope,DialogService,Utils,$rootScope){"use strict";var handleEvent=function(eventName,callBack,callbackParams){return eventName&&-1!==eventName.indexOf("(")?void Utils.triggerFn(callBack,callbackParams):(callBack&&WM.isFunction(callBack())?Utils.triggerFn(callBack(),callbackParams):eventName.indexOf(".show")>-1?DialogService.showDialog(eventName.slice(0,eventName.indexOf(".show"))):eventName.indexOf(".hide")>-1?DialogService.hideDialog(eventName.slice(0,eventName.indexOf(".hide"))):eventName.trim()&&$rootScope.$emit("invoke-service",eventName),void DialogService.hideDialog($scope.dialogid))};this._OkButtonHandler=function(eventName){var eventParams;eventParams=$scope.okParams&&$scope.okParams.indexOf("{")>-1?JSON.parse($scope.okParams):$scope.okParams,eventName=eventName||"",handleEvent(eventName,$scope.onOk,eventParams)},this._CancelButtonHandler=function(eventName){var eventParams;eventParams=$scope.cancelParams&&$scope.cancelParams.indexOf("{")>-1?JSON.parse($scope.cancelParams):$scope.cancelParams,eventName=eventName||"",handleEvent(eventName,$scope.onCancel,eventParams)},this._CloseButtonHandler=function(eventName){eventName=eventName||"",handleEvent(eventName,$scope.onClose)}}),WM.module("wm.widgets.dialog").controller("NotificationDialogController",["$scope","dialogParams","Utils",function($scope,dialogParams,Utils){"use strict";$scope.notification={},dialogParams.notificationDetails&&($scope.notification.text=dialogParams.notificationDetails.text,$scope.notification.okButtonText=dialogParams.notificationDetails.okButtonText||"OK",$scope.notification.cancelButtonText=dialogParams.notificationDetails.cancelButtonText||"CANCEL",$scope.notification.alerttype=dialogParams.notificationDetails.alerttype||"information"),$scope.variableOnOk=function(){Utils.triggerFn(dialogParams.onOk)},$scope.variableOnClose=function(){Utils.triggerFn(dialogParams.onClose)},$scope.variableOnCancel=function(){Utils.triggerFn(dialogParams.onCancel)}}]),WM.module("wm.widgets.dialog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/iframedialog.html",'<div class="app-dialog app-iframe-dialog" dialogclass init-widget data-ng-show="show" ><wm-dialogheader iconname={{iconname}} caption={{title}}></wm-dialogheader><div class="app-dialog-body" data-ng-style="{height:height}"><wm-iframe iframesrc="{{iframeurl}}" wm-widget-overlay height="100%" width="100%"></wm-iframe></div><div class="app-dialog-footer"><wm-button class="btn-primary" caption={{oktext}} on-click="okButtonHandler()"></wm-button></div></div>')}]).directive("wmIframedialog",function($templateCache,PropertiesFactory,WidgetUtilService,CONSTANTS,$sce){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"url":scope.iframeurl=$sce.trustAsResourceUrl(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.iframedialog",["wm.basicdialog","wm.base","wm.dialog.onOk"]),notifyFor={url:!0};return{restrict:"E",controller:"DialogController",scope:{dialogid:"@",onOk:"&",onClose:"&"},replace:!0,template:function(template,attrs){if(void 0===template.attr("inscript")&&template.attr("inscript",!1),CONSTANTS.isRunMode&&"false"===template.attr("inscript")){template.attr("inscript",!0);var transcludedContent=template[0].outerHTML,id=attrs.name;return'<script backdrop="static" type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/iframedialog.html")},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,dialogCtrl){scope.okButtonHandler||(scope.okButtonHandler=function(){dialogCtrl._OkButtonHandler(attrs.onOk)});var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager&&scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}),WM.module("wm.widgets.dialog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/pagedialog.html",'<div class="app-dialog app-page-dialog" dialogclass init-widget data-ng-show="show" page-container><wm-dialogheader iconname={{iconname}} caption={{title}}></wm-dialogheader><div class="app-dialog-body" data-ng-style="{height:height}" page-container-target></div><div class="app-dialog-footer"><wm-button  class="btn-primary" caption={{oktext}} on-click="okButtonHandler()"></wm-button></div></div>')}]).directive("wmPagedialog",function($templateCache,PropertiesFactory,WidgetUtilService,CONSTANTS){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.pagedialog",["wm.basicdialog","wm.base","wm.dialog.onOk"]);return{restrict:"E",controller:"DialogController",scope:{dialogid:"@",onOk:"&",onClose:"&"},replace:!0,template:function(template,attrs){if(void 0===template.attr("inscript")&&template.attr("inscript",!1),CONSTANTS.isRunMode&&"false"===template.attr("inscript")){template.attr("inscript",!0);var transcludedContent=template[0].outerHTML,id=attrs.name;return'<script backdrop="static" type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/pagedialog.html")},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs,dialogCtrl){scope.okButtonHandler||(scope.okButtonHandler=function(){dialogCtrl._OkButtonHandler(attrs.onOk)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}),WM.module("wm.widgets.dialog").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/dialog/logindialog.html",'<div class="app-dialog app-login-dialog" init-widget data-ng-show="show"  data-ng-style="{width: width, height: height}" wmtransclude> </div>'),$templateCache.put("template/widget/dialog/logindialogcontainer.html","<div wmtransclude></div>")}]).directive("wmLogindialog",["PropertiesFactory","WidgetUtilService","DialogService","$templateCache","$compile","CONSTANTS",function(PropertiesFactory,WidgetUtilService,DialogService,$templateCache,$compile,CONSTANTS){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"height":scope.content&&(scope.content[key]=parseInt(.6*newVal,10));break;case"iconname":case"iconwidth":case"iconheight":case"iconmargin":scope.header[key]=newVal;break;case"title":scope.header.caption=newVal}}var id,transcludedContent="",widgetProps=PropertiesFactory.getPropertiesOf("wm.logindialog",["wm.basicdialog","wm.base","wm.base.events.successerror"]),notifyFor={height:!0,iconname:!0,iconwidth:!0,iconheight:!0,iconmargin:!0,title:!0};return{restrict:"E",transclude:CONSTANTS.isStudioMode,scope:{dialogid:"@"},template:function(template,attrs){if(transcludedContent=template.html(),CONSTANTS.isRunMode){var dialogEle=WM.element(template[0].outerHTML),onsuccess=dialogEle.attr("on-success")||"",onerror=dialogEle.attr("on-error")||"",dialog=template[0].outerHTML.replace("<wm-logindialog ","<wm-dialog-container class='app-login-dialog' ");return dialog=dialog.replace("</wm-logindialog>","</wm-dialog-container>"),dialog='<wm-logindialog-container on-success="'+onsuccess+'" on-error="'+onerror+'">'+dialog+"</wm-logindialog-container>",transcludedContent=dialog,id=attrs.name,'<script type="text/ng-template" id="'+id+'">'+transcludedContent+"</script>"}return $templateCache.get("template/widget/dialog/logindialog.html")},replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){CONSTANTS.isStudioMode&&element.append($compile(transcludedContent)(scope)),scope=scope||element.isolateScope(),scope.header=element.find("[data-identifier=dialog-header]").isolateScope()||{},scope.content=element.find("[data-identifier=dialog-content]").isolateScope()||{};var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager&&scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmLogindialogContainer",["$templateCache","PropertiesFactory","WidgetUtilService","SecurityService","BaseService","Utils","CONSTANTS",function($templateCache,PropertiesFactory,WidgetUtilService,SecurityService,BaseService,Utils,CONSTANTS){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.logindialog",["wm.basicdialog","wm.base"]);return{restrict:"E",transclude:!0,scope:{dialogid:"@",onSuccess:"&",onError:"&"},template:$templateCache.get("template/widget/dialog/logindialogcontainer.html"),replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){CONSTANTS.isRunMode&&(scope.doLogin=function(event){scope.loginMessage=scope.$parent.loginMessage=null,SecurityService.appLogin({username:element.find('[name="usernametext"]').val(),password:element.find('[name="passwordtext"]').val()},function(){scope.$root.isUserAuthenticated=!0,element.trigger("success"),scope.onSuccess({$event:event,$scope:scope}),BaseService.executeErrorCallStack()},function(error){scope.loginMessage=scope.$parent.loginMessage={type:"error",caption:scope.errormessage||error},element.trigger("error"),scope.onError({$event:event,$scope:scope})})},element.find(".app-button").unbind("click"),element.find(".app-button").click(scope.doLogin.bind(null)),element.find(".app-textbox").keypress(function(evt){evt.stopPropagation(),"ENTER"===Utils.getActionFromKey(evt)&&scope.doLogin(evt)})),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("ui.bootstrap.popover").provider("$wmPopup",function(){"use strict";var defaultOptions={placement:"bottom",animation:!0,popupDelay:0,autoClose:!0,arrow:!1,isText:!1},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={},popupRegistry=[];this.options=function(value){WM.extend(globalOptions,value)},this.setTriggers=function(triggers){WM.extend(triggerMap,triggers)},this.$get=["$compile","$timeout","$parse","$document","$position","$interpolate","Utils",function($compile,$timeout,$parse,$document,$position,$interpolate,Utils){return function(type,prefix,defaultTriggerShow){function setTriggers(trigger){var show,hide;return show=trigger||options.trigger||defaultTriggerShow,hide=options.trigger?triggerMap[options.trigger]||show:triggerMap[show]||show,{show:show,hide:hide}}function hideAllPopups(){var i,currPopup,currPopupScope,popupCount=popupRegistry.length;for(i=0;popupCount>i;i+=1)currPopup=popupRegistry[i],currPopupScope=currPopup.isolateScope(),currPopupScope.isOpen&&"false"!==currPopupScope.autoClose&&currPopupScope.hidePopup()}var directiveName,triggers,startSym,endSym,directiveTemplate,options=WM.extend({},defaultOptions,globalOptions);return $document.find("body").on("click",function(){hideAllPopups()}),directiveName=Utils.hyphenate(type),triggers=setTriggers(void 0),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),directiveTemplate="<"+directiveName+'-window content="'+startSym+"popup_content"+endSym+'" style-class="'+startSym+"popup_style_class"+endSym+'"placement="'+startSym+"popup_placement"+endSym+'" auto-close="popup_autoClose" identifier="'+startSym+"popup_identifier"+endSym+'" animation="popup_animation()" arrow="popup_arrow()" is-text="popup_isText()" is-open="popup_isOpen"></'+directiveName+"-window>",{restrict:"EA",scope:!0,link:function(scope,element,attrs){function show(){var position,popupWidth,popupHeight,popupPosition,mousePos,tooltipScope;if(hideAllPopups(),scope.popup_content){switch(transitionTimeout&&$timeout.cancel(transitionTimeout),tooltip.css({top:0,left:0,display:"block"}),isTooltipExist||(appendToBody?($body=$body||$document.find("body"),$body.append(tooltip)):element.after(tooltip)),position=options.appendToBody?$position.offset(element):$position.position(element),popupWidth=tooltip.prop("offsetWidth"),popupHeight=tooltip.prop("offsetHeight"),scope.popup_placement){case"mouse":mousePos=$position.mouse(),popupPosition={top:mousePos.y,left:mousePos.x};break;case"right":popupPosition={top:position.top+position.height/2-popupHeight/2,left:position.left+position.width};break;case"bottom":popupPosition={top:position.top+position.height,left:position.left+position.width/2-popupWidth/2};break;case"left":popupPosition={top:position.top+position.height/2-popupHeight/2,left:position.left-popupWidth};break;default:popupPosition={top:position.top-popupHeight,left:position.left+position.width/2-popupWidth/2}}popupPosition.top+="px",popupPosition.left+="px",tooltip.css(popupPosition),scope.popup_isOpen=!0,tooltipScope=tooltip.isolateScope(),tooltipScope&&WM.isFunction(tooltipScope.showCallBack)&&tooltipScope.showCallBack()}}function hide(){scope.popup_isOpen=!1,tooltip.css("display","none"),$timeout.cancel(popupTimeout);var tooltipScope=tooltip.isolateScope();tooltipScope&&WM.isFunction(tooltipScope.hideCallBack)&&tooltipScope.hideCallBack()}function showTooltipBind(event){scope.popup_popupDelay?popupTimeout=$timeout(show,scope.popup_popupDelay):scope.$apply(show),event.stopPropagation()}function hideTooltipBind(event){scope.$apply(function(){hide()}),event.stopPropagation()}function toggleTooltipBind(event){scope.popup_isOpen?hideTooltipBind(event):showTooltipBind(event)}var transitionTimeout,popupTimeout,$body,tooltip=$compile(directiveTemplate)(scope),isTooltipExist=!1,appendToBody=options.appendToBody||!1;scope.hide=function(){scope.$apply(function(){hide()})},tooltip.isolateScope().hidePopup=function(){hide()},scope.popup_isOpen=!1,attrs.$observe(type,function(val){scope.popup_content=val}),attrs.$observe(prefix+"Placement",function(val){scope.popup_placement=val?val.trim():options.placement}),attrs.$observe(prefix+"StyleClass",function(val){scope.popup_style_class=val?val.trim():options.styleClass}),attrs.$observe(prefix+"AutoClose",function(val){scope.popup_autoClose=val?val.trim():options.autoClose}),attrs.$observe(prefix+"Identifier",function(val){scope.popup_identifier=val?val.trim():"popup"+scope.$id}),attrs.$observe(prefix+"Animation",function(val){scope.popup_animation=val?$parse(val):function(){return options.animation}}),attrs.$observe(prefix+"Arrow",function(val){scope.popup_arrow=val?$parse(val):function(){return options.arrow}}),attrs.$observe(prefix+"IsText",function(val){scope.popup_isText=val?$parse(val):function(){return options.isText}}),attrs.$observe(prefix+"PopupDelay",function(val){var delay=parseInt(val,10);scope.popup_popupDelay=isNaN(delay)?options.popupDelay:delay}),attrs.$observe(prefix+"Trigger",function(val){triggers=setTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,function(event){toggleTooltipBind(event)}):(element.bind(triggers.show,function(event){showTooltipBind(event)}),element.bind(triggers.hide,function(event){hideTooltipBind(event)}))}),attrs.$observe(prefix+"AppendToBody",function(val){appendToBody=val?$parse(val)(scope):appendToBody}),appendToBody&&scope.$on("$locationChangeSuccess",function(){scope.popup_isOpen&&hide()}),scope.$on("$destroy",function(){scope.popup_isOpen?hide():tooltip.remove()}),scope.$on("$routeChangeStart",function(){popupRegistry.length=0}),popupRegistry.push(tooltip)}}}}]}).directive("wmPopupWindow",function(){"use strict";var getPopupTemplate=function(){return'<div class="popover {{placement}} {{styleClass}}" data-ng-class="{ in: isOpen, fade: animation() }"><div data-ng-class="{ arrow: arrow() }"></div><div class="alert {{alertClass}}" data-ng-show="showAlert">{{statusMsg}}</div><div class="popover-inner"> <div ng-switch on="isText()">  <div ng-switch-when="true">   <div class="popover-content" data-ng-bind="content"></div>  </div>  <div ng-switch-default>   <div class="popover-content" data-ng-include="content"></div>  </div> </div></div></div></div>'};return{restrict:"E",replace:!0,controller:"PopupController",scope:{content:"@",styleClass:"@",placement:"@",animation:"&",isOpen:"=",arrow:"&",autoClose:"=",identifier:"@",isText:"&"},template:getPopupTemplate(),link:function(scope,element){element.bind("click",function(event){event.stopPropagation()})}}}).directive("wmPopup",["$wmPopup",function($wmPopup){"use strict";return $wmPopup("wmPopup","wmPopup","click")}]),WM.module("wm.widgets.dialog").service("DialogService",["$rootScope","$modal","CONSTANTS","$modalStack",function($rootScope,$modal,CONSTANTS,$modalStack){"use strict";var $modalInstances={},openDialogIds=[],showDialog=function(dialogId,params){if(!(!dialogId||$modalInstances&&$modalInstances[dialogId])){var backdrop,keyboard,windowClass,modal,template=WM.element("script[id="+dialogId+"]"),controller=template.attr("controller"),content=template.html(),dialogContainer=WM.element("<div></div>").html(content);modal=template.attr("modal"),backdrop="true"===modal?"static":"true","static"!==backdrop&&(backdrop=backdrop?"true"===backdrop:!0),keyboard=template.attr("keyboard"),keyboard=keyboard?"true"===keyboard:!0,params||(params={}),windowClass=dialogContainer.find("wm-dialog, wm-alertdialog, wm-confirmdialog, wm-pagedialog, wm-iframedialog, wm-logindialog").attr("dialogclass"),windowClass||(windowClass=(dialogContainer.find("wm-dialog-container").attr("dialogclass")||"")+(template.parent().attr("theme")||"")+" default"),dialogContainer.find("wm-dialog, wm-dialog-container, wm-alertdialog, wm-confirmdialog, wm-pagedialog, wm-iframedialog, wm-logindialog").attr({controller:controller,dialogid:dialogId}),content=dialogContainer.html(),dialogContainer=null,$modalInstances[dialogId]=$modal.open({template:content,controller:controller||dialogId+"Controller",backdrop:backdrop,keyboard:keyboard,resolve:params.resolve||null,scope:params.scope||CONSTANTS.isStudioMode?$rootScope:WM.element("[data-ng-controller='AppController']").scope(),windowClass:windowClass||params.windowClass||""}),$modalInstances[dialogId].result.then(null,function(){$modalInstances[dialogId].scope&&$modalInstances[dialogId].scope.$destroy(),$modalInstances[dialogId]=null}),$modalInstances[dialogId].opened.then(function(){$modalInstances[dialogId].scope=$modalStack.getTop().value.modalScope}),openDialogIds.push(dialogId)}},_closeDialog=function(dialogId){var dialogRef=openDialogIds.indexOf(dialogId);-1!==dialogRef&&openDialogIds.splice(dialogRef,1)},hideDialog=function(dialogId){!dialogId||$modalInstances&&!$modalInstances[dialogId]||($modalInstances[dialogId].close(),$modalInstances[dialogId].scope&&$modalInstances[dialogId].scope.$destroy(),$modalInstances[dialogId]=null,_closeDialog(dialogId))},showConfirmDialog=function(params){var dialogId="global-confirm-dialog",okButtonClass="button-primary",cancelButtonClass="button-secondary";if(!$modalInstances||!$modalInstances[dialogId]){var backdrop,keyboard,windowClass,dialogCaption,template=WM.element("script[id="+dialogId+"]"),controller=params.controller,content=template.html(),dialogContainer=WM.element("<div></div>").html(content);dialogCaption=$rootScope.locale[params.caption]||params.caption,backdrop=params.backdrop||template.attr("backdrop"),"static"!==backdrop&&(backdrop=backdrop?"true"===backdrop:!0),keyboard=params.keyboard||template.attr("keyboard"),keyboard=keyboard?"true"===keyboard:!0,params||(params={}),windowClass=dialogContainer.find("wm-confirmdialog").attr("dialogclass"),windowClass||(windowClass=(dialogContainer.find("wm-dialog-container").attr("dialogclass")||"")+(template.parent().attr("theme")||"")+" default"),dialogContainer.find("wm-confirmdialog").attr({controller:controller,dialogid:dialogId,title:dialogCaption,message:$rootScope.locale[params.content]||params.content,messageclass:params.contentClass||"",iconname:params.iconName||"",iconclass:params.iconClass||"",okbuttonclass:okButtonClass,cancelbuttonclass:cancelButtonClass}),params.onOk&&dialogContainer.find("wm-confirmdialog").attr("on-ok",params.onOk),params.onCancel&&dialogContainer.find("wm-confirmdialog").attr("on-cancel",params.onCancel),params.onClose&&dialogContainer.find("wm-confirmdialog").attr("on-close",params.onClose),params.okParams&&dialogContainer.find("wm-confirmdialog").attr("ok-params",params.okParams),params.cancelParams&&dialogContainer.find("wm-confirmdialog").attr("cancel-params",params.cancelParams),content=dialogContainer.html(),dialogContainer=null,$modalInstances[dialogId]=$modal.open({template:content,controller:controller||dialogId+"Controller",backdrop:backdrop,keyboard:keyboard,resolve:params.resolve||null,scope:params.scope||$rootScope,windowClass:windowClass||params.windowClass||""}),$modalInstances[dialogId].result.then(null,function(){$modalInstances[dialogId]=null}),$modalInstances[dialogId].opened.then(function(){$modalInstances[dialogId].scope=$modalStack.getTop().value.modalScope}),openDialogIds.push(dialogId)}},closeAllDialogs=function(){var index;for(index=0;index<openDialogIds.length;index+=1)hideDialog(openDialogIds[index])};return{hideDialog:hideDialog,showDialog:showDialog,showConfirmDialog:showConfirmDialog,closeAllDialogs:closeAllDialogs}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/button.html",'<button class="btn app-button" init-widget title="{{hint}}" '+$rootScope.getWidgetStyles()+' data-ng-disabled="disabled" data-ng-show="show"><img data-identifier="img" class="button-image-icon" data-ng-src="{{iconurl}}"  data-ng-show="showimage" data-ng-style="{width:iconwidth ,height:iconheight, margin:iconmargin}"/><i class="glyphicon glyphicon-{{iconname}}" data-ng-style="{width:iconwidth, height:iconheight, margin:iconmargin}" data-ng-show="showicon"></i> {{caption}}</button>')}]).directive("wmButton",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"iconname":scope.iconwidth=scope.iconheight=scope.iconurl&&""!==newVal&&"_none_"!==newVal?defaultIconSize:scope.iconurl||""===newVal||"_none_"===newVal?"":defaultIconSize,scope.showicon="_none_"!==scope.iconname&&""!==newVal&&!scope.iconurl;break;case"iconurl":""!==newVal?(scope.iconwidth=scope.iconheight=defaultIconSize,scope.showicon=!1):(scope.iconwidth=scope.iconheight="",scope.showicon=!0),scope.showimage=""!==newVal}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.button",["wm.base","wm.base.editors","wm.base.events","wm.base.events.focus"]),defaultIconSize="16px",notifyFor={iconname:!0,iconurl:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onDblclick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/button.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onDblclick")&&template.attr("data-ng-dblclick","onDblclick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML
},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/button-group.html",'<div class="btn-group app-button-group" wmtransclude init-widget data-ng-class=\'{"btn-group-vertical": vertical}\''+$rootScope.getWidgetStyles("container")+' data-ng-show="show"></div>')}]).directive("wmButtongroup",["$templateCache","PropertiesFactory","WidgetUtilService",function($templateCache,PropertiesFactory,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.buttongroup",["wm.base","wm.base.editors"]);return{restrict:"E",replace:!0,scope:{},template:$templateCache.get("template/widget/form/button-group.html"),transclude:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/menu.html",'<div class="dropdown app-menu" init-widget data-ng-show="show"><button class="btn btn-default dropdown-toggle" '+$rootScope.getWidgetStyles()+'><i class="glyphicon glyphicon-{{iconname}}"></i> {{caption}} <span class="caret"></span></button><ul class="dropdown-menu"><li data-ng-repeat="item in menuItems" data-ng-class="{\'disabled\': item.disabled}"><a><i class="glyphicon glyphicon-{{item.icon}}"></i>{{item.label}}</a></li></ul></div>')}]).directive("wmMenu",["$templateCache","PropertiesFactory","WidgetUtilService","$timeout",function($templateCache,PropertiesFactory,WidgetUtilService,$timeout){"use strict";function getMenuItems(newVal){var menuItems=[];return WM.isString(newVal)?menuItems=newVal.split(",").map(function(item){return{label:item&&item.trim()}}):WM.isArray(newVal)&&(menuItems=newVal.map(WM.isObject(newVal[0])?function(item){return{label:item.label,icon:item.icon,disabled:item.disabled}}:function(item){return{label:item}})),menuItems}function propertyChangeHandler(scope,element,key,newVal){switch(key){case"scopedataset":case"dataset":scope.widgetid||(scope.menuItems=getMenuItems(newVal));break;case"class":element.remove(newVal),element.children().first().addClass(newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.menu",["wm.base","wm.base.editors"]),notifyFor={scopedataset:!0,dataset:!0,"class":!0};return{restrict:"E",scope:{scopedataset:"=?",onSelect:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/menu.html"));return isWidgetInsideCanvas||tAttrs.hasOwnProperty("onSelect")&&template.find(".dropdown-menu > li").attr("data-ng-click","onSelect({$event: $event, $scope: this, $item: $event.target.textContent})"),template[0].outerHTML},replace:!0,compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs),!scope.widgetid&&attrs.hasOwnProperty("scopedataset")&&$timeout(function(){scope.$watch("scopedataset",function(newVal){onPropertyChange("scopedataset",newVal)})},0,!0)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/slider.html",'<div class="app-slider slider" init-widget has-model data-ng-show="show" '+$rootScope.getWidgetStyles()+'><span class="app-slider-value">{{minimum}}</span><input class="range-input" type="range" min="{{minimum}}" title="{{defaultvalue}}" max="{{maximum}}" step="{{step}}" value="{{defaultvalue}}" data-ng-model="defaultvalue" data-ng-disabled="readonly||disabled" data-ng-change="_onChange({$event: $event, $scope: this})" /><span class="app-slider-value">{{maximum}}</span></div>')}]).directive("wmSlider",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.slider",["wm.base","wm.base.editors","wm.base.events.change"]);return{restrict:"E",replace:!0,scope:{onChange:"&"},template:function(tElement,tAttrs){var template=WM.element($templateCache.get("template/widget/form/slider.html"));return template.find("input").attr("name",tAttrs.name),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/checkbox.html",'<input class="checkbox app-checkbox" init-widget has-model title="{{hint}}" type="checkbox"  data-ng-model="_model_" data-ng-readonly="readonly"  data-ng-disabled="disabled"  data-ng-show="show"  maxlength={{maxchars}} data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+" ></input>")}]).directive("wmCheckbox",["PropertiesFactory","$templateCache","WidgetUtilService","CONSTANTS",function(PropertiesFactory,$templateCache,WidgetUtilService,CONSTANTS){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"startchecked":newVal=newVal===!0||"true"===newVal,scope.datavalue=CONSTANTS.isStudioMode?newVal?scope.checkedvalue||"true":"false":newVal?scope.checkedvalue||"true":scope.datavalue;break;case"readonly":scope.disabled=newVal}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.checkbox",["wm.base","wm.booleaneditors","wm.base.editors.abstracteditors"]),notifyFor={startchecked:!0,readonly:!0};return{restrict:"E",scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/checkbox.html"));return tAttrs.checkedvalue&&template.attr("data-ng-true-value",tAttrs.checkedvalue),tAttrs.uncheckedvalue&&template.attr("data-ng-false-value",tAttrs.uncheckedvalue),isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/checkboxset.html",'<ul class="app-checkboxset list-group" init-widget has-model title="{{hint}}"  data-ng-model="_model_" data-ng-show="show"  data-ng-change="_onChange({$event: $event, $scope: this})"'+$rootScope.getWidgetStyles()+" ></ul>")}]).directive("wmCheckboxset",["PropertiesFactory","$templateCache","WidgetUtilService","$compile","CONSTANTS","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService,$compile,CONSTANTS,Utils){"use strict";function getDisplayField(dataSet,changedDisplayField){var displayField=changedDisplayField;return displayField&&"All Fields"!==displayField||(WM.isArray(dataSet)&&dataSet.length>0?displayField=WM.isObject(dataSet[0])?Object.keys(dataSet[0])[0]:"":WM.isObject(dataSet)&&(displayField="")),displayField}function parseDataSet(dataSet,scope,changedDisplayField,changedDataField,useKeys){var parsedData,data=dataSet,dataField=changedDataField,nullKey="",objectKeys=[],displayField=getDisplayField(dataSet,changedDisplayField);return scope.widgetProps.displayfield.value=displayField,WM.isArray(dataSet)?useKeys?(data={},objectKeys=WM.isObject(dataSet[0])?Object.keys(dataSet[0]):[],WM.forEach(objectKeys,function(key){data[key]=key}),parsedData=data):(WM.forEach(dataSet,function(option,index){objectKeys=WM.isObject(option)?Object.keys(option):[],WM.forEach(objectKeys,function(objectKey){null===option[objectKey]&&(nullKey=objectKey,delete option[objectKey]),option[nullKey]&&delete option[nullKey]}),dataSet[index]=option}),dataField&&(data={},"All Fields"!==dataField?WM.forEach(dataSet,function(option){data[option[displayField]]=option[dataField]}):WM.forEach(dataSet,function(option){data[option[displayField]]=option})),parsedData=data):WM.isObject(dataSet)&&(data={},objectKeys=Object.keys(dataSet),WM.forEach(objectKeys,function(key){data[key]=key}),parsedData=data),parsedData}function updatePropertyPanelOptions(dataset,scope){var variableKeys=[];dataset&&(dataset=dataset[0]||dataset,variableKeys=WM.isObject(dataset)&&!WM.isArray(dataset)?Object.keys(dataset||{}):[]),WM.forEach(variableKeys,function(variableKey,index){(null===dataset[variableKey]||WM.isObject(dataset[variableKey]))&&variableKeys.splice(index,1)}),scope.widgetProps.datafield.options=["All Fields"].concat(variableKeys),scope.widgetProps.displayfield.options=[""].concat(variableKeys)}function assignModelValue(scope,dataSet,checkboxValue){var selectedValues=[];checkboxValue?selectedValues.push(checkboxValue):(selectedValues=scope.selectedvalues?scope.selectedvalues.split(","):[],scope._model_=[]),WM.forEach(selectedValues,function(value){value=value.trim(),scope._model_.push(WM.isString(dataSet)?value:WM.isArray(dataSet)?WM.isObject(dataSet[0])?scope.dataObject[value]:value:scope.dataObject[value])})}function createDataKeys(scope,dataSet){WM.isArray(dataSet)?WM.isObject(dataSet[0])?(WM.forEach(dataSet,function(data){scope.dataObject[data.name]="",scope.dataObject[data.name]=data.dataValue}),scope.dataKeys=Object.keys(scope.dataObject)):(scope.dataObject=dataSet,scope.dataKeys=dataSet):WM.isString(dataSet)?(scope.dataObject=dataSet,scope.dataKeys=scope.dataObject.split(",")):WM.isObject(dataSet)&&(scope.dataObject=dataSet,scope.dataKeys=Object.keys(scope.dataObject))}function createWidgetTemplate(scope){var template="";return WM.forEach(scope.dataKeys,function(dataKey){dataKey=dataKey.trim(),template=template+'<li class="list-group-item"><label class="app-checkboxset-label"><input type="checkbox" '+(scope.readonly||scope.disabled?' disabled="disabled" ':"")+' name="'+dataKey+'" data-ng-checked="_model_.indexOf(\''+dataKey+"') !== -1 || _model_ === '"+dataKey+"' || _model_.indexOf(dataObject['"+dataKey+"']) !== -1\"/>"+dataKey+"</label></li>"}),template}function constructCheckboxSet(scope,element,dataSet){var checkboxContainer,template,compiledTemplate,parseData,useKeys=scope.usekeys;scope.dataObject={},scope.dataKeys=[],dataSet=dataSet?dataSet.data||dataSet:[],parseData=WM.isString(scope.dataset||scope.scopedataset)||WM.isArray(scope.dataset||scope.scopedataset)?!1:!0,parseData&&(dataSet=parseDataSet(dataSet,scope,scope.displayfield,scope.datafield,useKeys)),createDataKeys(scope,dataSet),assignModelValue(scope,dataSet),template=createWidgetTemplate(scope),checkboxContainer=element,checkboxContainer.html(""),compiledTemplate=$compile(template)(scope),checkboxContainer.append(compiledTemplate),element.find(".app-checkboxset-label").on("click",function(){var checkedOption,inputElements=element.find("input:checked");scope._model_.length=0,scope.usekeys&&0===inputElements.length&&(scope.selectedvalues=""),inputElements.each(function(){checkedOption=WM.element(this).prop("name"),assignModelValue(scope,dataSet,checkedOption)}),scope.usekeys&&scope._model_.length>0&&(scope.selectedvalues=scope._model_.join(",")),Utils.triggerFn(scope._onChange),scope.$root.$safeApply(scope)})}function propertyChangeHandler(scope,element,key,newVal){var dataSet=scope.dataset||scope.scopedataset;switch(key){case"dataset":scope.widgetid&&newVal&&updatePropertyPanelOptions(newVal.data||newVal,scope),constructCheckboxSet(scope,element,newVal);break;case"displayfield":case"datafield":case"usekeys":case"selectedvalues":constructCheckboxSet(scope,element,dataSet);break;case"readonly":case"disabled":element.find('input[type="checkbox"]').attr("disabled",newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.checkboxset",["wm.base","wm.booleaneditors"]),notifyFor={dataset:!0,displayfield:!0,datafield:!0,usekeys:!0,selectedvalues:!0,readonly:!0,disabled:!0};return{restrict:"E",scope:{scopedataset:"=?",onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&",onReady:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/checkboxset.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.$watch("scopedataset",function(){CONSTANTS.isRunMode&&scope.scopedataset&&constructCheckboxSet(scope,element,scope.scopedataset)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").requires=WM.module("wm.widgets.form").requires.concat(["colorpicker.module"]),WM.module("wm.widgets.form").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("template/widget/form/colorpicker.html",'<div class="input-group app-colorpicker" data-ng-show="show" init-widget has-model><input colorpicker colorpicker-parent="true" class="form-control app-textbox"  data-ng-disabled="disabled" data-ng-readonly="readonly" data-ng-required="required" data-ng-model="_model_" data-ng-change="_onChange({$event: $event, $scope: this})"><span class="input-group-addon" data-ng-style="{backgroundColor:_model_}">&nbsp;</span></div>')}]).directive("wmColorpicker",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.colorpicker",["wm.base","wm.base.events","wm.base.events.focus","wm.base.events.change"]);return{restrict:"E",scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/colorpicker.html")),target=template.children().first();return template.find("input").attr("name",tAttrs.name),isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&target.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&target.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&target.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&target.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&target.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/composite.html","<div class=\"form-group app-composite-widget clearfix\" init-widget data-ng-class=\"{'caption-left': captionposition == 'left','caption-right': captionposition == 'right','caption-top': captionposition == 'top'}\" title=\"{{hint}}\" data-ng-disabled=\"disabled\" data-ng-show=\"show\""+$rootScope.getWidgetStyles("container")+" wmtransclude></div>")}]).directive("wmComposite",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.composite",["wm.base","wm.layouts"]);return{restrict:"E",replace:!0,transclude:!0,scope:{},template:$templateCache.get("template/widget/form/composite.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){if(!scope.widgetid){var inputName,labelEl=element.find("label"),inputEl=element.find("input, select, textarea");1===labelEl.length&&1===inputEl.length&&(inputName=inputEl.attr("name"),inputEl.attr("id",inputName),labelEl.attr("for",inputName))}WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/currency.html",'<div init-widget has-model class="input-group app-currency" data-ng-show="show"><span class="input-group-addon">{{currencysymbol}}</span><input type="number" class="form-control app-textbox app-currency-input" title="{{hint}}"  min={{minvalue}}  max={{maxvalue}}  data-ng-model="_model_" data-ng-readonly="readonly"  data-ng-required="required"  data-ng-disabled="disabled"  maxlength={{maxchars}} data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+' }" ></div>')}]).directive("wmCurrency",["PropertiesFactory","$templateCache","WidgetUtilService","$locale","CURRENCYCONSTANTS","CONSTANTS",function(PropertiesFactory,$templateCache,WidgetUtilService,$locale,CURRENCYCONSTANTS){"use strict";function propertyChangeHandler(scope,key,newVal){switch(key){case"currency":CURRENCYCONSTANTS[newVal]&&(scope.currencysymbol=CURRENCYCONSTANTS[newVal].symbol)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.currency",["wm.base","wm.base.editors.abstracteditors"]),notifyFor={currency:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/currency.html")),target=template.children().last();return target.attr("name",tAttrs.name),isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&target.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&target.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&target.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&target.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&target.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope.$locale=$locale;var onPropertyChange=propertyChangeHandler.bind(void 0,scope);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).constant("CURRENCYCONSTANTS",{USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"",name:"Euro",symbol_native:"",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"..",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lek"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:".",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:".",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:".",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN",name:"Chinese Yuan",symbol_native:"CN",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"",name:"Costa Rican Coln",symbol_native:"",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"K",name:"Czech Republic Koruna",symbol_native:"K",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"..",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"..",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"",name:"British Pound Sterling",symbol_native:"",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH",name:"Ghanaian Cedi",symbol_native:"GH",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"",name:"Israeli New Sheqel",symbol_native:"",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"",name:"Indian Rupee",symbol_native:"",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"..",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Krna",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krnur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"",name:"Japanese Yen",symbol_native:"",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"",name:"South Korean Won",symbol_native:"",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:".",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB",name:"Lebanese Pound",symbol_native:"..",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"..",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"",name:"Nigerian Naira",symbol_native:"",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan Crdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan crdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"..",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"",name:"Philippine Peso",symbol_native:"",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"z",name:"Polish Zloty",symbol_native:"z",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"",name:"Paraguayan Guarani",symbol_native:"",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"..",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:".",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:".",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"..",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY",name:"Syrian Pound",symbol_native:"..",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"",name:"Thai Baht",symbol_native:"",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"..",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Paanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"",name:"Ukrainian Hryvnia",symbol_native:"",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bolvar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolvars"},VND:{symbol:"",name:"Vietnamese Dong",symbol_native:"",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"..",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}}),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";
$templateCache.put("template/widget/form/date.html",'<input class="form-control app-textbox app-dateinput" init-widget has-model datepicker-popup={{datepattern}}  title="{{hint}}"  min=mindate max=maxdate  data-ng-model="_model_" data-ng-readonly="readonly"  data-ng-required="required"  data-ng-disabled="disabled"  data-ng-show="show"  data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+" ></input>")}]).directive("wmDate",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function _onClick(scope,element){scope.readonly&&element.next().find("button").attr("disabled",!0)}var widgetProps=PropertiesFactory.getPropertiesOf("wm.date",["wm.base","wm.base.editors.abstracteditors","wm.base.datetime"]);return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/date.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){scope._onClick=_onClick.bind(void 0,scope,element,attrs),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache){"use strict";$templateCache.put("template/widget/calendar.html",'<div class="form-control app-calendar" init-widget has-model  data-ng-model ="_model_"  data-ng-show = "show"  data-ng-change="_onChange({$event: $event, $scope: this})" > <datepicker init-date show-weeks="true" class="well well-sm"></datepicker></div>')}]).directive("wmCalendar",["$filter","PropertiesFactory","$templateCache","WidgetUtilService",function($filter,PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(element,key,newVal){switch(key){case"disabled":newVal?element.find("button").prop("disabled",!0):element.find("button").removeAttr("disabled")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.calendar",["wm.base","wm.base.editors.abstracteditors","wm.base.datetime"]),notifyFor={disabled:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/calendar.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs),scope.$watch("datavalue",function(){return(!scope.datavalue&&isNaN(Date.parse(scope.datavalue))||0===scope.datavalue)&&(scope._model_=scope.datavalue=new Date),scope._model_=scope.datavalue=$filter("date")(scope.datavalue,scope.datepattern),scope.datavalue});var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/fileupload.html",'<div data-ng-show="show" class="app-fileupload" init-widget '+$rootScope.getWidgetStyles()+' ><div data-ng-show="multiple" class="app-multi-file-upload"><div class="drop-box" drag-files="onFileSelect($files,$event)"><i class="icon" class="icon"/><div class="message"><h4 data-ng-bind="fileuploadtitle"></h4><div><form name="{{multipleFileFormName}}" enctype="multipart/form-data"><input class="file-input" type="file" name="file" on-file-select="onFileSelect($files,$event)" data-ng-attr-accept="{{chooseFilter}}" multiple><a href="javascript:void(0);" class="app-anchor" data-ng-bind="fileuploadmessage"></a></form></div></div></div><div class="app-files-upload-status multiple"></div></div><div class="app-single-file-upload" data-ng-hide="multiple"><div class="app-button-wrapper"><form  name="{{singleFileFormName}}" enctype="multipart/form-data" ><input class="file-input" type="file"  name="file" on-file-select="uploadSingleFile($files)" data-ng-attr-accept="{{chooseFilter}}"><button class="app-button">Upload</button></form></div><div class="app-files-upload-status single"></div></div></div>'),$templateCache.put("template/widget/form/upload-directive.html",'<div class="status"><i class="ext" data-ng-bind="fileExtension"></i><span class="title" data-ng-bind="fileName"></span><span class="size" data-ng-bind="fileSize"></span><div class="progress progress-striped active" data-ng-hide="showStatusMessage"><div class="progress-bar" data-ng-style="{width:progressWidth}"></div></div><span class="upload-status" data-ng-bind="status_messsage" data-ng-show="showStatusMessage"></span><button class="app-icon cancel" data-ng-click="abortUpload()" data-ng-show="isAbortVisible"></button></div>')}]).directive("onFileSelect",["$parse","$timeout",function($parse,$timeout){"use strict";return function(scope,elem,attrs){var fn=$parse(attrs.onFileSelect);elem.bind("change",function(evt){var fileList,i,files=[];if(window.FormData){if(fileList=evt.target.files,null!==fileList.length)for(i=0;i<fileList.length;i+=1)files[i]=fileList.item(i)}else files=[this.value];$timeout(function(){fn(scope,{$files:files,$event:evt})})}),elem.bind("click",function(){this.value=null})}}]).directive("dropAvailable",["$parse","$timeout",function($parse,$timeout){"use strict";return function(scope,elem,attrs){if(document.createElement("span").hasOwnProperty("draggable")){var fn=$parse(attrs.dropAvailable);$timeout(function(){fn(scope)})}}}]).directive("dragFiles",["$parse","$timeout",function($parse,$timeout){"use strict";return function(scope,elem,attrs){var fn,div=document.createElement("div"),dragDropSupport="draggable"in div||"ondragstart"in div&&"ondrop"in div;dragDropSupport&&(fn=$parse(attrs.dragFiles),elem.bind("dragenter",function(evt){evt.preventDefault()}),elem.bind("dragover",function(evt){evt.stopPropagation(),evt.preventDefault(),elem.addClass("file-dragover")}),elem.bind("dragleave",function(){elem.removeClass("file-dragover")}),elem.bind("drop",function(evt){evt.stopPropagation(),evt.preventDefault(),elem.removeClass("file-dragover");var i,files=[],fileList=evt.originalEvent.dataTransfer.files;if(null!==fileList)for(i=0;i<fileList.length;i+=1)files.push(fileList.item(i));$timeout(function(){fn(scope,{$files:files,$event:evt})})}))}}]).directive("uploadDirective",["$templateCache","$rootScope","DialogService","Utils","wmToaster",function($templateCache,$rootScope,DialogService,Utils,wmToaster){"use strict";var UPLOAD_SERVICE="FileUploadDownload.upload?method=uploadFile&relativePath=",UPLOAD_LOCATION="resources/uploads/";return{restrict:"E",template:$templateCache.get("template/widget/form/upload-directive.html"),scope:!0,link:function(scope,element,attrs){function handleEvent(event,eventName,eventCallback){if(-1!==eventName.indexOf("("))eventCallback({$event:event});else{if(eventName.indexOf(".show")>-1)return void DialogService.showDialog(eventName.slice(0,eventName.indexOf(".show")));if(eventName.indexOf(".hide")>-1)return void DialogService.hideDialog(eventName.slice(0,eventName.indexOf(".hide")));$rootScope.$emit("invoke-service",eventName)}}function onProgress(evt){scope.$apply(function(){handleEvent(evt,attrs.onProgress,scope.onProgress),scope.isAbortVisible===!1&&(scope.isAbortVisible=!0),scope.showStatusMessage=!1,scope.progressWidth=Math.round(100*evt.loaded/evt.total)+"%"})}function onFail(evt){scope.$apply(function(){handleEvent(evt,attrs.onError,scope.onError),scope.isAbortVisible=!1,scope.showStatusMessage=!0,scope.status_messsage="Upload Failed"}),scope.multiple===!1&&wmToaster.show("error","File upload failed")}function handleError(evt){onFail(evt)}function onSuccess(evt){if(window.FormData){var response;if(200!==evt.target.status)return void handleError(evt);try{response=JSON.parse(evt.target.response)}catch(e){response=null}if(response&&response.result&&response.result.error)return evt.target.status=500,void handleError(evt)}scope.$apply(function(){handleEvent(evt,attrs.onSuccess,scope.onSuccess),scope.showStatusMessage=!0,scope.status_messsage="Upload Complete",scope.isAbortVisible=!1,scope.filename=scope.fileName,scope.filepath=scope.filePath}),scope.multiple===!1&&wmToaster.show("success","File Uploaded")}function safeAbort(evt){handleEvent(evt,attrs.onAbort,scope.onAbort),scope.isAbortVisible=!1,scope.showStatusMessage=!0,scope.status_messsage="Upload Aborted"}function onAbort(evt){$rootScope.$$phase||scope.$$phase?safeAbort(evt):scope.$apply(function(){safeAbort(evt)})}var xhr;scope.uploadData={file:void 0,uploadPath:void 0},scope.showStatusMessage=!0,scope.status_messsage="Waiting..",scope.isAbortVisible=!1,scope.progressWidth="0%",scope.isAborted=!1,function(){var prefabScope,prefabName,parentPrefab=element.closest(".app-prefab");parentPrefab&&(prefabScope=parentPrefab.isolateScope(),prefabName=prefabScope?prefabScope.prefabname:null),scope.uploadUrl=prefabName?"prefabs/"+prefabName+"/"+UPLOAD_SERVICE:UPLOAD_SERVICE}(),scope.uploadContent=function(newVal){var uploadConfig,fd;if(window.FormData){if(newVal.file&&newVal.uploadPath){if(void 0!==xhr)return;fd=new FormData,fd.append("file",newVal.file,newVal.file.name),xhr=new XMLHttpRequest,xhr.upload.addEventListener("progress",onProgress),xhr.addEventListener("load",onSuccess,null),xhr.addEventListener("error",onFail,null),xhr.addEventListener("abort",onAbort,null),xhr.open("POST",scope.uploadUrl+newVal.destination),xhr.send(fd),scope.fileSize=newVal.file.formattedSize,scope.fileName=newVal.file.name,scope.filePath=UPLOAD_LOCATION+newVal.destination,scope.filePath+="/"===newVal.destination.charAt(newVal.destination.length-1)?scope.fileName:"/"+scope.fileName}}else uploadConfig={url:scope.uploadUrl+newVal.destination,formName:scope.singlefileupload?scope.singleFileFormName:scope.multipleFileFormName},Utils.fileUploadFallback(uploadConfig,onSuccess,onFail),scope.fileSize="",scope.fileName=newVal.file.split("\\").pop(),scope.filePath=newVal.file;scope.fileExtension=scope.fileName.substring(scope.fileName.lastIndexOf(".")+1)},scope.abortUpload=function(){xhr.abort()}}}}]).directive("wmFileupload",["PropertiesFactory","$templateCache","WidgetUtilService","$compile","$timeout","wmToaster","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService,$compile,$timeout,wmToaster,Utils){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.fileupload",["wm.base","wm.base.editors","wm.base.events.successerror"]),selectedUploadTypePath="resources",notifyFor={uploadpath:!0,contenttype:!0,destination:!0};return{restrict:"E",replace:!0,scope:{onSelect:"&",onSuccess:"&",onError:"&",onProgress:"&",onAbort:"&"},template:$templateCache.get("template/widget/form/fileupload.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){function propertyChangeHandler(key,newVal){switch(key){case"uploadpath":scope.changeServerUploadPath(newVal);break;case"contenttype":changeFilter(newVal);break;case"destination":scope.destination=newVal}}scope.chooseFilter="",scope.singleFileFormName=scope.name+"-single-fileupload",scope.multipleFileFormName=scope.name+"-multiple-fileupload";var FILESIZE_MB=1048576,FILESIZE_KB=1024,MAXFILEUPLOAD_SIZE=31457280,MAX_FILE_UPLOAD_FORMATTED_SIZE="30MB",changeFilter=function(choosen){if(choosen.indexOf("all")>-1)scope.chooseFilter="";else{var filters=[];choosen.indexOf("image")>-1&&filters.push("image/*"),choosen.indexOf("audio")>-1&&filters.push("audio/*"),choosen.indexOf("video")>-1&&filters.push("video/*"),filters.length>0&&(scope.chooseFilter=filters.join())}},getFileSize=function(fileSize){var size;return size=fileSize>FILESIZE_MB?(Math.round(100*fileSize/FILESIZE_MB)/100).toString()+"MB":(Math.round(100*fileSize/FILESIZE_KB)/100).toString()+"KB"},uploadFile=function($file,statusContainer){var uploadWidget,compiled,widgetScope,fileSize,uploadData={};return scope.isValidFile($file.name)?(fileSize=$file.size?getFileSize($file.size):"",$file.size>MAXFILEUPLOAD_SIZE?void wmToaster.show("error","FILE SIZE EXCEEDED LIMIT. MAX UPLOAD SIZE IS "+MAX_FILE_UPLOAD_FORMATTED_SIZE):(uploadWidget=WM.element("<upload-directive  on-success="+attrs.onSuccess+" on-abort="+attrs.onAbort+" on-select="+attrs.onSelect+" on-progress="+attrs.onProgress+"></upload-directive>"),WM.element(statusContainer).append(uploadWidget),compiled=$compile(uploadWidget)(scope),widgetScope=compiled.scope(),$file.formattedSize=fileSize,uploadData={file:$file,uploadPath:selectedUploadTypePath,destination:scope.destination||""},widgetScope.uploadData=uploadData,void widgetScope.uploadContent(uploadData))):void wmToaster.show("error","Expected a "+scope.contenttype+" file")};propertyChangeHandler.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,propertyChangeHandler),scope.changeServerUploadPath=function(path){selectedUploadTypePath=path},scope.onFileSelect=function($files,$event){WM.extend($event.$files||{},$files),$timeout(function(){scope.onSelect({$event:$event})});var index,statusEle;for(statusEle=element.find(".app-files-upload-status.multiple"),index=0;index<$files.length;index+=1)uploadFile($files[index],statusEle)},scope.isValidFile=function(filename){var isValid;switch(scope.contenttype){case"image":isValid=Utils.isImageFile(filename);break;case"audio":isValid=Utils.isAudioFile(filename);break;case"video":isValid=Utils.isVideoFile(filename);break;case"all":isValid=!0}return isValid},scope.uploadSingleFile=function($file){var statusEle=element.find(".app-files-upload-status.single");statusEle.html(""),uploadFile($file[0],statusEle)},WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/radio.html",'<input class="radio app-radiobutton" init-widget has-model  value="{{checkedvalue}}" title="{{hint}}" type="radio" data-ng-model="_model_" data-ng-readonly="readonly"  data-ng-required="required"  data-ng-disabled="disabled"  data-ng-show="show"  maxlength={{maxchars}} data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+" ></input>")}]).directive("wmRadio",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(scope,attrs,key,newVal){switch(key){case"height":scope.lineheight="undefined"===scope.height||""===scope.height?"24px":parseInt(scope.height,10)-(parseInt(scope.bordertop,10)+parseInt(scope.borderbottom,10)+parseInt(scope.paddingtop,10)+parseInt(scope.paddingbottom,10))+"px";break;case"radiogroup":attrs.$set("name",newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.radio",["wm.base","wm.booleaneditors","wm.base.editors.abstracteditors"]),notifyFor={height:!0,radiogroup:!0};return{restrict:"E",scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/radio.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/radioset.html",'<ul class="app-radioset list-group" init-widget has-model title="{{hint}}"  data-ng-model="_model_" data-ng-show="show" data-ng-change="_onChange({$event: $event, $scope: this})"'+$rootScope.getWidgetStyles()+" ></ul>")}]).directive("wmRadioset",["PropertiesFactory","$templateCache","WidgetUtilService","$compile","CONSTANTS","Utils",function(PropertiesFactory,$templateCache,WidgetUtilService,$compile,CONSTANTS,Utils){"use strict";function getDisplayField(dataSet,changedDisplayField){var displayField=changedDisplayField;return displayField&&"All Fields"!==displayField||(WM.isArray(dataSet)&&dataSet.length>0?displayField=WM.isObject(dataSet[0])?Object.keys(dataSet[0])[0]:"":WM.isObject(dataSet)&&(displayField="")),displayField}function parseDataSet(dataSet,scope,changedDisplayField,changedDataField,useKeys){var parsedData,data=dataSet,nullKey="",objectKeys=[],dataField=changedDataField,displayField=getDisplayField(dataSet,changedDisplayField);return scope.widgetProps.displayfield.value=displayField,WM.isArray(dataSet)&&(useKeys?(data={},objectKeys=WM.isObject(dataSet[0])?Object.keys(dataSet[0]):[],WM.forEach(objectKeys,function(key){data[key]=key}),parsedData=data):(WM.forEach(dataSet,function(option,index){var optionKeys=WM.isObject(option)?Object.keys(option):[];WM.forEach(optionKeys,function(optionKey){null===option[optionKey]&&(nullKey=optionKey,delete option[optionKey]),option[nullKey]&&delete option[nullKey]}),dataSet[index]=option}),dataField&&(data={},"All Fields"!==dataField?WM.forEach(dataSet,function(option){data[option[displayField]]=option[dataField]}):WM.forEach(dataSet,function(option){data[option[displayField]]=option})),parsedData=data)),parsedData}function updatePropertyPanelOptions(dataset,scope){var variableKeys=[];dataset&&(dataset=dataset[0]||dataset,variableKeys=WM.isObject(dataset)&&!WM.isArray(dataset)?Object.keys(dataset||{}):[]),WM.forEach(variableKeys,function(variableKey,index){(null===dataset[variableKey]||WM.isObject(dataset[variableKey]))&&variableKeys.splice(index,1)}),scope.widgetProps.datafield.options=["All Fields"].concat(variableKeys),scope.widgetProps.displayfield.options=[""].concat(variableKeys)}function assignModelValue(scope,dataSet,radioValue){var selectedValue;selectedValue=radioValue?radioValue:scope.selectedvalue||"",scope._model_=WM.isString(dataSet)?selectedValue:WM.isArray(dataSet)?WM.isObject(dataSet[0])?scope.dataObject[selectedValue]:selectedValue:scope.dataObject[selectedValue]}function createDataKeys(scope,dataSet){WM.isArray(dataSet)?WM.isObject(dataSet[0])?(WM.forEach(dataSet,function(data){scope.dataObject[data.name]=data.dataValue}),scope.dataKeys=Object.keys(scope.dataObject)):(scope.dataObject=dataSet,scope.dataKeys=dataSet):WM.isString(dataSet)?(scope.dataObject=dataSet,scope.dataKeys=dataSet.split(",")):WM.isObject(dataSet)&&(scope.dataObject=dataSet,scope.dataKeys=Object.keys(scope.dataObject))}function createWidgetTemplate(scope){var template="";return WM.forEach(scope.dataKeys,function(dataKey){dataKey=dataKey.trim(),template=template+'<li class="list-group-item"><label class="app-radioset-label"><input type="radio" '+(scope.readonly||scope.disabled?' disabled="disabled" ':"")+'name="app-radioset-group" id="'+dataKey+'" ng-checked="_model_ === \''+dataKey+"' || _model_ === dataObject['"+dataKey+"']\" />"+dataKey+"</label></li>"}),template}function constructRadioSet(scope,element,dataSet){var radioContainer,parseData,template,compiledTemplate,useKeys=scope.usekeys;scope.dataObject={},scope.dataKeys=[],dataSet=dataSet?dataSet.data||dataSet:[],parseData=WM.isString(scope.dataset||scope.scopedataset)||WM.isArray(scope.dataset||scope.scopedataset)?!1:!0,parseData&&(dataSet=parseDataSet(dataSet,scope,scope.displayfield,scope.datafield,useKeys)),createDataKeys(scope,dataSet),assignModelValue(scope,dataSet),template=createWidgetTemplate(scope),radioContainer=element,radioContainer.html(""),compiledTemplate=$compile(template)(scope),radioContainer.append(compiledTemplate),element.find(".app-radioset-label").on("click",function(){if(!scope.disabled&&!scope.readonly){var radioOption;radioOption=WM.element(this).text(),assignModelValue(scope,dataSet,radioOption),scope.usekeys&&(scope.selectedvalue=scope._model_),Utils.triggerFn(scope._onChange),scope.$root.$safeApply(scope)}})}function propertyChangeHandler(scope,element,key,newVal){var dataSet=scope.dataset||scope.scopedataset;switch(key){case"dataset":scope.widgetid&&newVal&&updatePropertyPanelOptions(newVal.data||newVal,scope),constructRadioSet(scope,element,newVal);break;case"displayfield":case"datafield":case"usekeys":case"selectedvalue":constructRadioSet(scope,element,dataSet);break;case"readonly":case"disabled":element.find('input[type="radio"]').attr("disabled",newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.radioset",["wm.base","wm.booleaneditors"]),notifyFor={dataset:!0,displayfield:!0,datafield:!0,usekeys:!0,selectedvalue:!0,readonly:!0,disabled:!0};return{restrict:"E",scope:{scopedataset:"=?",onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},replace:!0,template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/radioset.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.$watch("scopedataset",function(){CONSTANTS.isRunMode&&scope.scopedataset&&constructRadioSet(scope,element,scope.scopedataset)}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/select.html",'<select init-widget has-model class="form-control app-select" multiple data-ng-model="modelProxy" title="{{hint}}" data-ng-show="show" data-ng-disabled="disabled" data-ng-required="required" data-ng-change="onChangeProxy({$event: $event, $scope: this})"'+$rootScope.getWidgetStyles()+' data-ng-options="key as $root.locale[value] || value for (key, value) in selectOptions"></select>')}]).directive("wmSelect",["PropertiesFactory","$templateCache","WidgetUtilService","$timeout","CONSTANTS",function(PropertiesFactory,$templateCache,WidgetUtilService,$timeout,CONSTANTS){"use strict";function getKey(optionObject){var keys=Object.keys(optionObject);return 1===keys.length?keys[0]:"dataValue"}function getDisplayField(dataSet,scope){var displayField=scope.displayfield||scope.datafield;return displayField===ALLFIELDS&&(WM.isArray(dataSet)&&dataSet.length>0?displayField=WM.isObject(dataSet[0])?Object.keys(dataSet[0])[0]:"":WM.isObject(dataSet)&&(displayField="")),displayField}function updateModelProxy(scope,attrs,_model_){scope.modelProxy=attrs.datafield===ALLFIELDS?dataSetModelMap[scope.$id][JSON.stringify(_model_)]:WM.isObject(_model_)?_model_:_model_&&_model_.toString()}function parseDataSet(dataSet,scope,attrs){var data=dataSet,dataField=scope.datafield,displayField=getDisplayField(dataSet,scope);return dataSetModelProxyMap[scope.$id]=[],dataSetModelMap[scope.$id]=[],dataField!==ALLFIELDS?(data={},WM.forEach(dataSet,function(option){data[option[dataField]]=option[displayField]})):(data={},WM.forEach(dataSet,function(option,index){WM.isObject(option)?attrs.datafield===ALLFIELDS?(data[index]=displayField?option[displayField]:option,dataSetModelProxyMap[scope.$id][index]=option,dataSetModelMap[scope.$id][JSON.stringify(option)]=index.toString()):data[option[displayField]]=option[displayField]:WM.isArray(dataSet)?data[option]=option:data[index]=option})),data}function createSelectOptions(dataset,scope,element,attrs){var key;if(scope.selectOptions={},dataset=dataset?dataset.data||dataset:[],dataset&&""!==dataset.dataValue){if(WM.isArray(dataset)){if(!dataset.length)return;dataset=parseDataSet(dataset,scope,attrs),WM.isObject(dataset[0])?(key=getKey(dataset[0]),WM.forEach(dataset,function(option){scope.selectOptions[option[key]]=option.name||option[key]})):WM.isArray(dataset)?WM.forEach(dataset,function(option){scope.selectOptions[option]=option}):WM.isObject(dataset)&&(scope.selectOptions=dataset)}else WM.isObject(dataset)?(dataset=parseDataSet(dataset,scope,attrs),scope.selectOptions=dataset):WM.forEach(dataset.split(","),function(opt){opt=opt.trim(),scope.selectOptions[opt]=opt});updateModelProxy(scope,attrs,scope._model_)}CONSTANTS.isIE&&$timeout(function(){var option=element.find("option");element.css("width",element.css("width")),1===option.length&&option.prop("selected")&&element.replaceWith(element.clone())},0,!1)}function updatePropertyPanelOptions(dataset,scope){var variableKeys=[];dataset&&(dataset=dataset[0]||dataset,variableKeys=WM.isObject(dataset)&&!WM.isArray(dataset)?Object.keys(dataset||{}):[]),scope.widgetProps.datafield.options=[ALLFIELDS].concat(variableKeys),scope.widgetProps.displayfield.options=[""].concat(variableKeys)}function propertyChangeHandler(scope,element,attrs,key,newVal){switch(key){case"dataset":scope.widgetid&&newVal&&updatePropertyPanelOptions(newVal.data||newVal,scope),createSelectOptions(scope.dataset,scope,element,attrs);break;case"multiple":attrs.$set("multiple",newVal);break;case"active":scope.widgetid&&scope.dataset&&updatePropertyPanelOptions(scope.dataset.data||scope.dataset,scope)}}function onChangeProxy(scope,attrs,args){return scope.readonly?void(scope.modelProxy=scope._model_):(scope._model_=attrs.datafield===ALLFIELDS?dataSetModelProxyMap[scope.$id][scope.modelProxy]:scope.modelProxy,void scope._onChange({$event:args.$event,$scope:args.$scope}))}function scopedatasetWatcher(scope,element,attrs){scope.widgetid&&updatePropertyPanelOptions(scope.scopedataset,scope),createSelectOptions(scope.scopedataset,scope,element,attrs)}var widgetProps=PropertiesFactory.getPropertiesOf("wm.select",["wm.base","wm.base.editors","wm.base.editors.abstracteditors","wm.base.editors.dataseteditors"]),notifyFor={dataset:!0,multiple:!0,active:!0},dataSetModelProxyMap=[],dataSetModelMap=[],ALLFIELDS="All Fields";return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/select.html"));return tAttrs.hasOwnProperty("multiple")||template.removeAttr("multiple"),isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),scope.$watch("scopedataset",scopedatasetWatcher.bind(void 0,scope,element,attrs)),scope.onChangeProxy=onChangeProxy.bind(void 0,scope,attrs),scope.$watch("_model_",updateModelProxy.bind(void 0,scope,attrs)),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/text.html",'<input class="form-control app-textbox" init-widget has-model title="{{hint}}"  maxlength={{maxchars}}  min={{minvalue}}  max={{maxvalue}}  data-ng-model="_model_" data-ng-readonly="readonly"  data-ng-required="required"  data-ng-disabled="disabled"  data-ng-show="show"  data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+" ></input>")}]).directive("wmText",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(scope,attrs,key,newVal){switch(key){case"type":scope.widgetProps.datavalue.type="number"===newVal||"date"===newVal?newVal:"string",attrs.$set("placeholder","number"===newVal?"Enter value":"Enter text")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.text",["wm.base","wm.base.editors","wm.base.editors.abstracteditors"]),notifyFor={type:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/text.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML
},compile:function(){return{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){scope.getRegExp=function(){return new RegExp(scope.regexp)};var onPropertyChange=propertyChangeHandler.bind(void 0,scope,attrs);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/textarea.html",'<textarea init-widget has-model class="form-control app-textarea"  data-ng-model="_model_" title="{{hint}}" maxlength="{{maxchars}}"  data-ng-show = "show"  data-ng-disabled="disabled"  data-ng-readonly="readonly" data-ng-required="required"  data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+" ></textarea>")}]).directive("wmTextarea",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.textarea",["wm.base","wm.base.editors","wm.base.editors.abstracteditors"]);return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/textarea.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/form/time.html",'<div class="form-control app-timeinput" init-widget has-model  title="{{hint}}"  data-ng-model="_model_" data-ng-show="show"  data-ng-change="_onChange({$event: $event, $scope: this})" '+$rootScope.getWidgetStyles()+' ><timepicker hour-step="hourstep" minute-step="minutestep" show-meridian="ismeridian"></timepicker></div>')}]).directive("wmTime",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(element,key,newVal){var inputEl=element.find("input"),buttonEl=element.find("button");switch(key){case"readonly":case"disabled":inputEl.attr(key,newVal),buttonEl.attr("disabled",newVal);break;case"autofocus":inputEl.first().attr(key,newVal)}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.time",["wm.base","wm.base.editors.abstracteditors","wm.base.datetime"]),notifyFor={readonly:!0,disabled:!0,autofocus:!0};return{restrict:"E",replace:!0,scope:{onClick:"&",onMouseenter:"&",onMouseleave:"&",onFocus:"&",onBlur:"&",onChange:"&"},template:function(tElement,tAttrs){var isWidgetInsideCanvas=tAttrs.hasOwnProperty("widgetid"),template=WM.element($templateCache.get("template/widget/form/time.html"));return isWidgetInsideCanvas||(tAttrs.hasOwnProperty("onClick")&&template.attr("data-ng-click","onClick({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseenter")&&template.attr("data-ng-mouseenter","onMouseenter({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onMouseleave")&&template.attr("data-ng-mouseleave","onMouseleave({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onFocus")&&template.attr("data-ng-focus","onFocus({$event: $event, $scope: this})"),tAttrs.hasOwnProperty("onBlur")&&template.attr("data-ng-blur","onBlur({$event: $event, $scope: this})")),template[0].outerHTML},compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,element);onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.form").requires=WM.module("wm.widgets.form").requires.concat(["textAngular"]),WM.module("wm.widgets.form").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/richtexteditor.html",'<div class="app-richtexteditor" init-widget has-model'+$rootScope.getWidgetStyles()+' data-ng-show="show"><div text-angular="text-angular" data-ng-model="_model_"></div><div data-ng-bind-html="_model_" class="ta-preview" data-ng-show="showpreview"></div></div></div>')}]).directive("wmRichtexteditor",["PropertiesFactory","$templateCache","WidgetUtilService",function(PropertiesFactory,$templateCache,WidgetUtilService){"use strict";function propertyChangeHandler(scope,editorElement,btnElements,key,newVal){switch(key){case"placeholder":scope._model_=newVal;break;case"showpreview":scope.showpreview=newVal;break;case"readonly":btnElements.attr("disabled","readonly"===newVal),"readonly"===newVal?editorElement.on("keypress.readOnlyEvent",function(event){event.preventDefault()}):editorElement.off(".readOnlyEvent")}}var widgetProps=PropertiesFactory.getPropertiesOf("wm.richtexteditor",["wm.base","wm.base.editors"]),notifyFor={placeholder:!0,showpreview:!0,readonly:!0};return{restrict:"E",scope:{},replace:!0,template:$templateCache.get("template/widget/richtexteditor.html"),compile:function(){return{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){var onPropertyChange=propertyChangeHandler.bind(void 0,scope,element.find(".ta-editor"),element.find(".fa-picture-o, .fa-link, .fa-unlink").parent(".btn"));onPropertyChange.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,onPropertyChange),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.grid").service("gridService",["gridTemplateCache",function(gridTemplateCache){"use strict";var getEditableTemplate=function(type){switch(type){case"integer":return gridTemplateCache.get("cellEditableNumberTemplate");default:return gridTemplateCache.get("cellEditableTemplate")}},getCellTemplate=function(type){switch(type){case"date":return gridTemplateCache.get("cellDateTemplate");case"timestamp":return gridTemplateCache.get("cellTimeStampTemplate");default:return gridTemplateCache.get("cellTemplate")}};this.setColumnDef=function(columnDef,sortFn,dataTypes){dataTypes[columnDef.field]=columnDef.type,"date"!==columnDef.type&&("identity"===columnDef.generator?columnDef.enableCellEdit=!1:columnDef.editableCellTemplate=getEditableTemplate(columnDef.type)),columnDef.cellTemplate=getCellTemplate(columnDef.type),"string"===columnDef.type&&(columnDef.sortFn=sortFn),"date"===columnDef.type&&(columnDef.enableCellEdit=!1)}}]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("grid-cellEditableTemplate",'<input class=\'editable-template\' step="any" value="col.field" data-ng-class="\'colt\' + col.index" ng-input="COL_FIELD" data-ng-focus="onCellFocus(col, row, cellValue)" ng-blur="updateEntity(col, row, cellValue)" ng-model=\'cellValue\'/>'),$templateCache.put("grid-cellEditableNumberTemplate",'<input class=\'editable-template\' step="any" type=\'number\' value="col.field" data-ng-class="\'colt\' + col.index" ng-input="COL_FIELD" data-ng-focus="onCellFocus(col, row, cellValue)" ng-blur="updateEntity(col, row, cellValue)" ng-model=\'cellValue\'/>'),$templateCache.put("grid-headerRowTemplate",'<div data-ng-click=\'_onHeaderClick(col,$event);\'  data-ng-style="{ height: col.headerRowHeight }" data-ng-repeat="col in renderedColumns" data-ng-class="col.colIndex()" class="ngHeaderCell"><div class="ngVerticalBar" data-ng-style="{height: col.headerRowHeight}" data-ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div><div ng-header-cell></div></div>'),$templateCache.put("grid-checkboxCellTemplate",'<div  class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" data-ng-checked="row.selected" /></div>'),$templateCache.put("grid-radioCellTemplate",'<div  class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="radio" data-ng-checked="row.selected" /></div>'),$templateCache.put("grid-cellTemplate",'<div class="ngCellText" data-ng-class="row.config.customClasses" data-ng-style="row.config.customStyles" data-ng-click="updateSelectedRow(row,$event);" data-ng-model="row">{{row.getProperty(col.field)}}</div>'),$templateCache.put("grid-cellDateTemplate",'<div class="ngCellText" data-ng-click="updateSelectedRow(row,$event);" data-ng-model="row">{{row.getProperty(col.field)| date:"yyyy-MM-dd"}}</div>'),$templateCache.put("grid-cellTimeStampTemplate",'<div class="ngCellText" data-ng-click="updateSelectedRow(row,$event);" data-ng-model="row">{{row.getProperty(col.field)| date:"yyyy-MMM-dd hh:mm:ss"}}</div>'),$templateCache.put("grid-deleteCellTemplate",'<div class="ngCellText ngCellBtn editor"><button title="Delete" class="app-button delete" data-ng-click="deleteSpecificRow(row)"><i class="glyphicon glyphicon-trash"></i></button></div>'),$templateCache.put("grid-updateCellTemplate",'<div class="ngCellText ngCellBtn editor"><button title="Edit" class="app-button edit" data-ng-click="updateEntry(row)"><i class="glyphicon glyphicon-edit"></i></button></div>'),$templateCache.put("grid-footerTemplate",'<wm-datanavigator show="{{show && shownavigation}}" showrecordcount="{{show && showrecordcount}}"></wm-datanavigator><button data-ng-show="insertrow" data-ng-click="addNewRow(row)" class="btn newRow btn-success"><i class="glyphicon glyphicon-plus-sign"></i> New</button>')}]).service("gridTemplateCache",["$templateCache",function($templateCache){"use strict";var _self=this;_self.get=function(template){return $templateCache.get("grid-"+template)}}]).directive("wmGrid",["PropertiesFactory","WidgetUtilService","$compile","$controller","CONSTANTS","$rootScope","$timeout","Utils",function(PropertiesFactory,WidgetUtilService,$compile,$controller,CONSTANTS,$rootScope,$timeout,Utils){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.grid",["wm.base","wm.base.editors"]),gridColumnMarkup="",notifyFor={width:!0,height:!0,gridfirstrowselect:!0,deleterow:!0,updaterow:!0,dataset:!0,selectionmode:!0,gridnoheader:!0,shownavigation:!0,insertrow:!0,show:!0};return{restrict:"E",scope:{scopedataset:"=?",onSelect:"&",onDeselect:"&",onSort:"&",onClick:"&",onRenderData:"&",onRowrender:"&",onCellRightClick:"&",onHeaderClick:"&",onShow:"&",onHide:"&",onRowDeleted:"&",onRowUpdated:"&",onRowInsert:"&",onEnterkeypress:"&",onSetrecord:"&"},replace:!0,transclude:!1,controller:"gridController",template:function(element){return gridColumnMarkup=element.html(),'<div data-identifier="grid" init-widget data-ng-show="show" title="{{hint}}" class="app-grid clearfix"'+$rootScope.getWidgetStyles()+'><wm-spinner show="{{!parentgrid && isGridDisabled}}" name="grid-spinner"></wm-spinner><div class="app-search row" data-ng-if=\'gridsearch\'><label class="control-label app-label col-sm-1 col-md-1">Search</label><select class="form-control app-select col-sm-3 col-md-3" data-ng-model="$parent.searchOptions.field" data-ng-options="fieldDef.field as fieldDef.displayName for fieldDef in fieldDefs" data-ng-change="clearSearchValue();"><option value="">Select Column</option></select><input type="search" class="app-textbox form-control search col-sm-3 col-md-3" placeholder=\'{{searchInputPlaceholder}}\' data-ng-model=\'$parent.searchOptions.value\' data-ng-keydown="searchGrid($event);"><button class="app-button btn btn-primary col-sm-1 col-md-1" data-ng-click="searchGrid();">Go</button></div><div class="grid-style" ng-grid="gridOptions" data-ng-style="{height:gridsearch?\'calc(100% - (3.5em))\':\'100%\',\'white-space\':\'normal\'}"/><div data-ng-show="noDataExists" class="no-data">{{nodatamessage}}</div></div>'},compile:function(tElement,tAttr){return tAttr.gridColumnMarkup=gridColumnMarkup,CONSTANTS.isStudioMode&&(window[tAttr.name+"Controller"]=WM.noop),{pre:function(scope,element){scope.widgetProps=WM.copy(widgetProps),scope.Variables=element.scope().Variables,scope.Widgets=element.scope().Widgets},post:function(scope,element,attrs){function propertyChangeHandler(key,newVal,oldVal){switch(key){case"width":scope.reBuildGrid();break;case"height":scope.reBuildGrid();break;case"gridfirstrowselect":scope.selectFirstRow(newVal,oldVal);break;case"deleterow":scope.renderRowColumn(newVal,oldVal,"delete"),CONSTANTS.isStudioMode&&(scope.widgetProps.confirmdelete.show=newVal);break;case"updaterow":scope.renderRowColumn(newVal,oldVal,"update");break;case"dataset":scope.watchVariableDataSet(newVal,oldVal);break;case"selectionmode":scope.changeSelectionMode(newVal);break;case"gridnoheader":scope.toggleHeader(newVal,oldVal);break;case"shownavigation":scope.enablePageNavigation(),scope.togglePagingOptions(newVal,oldVal),CONSTANTS.isStudioMode&&(scope.widgetProps.showrecordcount.show=newVal);break;case"insertrow":scope.insertrow=newVal===!0||"true"===newVal;break;case"show":scope.toggleVisibility(newVal)}}attrs.hasOwnProperty("gridnoheader")||$timeout(function(){scope.toggleHeader(!1)},null,!1);var gridController,rebuildGridTimeout,handlers=[];if(scope.$on("$destroy",function(){handlers.forEach(Utils.triggerFn),$timeout.cancel(rebuildGridTimeout)}),scope.reBuildGrid=function(){scope.gridOptions.ngGrid&&($timeout.cancel(rebuildGridTimeout),rebuildGridTimeout=$timeout(function(){scope.gridOptions.ngGrid.buildColumns()},100))},scope.redraw=scope.reBuildGrid.bind(void 0),WM.element(element).css({position:"relative"}),void 0===scope.dataset&&"grid"!==attrs.identifier&&(scope.dataset=""),CONSTANTS.isRunMode)try{gridController=scope.name+"Controller",$controller(gridController,{$scope:scope})}catch(e){}handlers.push($rootScope.$on("compile-grid-columns",function(event,name,markup){scope.name===name&&(scope.fullFieldDefs=[],scope.fieldDefs=[],$compile(markup)(scope))})),$compile(attrs.gridColumnMarkup)(scope),propertyChangeHandler.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,propertyChangeHandler),CONSTANTS.isRunMode&&scope.$watch("scopedataset",function(newVal){newVal&&!scope.dataset&&(scope.newcolumns=!scope.columnDefsExists(),scope.createGridColumns(newVal))}),$timeout(function(){scope.dataNavigator=element.find("[data-identifier=datanavigator]").isolateScope(),WidgetUtilService.postWidgetCreate(scope,element,attrs)},0,!1)}}}}}]).controller("gridController",["$rootScope","$scope","gridTemplateCache","$timeout","$element","Variables","CONSTANTS","gridService","Utils","dateFilter","wmToaster",function($rootScope,$scope,gridTemplateCache,$timeout,$element,Variables,CONSTANTS,gridService,Utils,dateFilter,wmToaster){"use strict";var prevSelectedData,columnObj={deletecolumn:{field:"delete",displayName:"",cellTemplate:gridTemplateCache.get("deleteCellTemplate"),width:"40px",enableCellEdit:!1},updatecolumn:{field:"update",displayName:"",cellTemplate:gridTemplateCache.get("updateCellTemplate"),width:"40px",enableCellEdit:!1}},checkboxColumn={field:"checkboxColumn",displayName:"",cellTemplate:gridTemplateCache.get("checkboxCellTemplate"),width:"40px",enableCellEdit:!1},radioColumn={field:"radioColumn",displayName:"",cellTemplate:gridTemplateCache.get("radioCellTemplate"),width:"40px",enableCellEdit:!1},isCheckboxMode=!1,isRadioMode=!1,rowIndexToHighlight=null,variableRegex=/^bind:Variables\.(.*)\.dataSet$/,addCheckboxColumn=function(){isCheckboxMode||($scope.fieldDefs.unshift(checkboxColumn),isCheckboxMode=!0)},removeCheckboxColumn=function(){isCheckboxMode&&(WM.forEach($scope.fieldDefs,function(object,key){"checkboxColumn"===object.field&&$scope.fieldDefs.splice(key,1)}),isCheckboxMode=!1)},addRadioColumn=function(){isRadioMode||($scope.fieldDefs.unshift(radioColumn),isRadioMode=!0)},removeRadioColumn=function(){isRadioMode&&(WM.forEach($scope.fieldDefs,function(object,key){"radioColumn"===object.field&&$scope.fieldDefs.splice(key,1)}),isRadioMode=!1)},getRowColumnIndex=function(field){var isExisted=!1;return WM.forEach($scope.fieldDefs,function(object,key){isExisted||object.field===field&&(isExisted=key)}),isExisted},getFilterData=function(filterOptions){return $scope.serverData.filter(function(item){var match,result=!1,filter=WM.lowercase(filterOptions.value);return WM.forEach(item,function(val,key){var nestedKeys;result||(-1===filterOptions.field.indexOf(".")?(match="date"===$scope.dataTypes[key]?dateFilter(val,"yyyy-MM-dd"):val,result=-1!==String(match).toLowerCase().indexOf(filter)):(nestedKeys=filterOptions.field.split("."),nestedKeys[0]===key&&(match="date"===$scope.dataTypes[key]?dateFilter(val[nestedKeys[1]],"yyyy-MM-dd"):val[nestedKeys[1]],result=-1!==String(match).toLowerCase().indexOf(filter))))}),result})},populateGridData=function(serviceData){var dataValid,variableName;$scope.binddataset&&(variableName=$scope.binddataset.substr($scope.binddataset.lastIndexOf("bind:Variables.")+15),$scope.gridVariable=serviceData,""!==$scope.gridVariable&&$scope.gridVariable.propertiesMap&&($scope.serverData=$scope.gridVariable.data),$scope.gridVariable.propertiesMap?(dataValid=$scope.serverData&&!$scope.serverData.error,dataValid&&!WM.isArray($scope.serverData)&&($scope.serverData=[$scope.serverData])):(serviceData=$scope.TransformServiceData(serviceData,variableName),$scope.serverData=serviceData),$scope.columnDefsExists()?$scope.setPagingData($scope.serverData):($scope.newcolumns=!0,$scope.createGridColumns($scope.serverData)))};$scope.dataTypes={},$scope.cellValue=null,$scope.showHeader=!0,$scope.showCheckbox=!0,$scope.gridData=[],$scope.fieldDefs=[],$scope.fullFieldDefs=[],$scope.gridsearch=!0,$scope.totalServerItems=0,$scope.selectedItems=[],$scope.multipleSelection=!1,$scope.dataType=[],$scope.keys=[],$scope.gridVariable="",$scope.serverData=[],$scope.toggleVisibility=function(newVal){newVal?$scope.onShow():$scope.onHide()},$scope.getFieldDataType=function(fieldName){var index,fieldDefsLength=$scope.fieldDefs.length;for(index=0;fieldDefsLength>index;index+=1)if($scope.fieldDefs[index].field===fieldName)return $scope.fieldDefs[index].type},$scope.searchGrid=function(event){var variableName,variableType,filterFields,_action;variableName=$scope.binddataset.replace("bind:Variables.",""),variableName=variableName.substr(0,variableName.indexOf(".")),event&&(_action=Utils.getActionFromKey(event),"ENTER"!==_action)||Variables[variableName]&&(variableType=Variables[variableName].category,"wm.LiveVariable"===variableType?(filterFields={},$scope.searchOptions.field&&(filterFields[$scope.searchOptions.field]={value:$scope.searchOptions.value,type:$scope.searchOptions.type}),Variables.call("getData",$scope.variableName,{type:"wm.LiveVariable",isNotTriggerForRelated:!0,page:1,filterFields:filterFields,matchMode:"anywhere",ignoreCase:!0},function(data,propertiesMap,relatedData,pagingOptions){$scope.serverData=data,$scope.dataNavigator&&($scope.dataNavigator.dataset={data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions},$scope.dataNavigator.pageCount<$scope.dataNavigator.currentPage&&$scope.dataNavigator.navigatePage("prev")),$scope.setPagingData($scope.serverData)},function(error){wmToaster.show("error","ERROR",error)})):$scope.setPagingData(getFilterData($scope.searchOptions)))},$scope.updateSelectedRow=function(selectedRow,$event){$scope.onSelect({$event:$event,$data:selectedRow}),$scope.onClick({$event:$event,$data:selectedRow}),prevSelectedData&&$scope.onDeselect({$data:prevSelectedData}),prevSelectedData=selectedRow,$scope.selectedRow=WM.copy(selectedRow.entity)},$scope.stringSortFunction=function(a,b){var strA=$scope.casesensitivesort?a.toLowerCase():a,strB=$scope.casesensitivesort?b.toLowerCase():b;return strA===strB?0:strB>strA?-1:1},$scope.$on("ngGridEventData",function(event){event.stopPropagation(),$scope.selectFirstRow($scope.gridfirstrowselect),$scope.onRenderData({$event:event})}),$scope.$on("ngGridEventRows",function(event,rows){event.stopPropagation(),WM.forEach(rows,function(value,index){value.config.customClasses=value.config.customClasses||"",value.config.customStyles=value.config.customStyles||"",$scope.onRowrender({$event:value.config,$index:index})}),null!==rowIndexToHighlight&&$scope.gridOptions.selectRow(rowIndexToHighlight,!0)}),$scope._onHeaderClick=function(col,$event){$scope.onSort({$event:$event,$data:col}),$scope.onHeaderClick({$event:$event,$data:col})},$scope.setPagingData=function(data){!data||WM.isArray(data)&&data.length<0||($scope.deleterow&&$scope.renderRowColumn(!0,"","delete"),$scope.updaterow&&$scope.renderRowColumn(!0,"","update"),$scope.gridData=data,$timeout(function(){$scope.reBuildGrid(),$scope.isGridDisabled=!1},null,!1))},$scope.gridOptions={data:"gridData",enableCellEdit:!1,multiSelect:!1,columnDefs:"fieldDefs",headerRowTemplate:gridTemplateCache.get("headerRowTemplate"),footerTemplate:gridTemplateCache.get("footerTemplate"),enableColumnResize:!0,enableColumnReordering:!1,jqueryUIDraggable:!1,enablePaging:!0,showFooter:!0,totalServerItems:"totalServerItems",selectedItems:$scope.selectedItems},$scope.isCompositeKey=function(primaryKey){return!primaryKey||primaryKey&&(!primaryKey.length||primaryKey.length>1)},$scope.isNoPrimaryKey=function(primaryKey){return!primaryKey||primaryKey&&!primaryKey.length},$scope.deleteSpecificRow=function(row){var id,columnName,requestData,primaryKey=[],compositeKeysData={};confirm($scope.confirmdelete)&&(WM.element.each($scope.dataset.propertiesMap.columns,function(index,column){column.isPrimaryKey&&(column.isRelated&&-1===WM.element.inArray(column.fieldName+"."+column.columnName,primaryKey)?primaryKey.push(column.fieldName+"."+column.columnName):-1===WM.element.inArray(column.fieldName,primaryKey)&&primaryKey.push(column.fieldName))}),$scope.isCompositeKey(primaryKey)?($scope.isNoPrimaryKey(primaryKey)?compositeKeysData=row.entity:primaryKey.forEach(function(key){compositeKeysData[key]=row.entity[key]}),requestData={compositeKeysData:compositeKeysData}):(primaryKey.forEach(function(key){-1===key.indexOf(".")?id=row.entity[key]:(columnName=key.split("."),id=row.entity[columnName[0]][columnName[1]])}),requestData={id:id}),Variables.call("deleteRow",$scope.variableName,requestData,function(success){return success&&success.error?void wmToaster.show("error",success.error):($scope.message={show:!0,type:"success",caption:"Successfully Deleted entry"},$scope.handleDelete(),wmToaster.show("success","Successfully Deleted entry"),void $scope.onRowDeleted({$data:row}))},function(error){wmToaster.show("error",error)}))},$scope.addNewRow=function(row){$scope.$emit("add-new-row",$scope.widgetid),$scope.onRowInsert({$data:row})},$scope.updateEntry=function(row){$scope.$emit("update-row",$scope.widgetid,row.entity),$scope.onRowUpdated({$data:row})},$scope.updateEntity=function(column,row,cellValue){row.entity[column.field]!==cellValue&&(row.entity[column.field]=cellValue)},$scope.onCellFocus=function(column,row){$scope.cellValue=row.entity[column.field]},$scope.selectFirstRow=function(newVal,oldVal){newVal!==oldVal&&$scope.gridOptions.selectRow(0,!!newVal)},$scope.renderRowColumn=function(newVal,oldVal,field){if(newVal!==oldVal){var rowExists=getRowColumnIndex(field);newVal?rowExists===!1&&$scope.fieldDefs.push(columnObj[field+"column"]):$scope.fieldDefs.splice(rowExists,1)}},$scope.dataMap=[],$scope.TransformServiceData=function(dataObject,variableName){var newObj,tempArr,keys,oldKeys,numKeys,newObject,tempObj;return dataObject=dataObject||[],WM.isArray(dataObject)?WM.isString(dataObject[0])&&(tempArr=[],WM.forEach(dataObject,function(str){newObj={},newObj[variableName]=str,tempArr.push(newObj)}),dataObject=tempArr):(WM.isString(dataObject)&&(keys=variableName.substring(variableName.indexOf(".")+1,variableName.length).split("."),oldKeys=[],numKeys=keys.length,newObject={},tempObj=newObject,WM.forEach(keys,function(key,index){WM.forEach(oldKeys,function(oldKey){tempObj=newObject[oldKey]}),tempObj[key]=index===numKeys-1?dataObject:{},oldKeys.push(key)}),dataObject=newObject),dataObject=[dataObject]),dataObject},$scope.$watch("selectedItems",function(newVal){$scope.selecteditem=newVal[0]},!0),$scope.$watch(function(){return $scope.dataset&&0===$scope.gridData.length&&!$scope.isGridDisabled},function(newVal){$scope.noDataExists=newVal}),$scope.isGridDisabled=!0,$scope.resetPageNavigation=function(){$scope.dataNavigator&&$scope.dataNavigator.resetPageNavigation()},$scope.enablePageNavigation=function(){$scope.dataset&&($scope.dataset.pagingOptions?$scope.pagingOptions={pageSize:$scope.dataset.pagingOptions.maxResults,currentPage:1}:$scope.pagesize&&($scope.pagingOptions={pageSize:$scope.pagesize,currentPage:1}),$scope.dataNavigator&&($scope.dataNavigator.dataset=$scope.binddataset,$scope.dataNavigator.pagingOptions={maxResults:$scope.pagesize||5}),$scope.shownavigation&&$scope.dataNavigator&&($scope.dataNavigator.$watch("result",function(newVal){$scope.dataset=newVal,$scope.pagingOptions={pageSize:$scope.dataNavigator.maxResults,currentPage:$scope.dataNavigator.currentPage}}),$scope.dataNavigator.$watch("maxResults",function(newVal){$scope.pagesize=newVal}),$scope.dataNavigatorWatched=!0))},$scope.handlePageSizeDisplay=function(){var variableName;variableName=$scope.binddataset.replace("bind:Variables.",""),variableName=variableName.substr(0,variableName.indexOf(".")),Variables[variableName]&&($scope.variableType=Variables[variableName].category,$scope.widgetProps.pagesize.disabled="wm.LiveVariable"===$scope.variableType)},$scope.watchVariableDataSet=function(newVal){if(newVal.error)return void $scope.setPagingData([]);WM.isObject(newVal)&&Utils.isPageable(newVal)&&(newVal=newVal.content),newVal?$scope.dataNavigatorWatched||$scope.enablePageNavigation():($scope.resetPageNavigation(),CONSTANTS.isRunMode&&($scope.isGridDisabled=!1));var temp,formattedArray=[];if(WM.isArray(newVal))if(WM.isArray(newVal[0])||WM.isObject(newVal[0])){if(WM.isArray(newVal[0]))return $scope.newcolumns=!0,void $scope.createGridColumns(newVal)}else WM.forEach(newVal,function(value){formattedArray.push({data:value})}),newVal=formattedArray;else if(!WM.isObject(newVal)||newVal&&""===newVal.dataValue)return void(""===newVal&&CONSTANTS.isStudioMode?($scope.isGridDisabled=!1,$scope.prepareFieldDefs(),$scope.gridData=[],$scope.setPagingData($scope.gridData)):"wm.ServiceVariable"===$scope.variableType&&CONSTANTS.isStudioMode&&$scope.fieldDefs.length>0&&($scope.isGridDisabled=!1,$scope.nodatamessage=$rootScope.locale.MESSAGE_GRID_CANNOT_LOAD_DATA_IN_STUDIO));CONSTANTS.isStudioMode&&$scope.binddataset&&$scope.handlePageSizeDisplay(),$scope.isGridDisabled=!0,$scope.binddataset&&($scope.variableName=$scope.binddataset.match(variableRegex),$scope.variableName&&($scope.variableName=$scope.variableName[1]),$scope.$parent&&$scope.$parent.Variables[$scope.variableName]&&($scope.widgetProps.selecteditem.type=$scope.$parent.Variables[$scope.variableName].type),newVal===$scope.binddataset.replace("bind:","")&&(newVal=newVal.substring(newVal.lastIndexOf(".")+1,newVal.length),temp={},temp[newVal]="",newVal=temp)),newVal?(CONSTANTS.isStudioMode&&(newVal.propertiesMap?$scope.createGridColumns(newVal.data,newVal.propertiesMap):$scope.createGridColumns(newVal)),populateGridData(newVal)):CONSTANTS.isStudioMode&&($scope.isGridDisabled=!1,$scope.newcolumns&&$scope.prepareFieldDefs())},$scope.createGridColumns=function(data,propertiesMap){var dataValid=data&&!data.error;dataValid&&!WM.isArray(data)&&(data=[data]),$scope.newcolumns&&(propertiesMap?$scope.prepareFieldDefs(data,propertiesMap):$scope.prepareFieldDefs(data)),dataValid&&($scope.serverData=data,$scope.setPagingData($scope.serverData))},$scope.prepareFieldDefs=function(data,propertiesMap){var defaultFieldDefs,properties,columns,gridObj;$scope.fieldDefs=[],$scope.defaultFieldDefs=[],propertiesMap?(columns=Utils.fetchPropertiesMapColumns(propertiesMap),properties=[Utils.resetObjectWithEmptyValues(columns)]):properties=data,defaultFieldDefs=Utils.prepareGridFieldDefs(properties,10),WM.forEach(defaultFieldDefs,function(columnDef){columnDef.pcDisplay=!0,columnDef.mobileDisplay=!0,propertiesMap&&(columnDef.type=columns[columnDef.field].type,columnDef.primaryKey=columns[columnDef.field].isPrimaryKey,columnDef.generator=columns[columnDef.field].generator,gridService.setColumnDef(columnDef,$scope.stringSortFunction,$scope.dataTypes))}),$scope.fieldDefs=WM.copy(defaultFieldDefs),gridObj={widgetName:$scope.name,fieldDefs:defaultFieldDefs},$rootScope.$emit("fieldDefs-modified",gridObj)},$scope.changeSelectionMode=function(newVal){switch(newVal){case"single":removeCheckboxColumn(),removeRadioColumn(),$scope.multipleSelection=!1;break;case"multiple":removeCheckboxColumn(),removeRadioColumn(),$scope.multipleSelection=!0;break;case"checkbox":removeRadioColumn(),$scope.multipleSelection=!0,addCheckboxColumn();break;case"radio":removeCheckboxColumn(),$scope.multipleSelection=!1,addRadioColumn()}},$scope.toggleHeader=function(newVal,oldVal){newVal!==oldVal&&(newVal&&"false"!==newVal?$element.find(".ngTopPanel").css("display","none"):$element.find(".ngTopPanel").css("display","block"))},$scope.togglePagingOptions=function(newVal,oldVal){newVal!==oldVal&&($scope.dataset||($scope.isGridDisabled=!1),$scope.isGridDisabled||$scope.setPagingData($scope.serverData),$scope.reBuildGrid())},$scope.switchToIndexPage=function(index){var changedPage=Math.floor(index/$scope.pagingOptions.pageSize)+1;(changedPage>$scope.pagingOptions.currentPage||changedPage<$scope.pagingOptions.currentPage)&&($scope.pagingOptions.currentPage=changedPage,$scope.setPagingData($scope.serverData)),index-=(changedPage-1)*$scope.pagingOptions.pageSize,rowIndexToHighlight=index},$scope.maxPages=function(data){return Math.ceil(data.length/$scope.pagingOptions.pageSize)},$scope.initiateHighlightRow=function(index,row,primaryKey){"last"===index&&($scope.dataNavigator.dataSize+=1,$scope.shownavigation||(index="current")),$scope.dataNavigator.calculatePagingValues(),$scope.dataNavigator.navigatePage(index,null,!0,function(){$timeout(function(){$scope.highlightRow(row,primaryKey,$scope.dataset.data)},null,!1)})},$scope.handleDelete=function(){Variables.call("getData",$scope.variableName,{type:"wm.LiveVariable",isNotTriggerForRelated:!0,page:$scope.dataNavigator?$scope.dataNavigator.currentPage:1},function(data,propertiesMap,relatedData,pagingOptions){$scope.serverData=data,$scope.dataNavigator&&($scope.dataNavigator.dataset={data:data,propertiesMap:propertiesMap,relatedData:relatedData,pagingOptions:pagingOptions},$scope.dataNavigator.pageCount<$scope.dataNavigator.currentPage&&$scope.dataNavigator.navigatePage("prev")),$scope.setPagingData($scope.serverData)},function(error){wmToaster.show("error","ERROR",error)})},$scope.highlightRow=function(result,key,data){return data&&($scope.serverData=data),result[key]===data[data.length-1][key]?void $scope.switchToIndexPage(data.length-1):void WM.forEach(data,function(value,index){value[key]===result[key]&&$scope.switchToIndexPage(index)})},CONSTANTS.isStudioMode&&$scope.$root.$on("canvas-resize",function(){$scope.reBuildGrid()}),$scope.clearSearchValue=function(){$scope.searchOptions.value="",$scope.searchOptions.type=$scope.getFieldDataType($scope.searchOptions.field),$scope.searchInputPlaceholder="date"===$scope.searchOptions.type?"yyyy-mm-dd":"Enter Text"
},$scope.columnDefsExists=function(){var i,n;for(i=0,n=$scope.fieldDefs.length;n>i;i+=1)if($scope.fieldDefs[i].field)return!0;return!1}}]).directive("wmGridColumn",["gridService","$parse","Utils",function(gridService,$parse,Utils){"use strict";return{restrict:"E",scope:!0,template:"",compile:function(){return{post:function(scope,element,attrs){var columnStyleExpression,textAlignment=attrs.textalignment||"left",backgroundColor=attrs.backgroundcolor||"",textColor=attrs.textcolor||"",templateRegex=/{{row.getProperty(col.field)*.*}}/,styleRegex=/<div/,columnDef={field:attrs.binding,displayName:attrs.caption,pcDisplay:"1"===attrs.pcdisplay||"true"===attrs.pcdisplay,mobileDisplay:"1"===attrs.mobiledisplay||"true"===attrs.mobiledisplay,width:attrs.width||"*",textAlignment:textAlignment,backgroundColor:backgroundColor,textColor:textColor,type:attrs.type||"string",primaryKey:attrs.primaryKey?$parse(attrs.primaryKey)():"",generator:attrs.generator};if(columnStyleExpression='<div style="background-color: '+backgroundColor+"; color: "+textColor+"; text-align: "+textAlignment+';"',scope.$parent.grid?gridService.setColumnDef(columnDef,scope.$parent.grid.stringSortFunction,scope.$parent.grid.dataTypes):gridService.setColumnDef(columnDef,scope.$parent.stringSortFunction,scope.$parent.dataTypes),columnDef.cellTemplate=columnDef.cellTemplate.replace(styleRegex,columnStyleExpression),element.html()&&(columnDef.customExpression=element.html().trim(),columnDef.cellTemplate=columnDef.cellTemplate.replace(templateRegex,columnDef.customExpression)),scope.$parent.fullFieldDefs.push(columnDef),window.self!==window.top){if(!columnDef.mobileDisplay)return}else if(Utils.isMobile()){if(!columnDef.mobileDisplay)return}else if(!columnDef.pcDisplay)return;scope.$parent.fieldDefs.push(columnDef)}}}}}]),WM.module("wm.widgets.live").directive("formatDate",[function(){"use strict";return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.push(function(valueFromInput){if(valueFromInput){if(valueFromInput&&valueFromInput.getTime)return valueFromInput.getTime();var isDtFormat=valueFromInput.match(/^(\d{4})\/(\d{2})\/(\d{2})$/);return isDtFormat?new Date(isDtFormat[1],isDtFormat[2],isDtFormat[3]).getTime():""}})}}}]).directive("wmLiveform",["PropertiesFactory","WidgetUtilService","$compile","$rootScope","CONSTANTS","Variables","$timeout","$controller",function(PropertiesFactory,WidgetUtilService,$compile,$rootScope,CONSTANTS,Variables,$timeout,$controller){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.layouts.liveform",["wm.layouts","wm.base.events.successerror"]),notifyFor={dataset:!0,captionsize:!0,novalidate:!0,autocomplete:!0,rowdata:!0,formdata:!0,updatemode:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onSuccess:"&",onError:"&",onBeforeservicecall:"&",onResult:"&"},require:"?^wmLivegrid",transclude:!0,template:'<form data-identifier="liveform" role="form" init-widget class="app-liveform align-{{captionalign}} position-{{captionposition}}" data-ng-show="show" data-ng-submit="formSave();"autocomplete="autocomplete" action method  '+$rootScope.getWidgetStyles("container")+'><div class="form-elements" data-ng-class="{\'update-mode\': isUpdateMode }" ng-transclude></div><wm-message scopedataset="message"></wm-message> </form>',controller:function($scope){function emptyDataModel(){$scope.dataArray.forEach(function(dataValue){return dataValue.isRelated?void(dataValue.selected=""):void(dataValue.value="")})}var prevDataArray,onResult=function(data,status){$scope.onResult({$data:data}),status?$scope.onSuccess({$data:data}):$scope.onError({$data:data})};$scope.message=null,$scope.showMessage=function(type,caption){$scope.message={show:!0,type:type,caption:caption},$timeout(function(){$scope.message=null},2e3,!1)},$scope.isCompositeKey=function(){return!$scope.primaryKey||$scope.primaryKey&&(!$scope.primaryKey.length||$scope.primaryKey.length>1)},$scope.isNoPrimaryKey=function(){return!$scope.primaryKey||$scope.primaryKey&&!$scope.primaryKey.length},$scope.formSave=function(){var id,columnName,data,prevData,requestData,prevCompositeKeysData={},compositeKeysData={},formattedData={};if(!WM.isFunction($scope.formElement[0].checkValidity)||$scope.formElement[0].checkValidity()){$scope.operationType=$scope.operationType||"insert",data=$scope.constructDataObject($scope.dataArray),prevData=$scope.constructDataObject(prevDataArray||$scope.dataArray);try{$scope.onBeforeservicecall({$data:data})}catch(err){if("Abort"===err.message)return}switch($scope.operationType){case"update":$scope.isCompositeKey()?($scope.isNoPrimaryKey()?(prevCompositeKeysData=prevData,compositeKeysData=data,data={}):$scope.primaryKey.forEach(function(key){compositeKeysData[key]=data[key],prevCompositeKeysData[key]=prevData[key],delete data[key]}),data.id=compositeKeysData,requestData={row:data,compositeKeysData:prevCompositeKeysData}):($scope.primaryKey.forEach(function(key){-1===key.indexOf(".")?id=prevData[key]:(columnName=key.split("."),id=prevData[columnName[0]][columnName[1]])}),requestData={row:data,id:id}),Variables.call("updateRow",$scope.variableName,requestData,function(response){response.error?($scope.showMessage("error",response.error),onResult(response,!1)):($scope.operationType="",$scope.showMessage("success","Successfully updated"),onResult(response,!0),$scope.ctrl?$scope.ctrl.onResult(null,"update",response):Variables.call("getData",$scope.variableName,{type:"wm.LiveVariable",isNotTriggerForRelated:!0},WM.noop))},function(error){$scope.showMessage("error",error),onResult(error,!1)});break;case"insert":formattedData={},$scope.columnArray.forEach(function(fieldObj){"identity"===fieldObj.generator&&delete data[fieldObj.fieldName]}),$scope.isCompositeKey()&&($scope.isNoPrimaryKey()?(formattedData.id=WM.copy(data),data={}):(formattedData.id={},$scope.primaryKey.forEach(function(key){formattedData.id[key]=data[key],delete data[key]})),data.id=formattedData.id),Variables.call("insertRow",$scope.variableName,{row:data},function(response){response.error?($scope.showMessage("error",response.error),onResult(response,!1)):(onResult(response,!0),$scope.showMessage("success","Successfully add new entry"),$scope.ctrl?$scope.ctrl.onResult(null,"insert",response):Variables.call("getData",$scope.variableName,{type:"wm.LiveVariable",isNotTriggerForRelated:!0},WM.noop))},function(error){$scope.showMessage("error",error),onResult(error,!1)});break;case"delete":if($scope.ctrl&&!$scope.ctrl.confirmMessage())return;$scope.isCompositeKey()?($scope.isNoPrimaryKey()?compositeKeysData=data:$scope.primaryKey.forEach(function(key){compositeKeysData[key]=data[key]}),requestData={compositeKeysData:compositeKeysData}):($scope.primaryKey.forEach(function(key){-1===key.indexOf(".")?id=data[key]:(columnName=key.split("."),id=data[columnName[0]][columnName[1]])}),requestData={id:id}),Variables.call("deleteRow",$scope.variableName,requestData,function(success){return success&&success.error?($scope.showMessage("error",success.error),void onResult(success,!1)):(onResult(success,!0),$scope.clearData(),$scope.showMessage("success","Successfully Deleted entry"),$scope.isSelected=!1,void($scope.ctrl?$scope.ctrl.onResult(success,"delete"):Variables.call("getData",$scope.variableName,{type:"wm.LiveVariable",isNotTriggerForRelated:!0},WM.noop)))},function(error){onResult(error,!0),$scope.showMessage("error",error),onResult(error,!1)})}}},$scope.formCancel=function(){$scope.clearData(),$scope.isUpdateMode=!1,$scope.isSelected&&($scope.dataArray=WM.copy(prevDataArray))},$scope.formUpdate=function(){$scope.isSelected&&(prevDataArray=WM.copy($scope.dataArray)),$scope.isUpdateMode=!0,$scope.operationType="update"},$scope.formNew=function(){$scope.isSelected&&(prevDataArray=WM.copy($scope.dataArray)),$scope.clearData(),$scope.setDefaults(),$scope.isUpdateMode=!0,$scope.operationType="insert"},$scope.setDefaults=function(){$scope.dataArray.forEach(function(fieldObj){fieldObj.defaultvalue&&(fieldObj.value=fieldObj.defaultvalue)})},$scope.formDelete=function(){$scope.operationType="delete",$scope.formSave()},$scope.isInReqdFormat=function(data){return WM.isArray(data)&&data[0].key&&data[0].type},$scope.constructDataObject=function(dataArray){var dataObject={};return dataArray.forEach(function(field){if("timestamp"===field.type){var dateString,timeString,date=new Date(field.datevalue),time=new Date(field.timevalue);dateString=date.toDateString(),timeString=time.toTimeString(),field.value=dateString+" "+timeString,field.value=new Date(field.value),field.value=field.value.getTime(),dataObject[field.key]=field.value}else if("time"===field.type)dataObject[field.key]=field.timevalue;else if("list"!==field.type)dataObject[field.key]=field.value;else{var primaryKey=$scope.relatedfieldPrimaryKeyMap[field.key];WM.forEach($scope.relatedData[field.key],function(colRelatedData){colRelatedData[primaryKey]==field.selected&&(dataObject[field.key]=colRelatedData)})}}),dataObject},$scope.clearData=function(){$scope.dataArray&&$scope.dataArray.length>0&&emptyDataModel(),WM.element($scope.formElement)[0].reset()},$scope.setReadonly=function(element){WM.element(element).find("input, textarea").attr("disabled",!0)},$scope.removeReadonly=function(element){WM.element(element).find("input, textarea").attr("disabled",!1)},$scope.isUpdateMode=!1,$scope.constructForm=function(columnArray,buttonArray,element){var buttonTemplate,formContents,template="";$scope.dataArray=columnArray,$scope.dataArray.forEach(function(dataObject,index){switch(dataObject.type){case"integer":case"big_integer":case"short":case"byte":template=template+'<wm-composite widget="text" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-text name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" readonly="{{dataArray['+index+'].readonly}}" show="{{isUpdateMode}}" scopedatavalue="dataArray['+index+'].value" type="number"></wm-text></wm-composite>';break;case"date":template=template+'<wm-composite widget="date" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value | date:\'dd-MMM-yyyy\'}}" show="{{!isUpdateMode}}"></wm-label><wm-date name="{{dataArray['+index+'].key}}" format-date required="{{dataArray['+index+'].required}}" readonly="{{dataArray['+index+'].readonly}}" scopedatavalue="dataArray['+index+'].value" show="{{isUpdateMode}}"></wm-date></wm-composite>';break;case"boolean":template=template+'<wm-composite widget="checkbox" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-checkbox name="{{dataArray['+index+'].key}}" readonly="{{dataArray['+index+'].readonly}}" scopedatavalue="dataArray['+index+'].value" show="{{isUpdateMode}}"></wm-checkbox></wm-composite>';break;case"list":template=template+'<wm-composite widget="select" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].selected}}" show="{{!isUpdateMode}}"></wm-label><wm-select name="{{dataArray['+index+'].key}}" scopedataset="dataArray['+index+'].value" scopedatavalue="dataArray['+index+'].selected" show="{{isUpdateMode}}"></wm-select></wm-composite>';break;case"float":case"big_decimal":template=template+'<wm-composite widget="text" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-text name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" readonly="{{dataArray['+index+'].readonly}}" show="{{isUpdateMode}}" scopedatavalue="dataArray['+index+'].value" type="number" step="0.01" show="{{isUpdateMode}}"></wm-text></wm-composite>';break;case"double":template=template+'<wm-composite widget="text" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-text name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" readonly="{{dataArray['+index+'].readonly}}" show="{{isUpdateMode}}" scopedatavalue="dataArray['+index+'].value" type="number" step="0.0001" show="{{isUpdateMode}}"></wm-text></wm-composite>';break;case"string":case"character":template=template+'<wm-composite widget="text" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-text name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" maxchars="{{dataArray['+index+'].maxvalue}}" readonly="{{dataArray['+index+'].readonly}}" scopedatavalue="dataArray['+index+'].value" show="{{isUpdateMode}}"></wm-text></wm-composite>';break;case"text":case"clob":case"blob":template=template+'<wm-composite widget="textarea" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-textarea name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" maxchars="{{dataArray['+index+'].maxvalue}}" readonly="{{dataArray['+index+'].readonly}}" scopedatavalue="dataArray['+index+'].value" show="{{isUpdateMode}}"></wm-textarea></wm-composite>';break;case"time":template=template+'<wm-composite widget="date" show="{{dataArray['+index+'].show}}" class="form-time {{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value | date:\'dd-MMM-yyyy\'}}" show="{{!isUpdateMode}}"></wm-label><wm-time name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" scopedatavalue="dataArray['+index+'].timevalue" show="{{isUpdateMode}}"></wm-time></wm-composite>';break;case"timestamp":template=template+'<wm-composite widget="date" show="{{dataArray['+index+'].show}}" class="form-timestamp {{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value | date:\'dd-MMM-yyyy hh:mm:ss\'}}" show="{{!isUpdateMode}}"></wm-label><wm-date name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" scopedatavalue="dataArray['+index+'].datevalue" show="{{isUpdateMode}}"></wm-date><wm-time name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" scopedatavalue="dataArray['+index+'].timevalue" show="{{isUpdateMode}}"></wm-time></wm-composite>';break;default:template=template+'<wm-composite widget="text" show="{{dataArray['+index+'].show}}" class="{{dataArray['+index+'].class}}"><wm-label class="col-md-2" caption="{{dataArray['+index+'].displayName}}"></wm-label><wm-label class="col-md-10" caption="{{dataArray['+index+'].value}}" show="{{!isUpdateMode}}"></wm-label><wm-text name="{{dataArray['+index+'].key}}" required="{{dataArray['+index+'].required}}" readonly="{{dataArray['+index+'].readonly}}" scopedatavalue="dataArray['+index+'].value" show="{{isUpdateMode}}"></wm-text></wm-composite>'}}),$scope.buttonArray=buttonArray,buttonTemplate='<wm-composite class="basic-btn-grp" widget="buttongroup">',$scope.buttonArray.forEach(function(dataObject,index){buttonTemplate=dataObject.updateMode?buttonTemplate+'<wm-button caption="{{buttonArray['+index+'].displayName}}" show="{{isUpdateMode}}" class="{{buttonArray['+index+'].class}}" iconname="{{buttonArray['+index+'].iconname}}" on-click="'+buttonArray[index].action+'" type="{{buttonArray['+index+'].type}}" ></wm-button>':buttonTemplate+'<wm-button caption="{{buttonArray['+index+'].displayName}}" show="{{!isUpdateMode}}" class="{{buttonArray['+index+'].class}}" iconname="{{buttonArray['+index+'].iconname}}" on-click="'+buttonArray[index].action+'" type="{{buttonArray['+index+'].type}}" ></wm-button>'}),template=template+buttonTemplate+"</wm-composite>",formContents=element.find(".form-elements").empty().append(template).contents(),$compile(formContents)($scope),$scope.formConstructed=!0},$scope.getPrimaryKey=function(columnArray){var primaryKey;return WM.forEach(columnArray,function(column){column.isPrimaryKey&&(primaryKey=column.fieldName)}),primaryKey},$scope.setPrimaryKey=function(columnName){-1===WM.element.inArray(columnName,$scope.primaryKey)&&$scope.primaryKey.push(columnName)},$scope.translateVariableObject=function(rawObject){$scope.propertiesMap=rawObject.propertiesMap,$scope.relatedData=rawObject.relatedData,$scope.columnArray=$scope.propertiesMap.columns,$scope.relatedfieldPrimaryKeyMap={},$scope.primaryKey=$scope.primaryKey||[];var translatedObj=[];return $scope.columnArray.forEach(function(fieldObj,index){if(fieldObj.isRelated){var primaryKey=$scope.getPrimaryKey(fieldObj.columns),colRelatedData=$scope.relatedData[fieldObj.fieldName],colPrimaryData=[];$scope.relatedfieldPrimaryKeyMap[fieldObj.fieldName]=primaryKey,WM.forEach(colRelatedData,function(col){colPrimaryData.push(col[primaryKey])}),translatedObj[index]={displayName:fieldObj.fieldName,show:!0,generator:fieldObj.generator,key:fieldObj.fieldName,value:colPrimaryData,type:"list",isRelated:!0,primaryKey:!1,selected:""},fieldObj.isPrimaryKey&&$scope.setPrimaryKey(fieldObj.fieldName+"."+fieldObj.columnName)}else translatedObj[index]={displayName:fieldObj.fieldName,show:!0,primaryKey:fieldObj.isPrimaryKey,generator:fieldObj.generator,key:fieldObj.fieldName,value:"",type:fieldObj.fullyQualifiedType,maxvalue:"",readonly:"identity"===fieldObj.generator,required:"true"===fieldObj.notNull||fieldObj.notNull===!0},("string"===fieldObj.type||"character"===fieldObj.type)&&(translatedObj[index].maxvalue=fieldObj.length),fieldObj.isPrimaryKey&&$scope.setPrimaryKey(fieldObj.fieldName)}),translatedObj},$scope.changeDataObject=function(dataObj){$scope.dataArray.forEach(function(value){if(value.isRelated)return void(value.selected=dataObj[value.key]?dataObj[value.key][$scope.relatedfieldPrimaryKeyMap[value.key]].toString():dataObj[value.key]);if("timestamp"===value.type&&(value.datevalue=dataObj[value.key],value.timevalue=dataObj[value.key]),"time"===value.type){var date=(new Date).toDateString();value.timevalue=new Date(date+" "+dataObj[value.key]).getTime()}value.value=dataObj[value.key]})}},compile:function(tElement,tAttr){return CONSTANTS.isStudioMode&&(window[tAttr.name+"Controller"]=WM.noop),{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs,controller){function propertyChangeHandler(key,newVal){var value,labelElements,elementScope,translatedObj,tempVarName,gridObj,variableRegex=/^bind:Variables\.(.*)\.dataSet$/;switch(key){case"dataset":if(newVal.propertiesMap&&WM.isArray(newVal.propertiesMap.columns)){if(scope.formCreated)translatedObj=scope.translateVariableObject(newVal),scope.translatedObj=translatedObj,scope.dataArray.forEach(function(fieldObject){translatedObj.forEach(function(transObj){transObj.key===fieldObject.key&&(fieldObject.value=transObj.value,fieldObject.isRelated=transObj.isRelated,fieldObject.isRelated&&(fieldObject.primaryKey=transObj.primaryKey,fieldObject.selected=transObj.selected))})}),scope.formConstructed||scope.constructForm(scope.dataArray,scope.buttonArray,element),scope.variableName=scope.binddataset.match(variableRegex)[1],Variables[scope.variableName]&&(scope.widgetProps.formdata.type=Variables[scope.variableName].type);else{if(scope.buttonArray=[{key:"save","class":"form-save btn-success",iconname:"save",action:"",displayName:"save",show:!0,type:"submit",updateMode:!0},{key:"cancel","class":"form-cancel",iconname:"cancel",action:"formCancel()",displayName:"cancel",show:!0,type:"button",updateMode:!0}],tempVarName=scope.binddataset.match(variableRegex)[1],tempVarName===scope.variableName)return translatedObj=scope.translateVariableObject(newVal),scope.translatedObj=translatedObj,void(scope.dataArray=translatedObj);scope.variableName=tempVarName,Variables[scope.variableName]&&(scope.widgetProps.formdata.type=Variables[scope.variableName].type),translatedObj=scope.isInReqdFormat(newVal)?newVal:scope.translateVariableObject(newVal),scope.translatedObj=translatedObj,scope.constructForm(translatedObj,scope.buttonArray,element)}gridObj={widgetName:scope.name,fieldDefs:scope.dataArray,buttonDefs:scope.buttonArray}}else newVal||(element.find(".form-elements").empty(),scope.variableName="",gridObj={widgetName:scope.name,fieldDefs:[],buttonDefs:[]});CONSTANTS.isStudioMode&&$rootScope.$emit("formFieldsDefs-modified",gridObj);break;case"captionsize":labelElements=WM.element(element).find(".app-label"),WM.forEach(labelElements,function(childelement){elementScope=WM.element(childelement).isolateScope(),elementScope.width=newVal});break;case"novalidate":newVal===!0||"true"===newVal?element.attr("novalidate",""):element.removeAttr("novalidate");break;case"autocomplete":value=newVal===!0||"true"===newVal?"on":"off",element.attr(key,value);break;case"rowdata":newVal&&WM.isObject(newVal)&&scope.changeDataObject(newVal);break;case"formdata":newVal&&WM.isObject(newVal)&&scope.changeDataObject(newVal);break;case"updatemode":scope.isUpdateMode=newVal===!0||"true"===newVal}}scope.ctrl=controller,scope.formElement=element;var formController;if(CONSTANTS.isRunMode)try{formController=scope.name+"Controller",$controller(formController,{$scope:scope})}catch(e){}propertyChangeHandler.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,propertyChangeHandler),scope.$watch("scopedataset",function(newVal,oldVal){CONSTANTS.isRunMode&&newVal&&newVal!==oldVal&&scope.constructForm(newVal,element)}),scope.widgetid||$rootScope.$on("compile-form-fields",function(event,name,markup,newVal,fromDesigner){scope.name===name&&(scope.formConstructed=fromDesigner,scope.formConstructed&&(element.find(".form-elements").empty(),scope.constructForm(newVal.columnDefs,newVal.buttonDefs,element)),scope.formConstructed=!0,$compile(markup)(scope))}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmFormField",[function(){"use strict";return{restrict:"E",scope:!0,template:"",compile:function(){return{post:function(scope,element,attrs){if(scope.parentIsolateScope=element.parent()&&element.parent().length>0?element.parent().parent().isolateScope():scope.$parent,!scope.parentIsolateScope.formConstructed){var columnDef={key:attrs.key||attrs.binding,displayName:attrs.displayName||attrs.caption,show:"1"===attrs.show||"true"===attrs.show,"class":attrs.class||"",type:attrs.type||"string",primaryKey:"true"===attrs.primaryKey||attrs.primaryKey===!0,generator:attrs.generator,readonly:attrs.readonly,required:attrs.required,maxvalue:attrs.maxvalue,minvalue:attrs.minvalue,value:attrs.defaultValue};attrs.defaultValue&&(columnDef.defaultvalue=attrs.defaultValue),"list"===attrs.type&&(columnDef.selected=attrs.defaultValue),scope.parentIsolateScope.dataArray=scope.parentIsolateScope.dataArray||[],scope.parentIsolateScope.dataArray.push(columnDef),scope.parentIsolateScope.formCreated=!0}}}}}}]).directive("wmFormAction",[function(){"use strict";return{restrict:"E",scope:!0,template:"",compile:function(){return{post:function(scope,element,attrs){if(scope.parentIsolateScope=element.parent()&&element.parent().length>0?element.parent().parent().isolateScope():scope.$parent,!scope.parentIsolateScope.formConstructed){var buttonDef={key:attrs.key||attrs.binding,displayName:attrs.displayName||attrs.caption,show:"1"===attrs.show||"true"===attrs.show,"class":attrs.class||"",iconname:attrs.iconname,action:attrs.action,type:attrs.type||"button",updateMode:attrs.updateMode};scope.parentIsolateScope.buttonArray=scope.parentIsolateScope.buttonArray||[],scope.parentIsolateScope.buttonArray.push(buttonDef),scope.parentIsolateScope.formCreated=!0}}}}}}]),WM.module("wm.widgets.live").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/livefilter/livefilter.html",'<div class="app-livefilter clearfix" init-widget title="{{hint}}" data-ng-show="show" '+$rootScope.getWidgetStyles()+" ng-transclude></div>")}]).directive("wmLivefilter",["PropertiesFactory","$rootScope","$templateCache","WidgetUtilService","$compile","CONSTANTS","QueryBuilder","Variables",function(PropertiesFactory,$rootScope,$templateCache,WidgetUtilService,$compile,CONSTANTS,QueryBuilder,Variables){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.livefilter",["wm.layouts","wm.containers"]),filterMarkup="",notifyFor={dataset:!0};return{restrict:"E",replace:!0,transclude:!0,scope:{},controller:function($scope){function updateAllowedValues($scope){WM.forEach($scope.filterFields,function(filterField){var query,tableName,columns;"select"===filterField.widget&&(filterField.isRelated?(tableName=filterField.lookupType,columns=filterField.lookupField,query=QueryBuilder.getQuery({tableName:tableName,columns:[" DISTINCT "+columns]})):query=QueryBuilder.getQuery({tableName:$scope.result.propertiesMap.entityName,columns:[" DISTINCT "+filterField.field]}),QueryBuilder.executeQuery({databaseName:$scope.result.propertiesMap.fullyQualifiedName.split(".")[1],query:query,page:1,size:500,nativeSql:!1},function(data){filterField.dataset=data.content}))})}$scope.clearFilter=function(){WM.forEach($scope.filterFields,function(filterField){filterField.isRange?(filterField.minValue="",filterField.maxValue=""):filterField.selected?filterField.selected="":filterField.value=""}),$scope.filter()},$scope.filter=function(){var query,filterFields=[];WM.forEach($scope.filterFields,function(filterField){if(filterField.isRange)filterField.minValue&&filterField.maxValue?filterFields.push({clause:"('"+filterField.minValue+"'<="+filterField.field+" AND "+filterField.field+"<='"+filterField.maxValue+"')"}):filterField.minValue?filterFields.push({clause:"('"+filterField.minValue+"'<="+filterField.field+")"}):filterField.maxValue&&filterFields.push({clause:"("+filterField.field+"<='"+filterField.maxValue+"')"});else switch(filterField.widget){case"select":filterField.selected&&filterFields.push(filterField.isRelated?{column:filterField.field+"."+filterField.lookupField,value:filterField.selected}:{column:filterField.field,value:filterField.selected});break;case"date":filterField.value&&filterFields.push({column:filterField.field,value:filterField.value});break;default:filterField.value&&filterFields.push({column:filterField.field,value:filterField.value})}}),query=QueryBuilder.getQuery({tableName:$scope.result.propertiesMap.entityName,filterFields:filterFields}),QueryBuilder.executeQuery({databaseName:$scope.result.propertiesMap.fullyQualifiedName.split(".")[1],query:query,page:1,size:500,nativeSql:!1},function(data){var tempObj={};$scope.result.data=data.content,WM.forEach(filterFields,function(filterField){tempObj[filterField.column]=filterField.value}),$scope.result.filterFields=tempObj,$scope.result.pagingOptions={dataSize:data.totalElements,maxResults:Variables.getVariableByName($scope.variableName).maxResults||20,currentPage:1}})},$scope.constructFilters=function(filterObj,buttonArray){var compiledTemplate,type,buttonTemplate,buttonCompiledTemplate,template="";$scope.filterFields=filterObj,WM.forEach($scope.filterFields,function(filterField,index){switch(filterField.widget){case"slider":template=template+'<wm-composite widget="slider" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><input class="col-md-8" type="range"/></wm-composite>';break;case"select":filterField.isRange?(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Min Value",filterField.maxPlaceholder=filterField.maxPlaceholder||"Enter Max Value",template=template+'<wm-composite widget="select" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-select class="col-md-4" name="{{filterFields['+index+'].field}}" scopedataset="filterFields['+index+'].dataset" scopedatavalue="filterFields['+index+'].minValue" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-select><wm-select class="col-md-4" name="{{filterFields['+index+'].field}}" scopedataset="filterFields['+index+'].dataset" scopedatavalue="filterFields['+index+'].maxValue" placeholder="{{filterFields['+index+'].maxPlaceholder}}"></wm-select></wm-composite>'):(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Value",template=template+'<wm-composite widget="select" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-select name="{{filterFields['+index+'].field}}" scopedataset="filterFields['+index+'].dataset" scopedatavalue="filterFields['+index+'].selected" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-select></wm-composite>');break;case"text":filterField.isRange?(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Min Value",filterField.maxPlaceholder=filterField.maxPlaceholder||"Enter Max Value",type="integer"===filterField.type?"number":"string",template=template+'<wm-composite widget="text" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].minValue" type="'+type+'" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-text><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].maxValue" type="'+type+'" placeholder="{{filterFields['+index+'].maxPlaceholder}}"></wm-text></wm-composite>'):(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Value",type="integer"===filterField.type?"number":"string",template=template+'<wm-composite widget="text" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-8" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="'+type+'" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-text></wm-composite>');break;case"date":filterField.isRange?(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Min Value",filterField.maxPlaceholder=filterField.maxPlaceholder||"Enter Max Value",type="date",template=template+'<wm-composite widget="date" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="'+type+'" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-text><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="'+type+'" placeholder="{{filterFields['+index+'].maxPlaceholder}}"></wm-text></wm-composite>'):(filterField.minPlaceholder=filterField.minPlaceholder||"Enter Value",type="date",template=template+'<wm-composite widget="date" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-8" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="'+type+'" placeholder="{{filterFields['+index+'].minPlaceholder}}"></wm-text></wm-composite>');
break;default:template=filterField.isRange?template+'<wm-composite widget="text" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="string"></wm-text><wm-text class="col-md-4" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="string"></wm-text></wm-composite>':template+'<wm-composite widget="text" show="{{filterFields['+index+'].show}}"><wm-label class="col-md-4" caption="{{filterFields['+index+'].displayName}}"></wm-label><wm-text class="col-md-8" name="{{filterFields['+index+'].field}}" scopedatavalue="filterFields['+index+'].value" type="string"></wm-text></wm-composite>'}filterField.filterOn&&""!==filterField.filterOn&&WM.forEach($scope.filterFields,function(fieldObj,index){fieldObj.field===filterField.filterOn&&$scope.$watch("filterFields["+index+"].selected",function(newVal,oldVal){var query,filterFields={};newVal!==oldVal&&(filterFields=[{column:[filterField.filterOn],value:newVal}],query=QueryBuilder.getQuery({tableName:$scope.result.propertiesMap.entityName,columns:[" DISTINCT "+filterField.field],filterFields:filterFields}),QueryBuilder.executeQuery({databaseName:$scope.result.propertiesMap.fullyQualifiedName.split(".")[1],query:query,page:1,size:500,nativeSql:!1},function(data){filterField.dataset=data.content}))})})}),$scope.buttonArray=buttonArray,buttonTemplate='<wm-composite class="basic-btn-grp" widget="buttongroup">',WM.forEach($scope.buttonArray,function(dataObject,index){buttonTemplate=buttonTemplate+'<wm-button caption="{{buttonArray['+index+'].displayName}}" show="{{buttonArray['+index+'].show}}" class="{{buttonArray['+index+'].class}}" iconname="{{buttonArray['+index+'].iconname}}" on-click="'+buttonArray[index].action+'" type="{{buttonArray['+index+'].type}}" ></wm-button>'}),buttonTemplate+="</wm-composite>",compiledTemplate=$compile(template)($scope),buttonCompiledTemplate=$compile(buttonTemplate)($scope),$scope.filterContainer.html(""),$scope.filterContainer.append(compiledTemplate,buttonCompiledTemplate),$scope.widgetid||updateAllowedValues($scope)},$scope.constructDefaultData=function(dataset){var colDef,columnObj=dataset.propertiesMap.columns,colDefArray=[];return WM.forEach(columnObj,function(column,index){colDef={},colDef.field=column.fieldName,colDef.displayName=column.fieldName,colDef.widget="date"===column.type?"date":"text",colDef.isRange=!1,colDef.filterOn="",colDef.lookupType="",colDef.lookupField="",colDef.minPlaceholder="",colDef.maxPlaceholder="",colDef.type=column.type,colDef.isPrimaryKey=column.isPrimaryKey,colDef.generator=column.generator,colDef.show=4>=index,column.isRelated?(colDef.field=column.fieldName.charAt(0).toLowerCase()+column.fieldName.slice(1),colDef.displayName=colDef.field,colDef.isRelated=!0,colDef.lookupType=column.relatedEntityName,colDef.lookupField="",WM.forEach(column.columns,function(subcolumn){subcolumn.isPrimaryKey&&(colDef.lookupField=subcolumn.fieldName)}),colDef.relatedEntityName=column.relatedEntityName):colDef.isRelated=!1,colDefArray.push(colDef)}),colDefArray}},template:function(element){return filterMarkup=element.html(),$templateCache.get("template/widget/livefilter/livefilter.html")},compile:function(tElement,tAttr){return tAttr.gridColumnMarkup=filterMarkup,{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){function propertyChangeHandler(key,newVal,oldVal){switch(key){case"dataset":if(newVal.propertiesMap&&WM.isArray(newVal.propertiesMap.columns)){if(!oldVal||!oldVal.propertiesMap||!WM.equals(newVal.propertiesMap.columns,oldVal.propertiesMap.columns))if(scope.variableName=scope.binddataset.match(variableRegex)[1],scope.result=newVal,scope.result.variableName=scope.variableName,scope.fieldObjectCreated&&!scope.filterConstructed)scope.constructFilters(scope.filterFields,scope.buttonArray),scope.filterConstructed=!0;else{var fieldsObj=scope.constructDefaultData(newVal);scope.constructFilters(fieldsObj,scope.buttonArray),scope.filterConstructed=!0}}else!newVal&&CONSTANTS.isStudioMode&&(element.empty(),scope.variableName="",scope.result="",scope.filterFields="",scope.filterConstructed=!1,scope.fieldObjectCreated=!1)}}var variableRegex=/^bind:Variables\.(.*)\.dataSet$/;scope.filterContainer=element,scope.primaryKey=null,scope.buttonArray=scope.buttonArray||[{key:"filter","class":"btn-primary",iconname:"filter",action:"filter()",displayName:"filter",show:!0,type:"button"},{key:"clear","class":"btn",iconname:"clear",action:"clearFilter()",displayName:"clear",show:!0,type:"button"}],propertyChangeHandler.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,propertyChangeHandler),$rootScope.$on("compile-filters",function(event,name,markup,filterObj,variableName,fromDesigner){scope.name===name&&(scope.filterConstructed=fromDesigner,scope.variableName=variableName,scope.filterConstructed&&(element.empty(),scope.constructFilters(filterObj.fieldDefs,filterObj.buttonDefs)),scope.filterConstructed=!0,scope.filterFields=filterObj.fieldDefs,scope.buttonArray=filterObj.buttonDefs,$compile(markup)(scope))}),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]).directive("wmFilterField",["$parse",function($parse){"use strict";return{restrict:"E",scope:!0,template:"",compile:function(){return{post:function(scope,element,attrs){if(scope.parentIsolateScope=element.parent().isolateScope()||scope.$parent,!scope.parentIsolateScope.filterConstructed){var fieldObject={field:attrs.field||attrs.binding,displayName:attrs.displayName||attrs.caption,show:"true"===attrs.show||attrs.show===!0,type:attrs.type||"string",primaryKey:attrs.primaryKey?$parse(attrs.primaryKey)():"",generator:attrs.generator,isRange:"true"===attrs.isRange||attrs.isRange===!0,isRelated:attrs.isRelated,filterOn:attrs.filterOn,widget:attrs.widget,lookupType:attrs.lookupType,lookupField:attrs.lookupField,minPlaceholder:attrs.minPlaceholder,maxPlaceholder:attrs.maxPlaceholder};scope.parentIsolateScope.filterFields=scope.parentIsolateScope.filterFields||[],scope.parentIsolateScope.filterFields.push(fieldObject),scope.parentIsolateScope.fieldObjectCreated=!0}}}}}}]).directive("wmFilterAction",[function(){"use strict";return{restrict:"E",scope:!0,template:"",compile:function(){return{post:function(scope,element,attrs){if(scope.parentIsolateScope=element.parent().isolateScope()||scope.$parent,!scope.parentIsolateScope.filterConstructed){var buttonDef={key:attrs.key||attrs.binding,displayName:attrs.displayName||attrs.caption,show:"true"===attrs.show||attrs.show===!0,"class":attrs.class||"",iconname:attrs.iconname,action:attrs.action};scope.parentIsolateScope.buttonArray=scope.parentIsolateScope.buttonArray||[],scope.parentIsolateScope.buttonArray.push(buttonDef),scope.parentIsolateScope.fieldObjectCreated=!0}}}}}}]),WM.module("wm.widgets.live").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/livegrid/livegrid.html",'<div class="app-livegrid" init-widget title="{{hint}}" '+$rootScope.getWidgetStyles()+' data-ng-show="show"><wm-spinner show="{{grid.isGridDisabled}}" name="grid-spinner"></wm-spinner><div wmtransclude></div></div>')}]).directive("wmLivegrid",["PropertiesFactory","$templateCache","WidgetUtilService","$compile","$timeout",function(PropertiesFactory,$templateCache,WidgetUtilService,$compile,$timeout){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.base"),gridMarkup="";return{restrict:"E",replace:!0,transclude:!0,scope:{},controller:function($scope){this.onResult=function(data,operation,response){if($scope.gridform.isUpdateMode=!1,$scope.grid)switch(operation){case"insert":$scope.grid.initiateHighlightRow("last",response,$scope.primaryKey);break;case"update":$scope.grid.initiateHighlightRow("current",response,$scope.primaryKey);break;case"delete":$scope.grid.handleDelete()}},this.confirmMessage=function(){return $scope.grid?confirm($scope.grid.confirmdelete):!0}},template:function(element){return gridMarkup=element.html(),$templateCache.get("template/widget/livegrid/livegrid.html")},compile:function(tElement,tAttr){return tAttr.gridColumnMarkup=gridMarkup,{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){var setSelectedItem;scope.getRegExp=function(){return new RegExp(scope.regexp)},scope.primaryKey=null,scope.fullFieldDefs=[],scope.fieldDefs=[],scope.grid=element.find("[data-identifier=grid]").isolateScope(),scope.gridform=element.find("[data-identifier=liveform]").isolateScope(),scope.grid&&(scope.grid.parentgrid=!0,scope.grid.newcolumns=scope.newcolumns,setSelectedItem=function(item){WM.forEach(scope.grid.serverData,function(val){val[scope.primaryKey]===item[scope.primaryKey]&&(scope.gridform.rowdata=val)})},scope.grid.$watch("selectedItems",function(newValue){if(scope.grid&&scope.gridform&&scope.grid.variableName===scope.gridform.variableName)if(newValue&&newValue.length>0&&!scope.gridform.isSelected&&(scope.gridform.isSelected=!0),newValue&&newValue.length>0){var selected;scope.grid.multipleSelection?scope.gridform.rowdata=newValue[0]:(selected=newValue[newValue.length-1],setSelectedItem(selected))}else scope.gridform.isSelected=!1,scope.gridform.rowdata="",scope.gridform.clearData()},!0),scope.grid.$watch("fullFieldDefs",function(newVal){scope.fullFieldDefs=newVal},!0),scope.grid.$watch("fieldDefs",function(newVal){scope.fieldDefs=newVal},!0),scope.grid.$watch("serverData",function(newVal){scope.serverData=newVal},!0),scope.grid.$on("add-new-row",function(){scope.gridform.isSelected=!1,scope.gridform.rowdata="",scope.gridform.formNew()}),scope.grid.$on("update-row",function(event,widgetid,row){scope.gridform.rowdata=row,scope.gridform.formUpdate()})),$compile(attrs.gridColumnMarkup)(scope),scope.gridform&&scope.gridform.$watch("primaryKey",function(newVal){scope.primaryKey=newVal}),$timeout(function(){WidgetUtilService.postWidgetCreate(scope,element,attrs)},0,!1)}}}}}]),WM.module("wm.widgets.live").controller("listController",["$rootScope","$scope","Variables","Widgets","CONSTANTS","Utils","$timeout",function($rootScope,$scope,Variables,Widgets,CONSTANTS){"use strict";function getVariableName(){var variableName;return variableName=$scope.binddataset.replace("bind:Variables.",""),variableName.substr(0,variableName.indexOf("."))}function getColumnsFromDataSet(dataset){return WM.isArray(dataset)&&WM.isObject(dataset[0])?Object.keys(dataset[0]):WM.isObject(dataset)?Object.keys(dataset):[]}function getColumnsFromPropertiesMap(propertiesMap){var columns=[];return propertiesMap&&propertiesMap.columns&&propertiesMap.columns.forEach(function(column){columns.push(column.fieldName)}),columns}$scope.dataset=[],$scope.fieldDefs=[],this.listScope=$scope;var context=this;$scope.updateSelectedItemDataType=function(){var variableName=getVariableName();Variables[variableName]&&($scope.widgetProps.selecteditem.type=Variables[variableName].type)},$scope.updateLiveListBindings=function(forceUpdate){var columns=$scope.dataset&&$scope.dataset.propertiesMap?getColumnsFromPropertiesMap($scope.dataset.propertiesMap):getColumnsFromDataSet($scope.dataset);$rootScope.$emit("livelist-template-modified",{widgetName:$scope.name,bindDataset:$scope.binddataset,fields:columns,forceUpdate:forceUpdate})},$scope.handlePageSizeDisplay=function(){var variableName,variableType;variableName=getVariableName(),Variables[variableName]&&(variableType=Variables[variableName].category,$scope.widgetProps.pagesize.disabled="wm.LiveVariable"===variableType)},$scope.watchVariableDataSet=function(newVal,oldVal){if(newVal&&newVal!==oldVal){var variableName=getVariableName(),variableObj=Variables[variableName];if(newVal.data)newVal=newVal.data;else if(variableObj&&"wm.LiveVariable"===variableObj.category)return;newVal.dataSet&&(newVal=newVal.dataSet),WM.isObject(newVal)&&!WM.isArray(newVal)&&(newVal=[newVal]),newVal instanceof Array&&($scope.dataNavigator.dataset=$scope.binddataset,$scope.dataNavigator.pagingOptions={maxResults:$scope.pagesize||5},$scope.dataNavigator.$watch("result",function(newVal){$scope.dataset=newVal}),$scope.dataNavigator.$watch("maxResults",function(newVal){$scope.pagesize=newVal}),$scope.createListItems(newVal)),CONSTANTS.isStudioMode&&$scope.binddataset&&$scope.handlePageSizeDisplay()}},$scope.toggleHeader=function(newVal,oldVal){newVal!==oldVal&&(context.listScope.showHeader=newVal)},this.getListScope=function(){return this.listScope},$scope.createListItems=function(data){var newData=WM.copy(data);$scope.fieldDefs=!$scope.dataNavigator.show&&$scope.pagesize?newData.splice(0,$scope.pagesize):data}}]).run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/list.html",'<div class="app-livelist" init-widget'+$rootScope.getWidgetStyles()+' data-ng-show="show" ><ul data-identifier="list" title="{{hint}}" class="clearfix" wmtransclude></ul><wm-datanavigator show="{{show && shownavigation}}" showrecordcount="{{show && showrecordcount}}"></wm-datanavigator></div>')}]).directive("wmLivelist",["$rootScope","$templateCache","$compile","PropertiesFactory","WidgetUtilService","Utils","CONSTANTS",function($rootScope,$templateCache,$compile,PropertiesFactory,WidgetUtilService,Utils,CONSTANTS){"use strict";function getElementsMarkup(scope,attrs){var isWidgetInsideCanvas=scope.widgetid,template=elementsMarkup_start;return isWidgetInsideCanvas||(attrs.hasOwnProperty("onClick")&&(template+=' data-ng-click="onClick({$event: $event, $scope: this})" '),attrs.hasOwnProperty("onMouseenter")&&(template+=' data-ng-mouseenter="onMouseenter({$event: $event, $scope: this})" '),attrs.hasOwnProperty("onMouseleave")&&(template+=' data-ng-mouseleave="onMouseleave({$event: $event, $scope: this})" ')),template+=elementsMarkup_end}var widgetProps=PropertiesFactory.getPropertiesOf("wm.livelist",["wm.base","wm.base.editors","wm.base.events"]),listItemsMarkup="",elementsMarkup_start='<li data-ng-if="showHeader" class="app-list-header">{{name}}</li><li data-ng-repeat="item in fieldDefs track by $index" ',elementsMarkup_end=' class="app-list-item {{itemclass}}"><article compile="innerElements"></article></li>',notifyFor={dataset:!0,showheader:!0,shownavigation:!0,showrecordcount:!0,itemsperrow:!0};return{restrict:"E",replace:!0,scope:{scopedataset:"=?",onClick:"&",onMouseenter:"&",onMouseleave:"&",onEnterkeypress:"&",onSetrecord:"&"},transclude:!0,controller:"listController",template:$templateCache.get("template/widget/list.html"),compile:function(tElement,tAttr){return CONSTANTS.isStudioMode&&(window[tAttr.name+"Controller"]=WM.noop),tAttr.listItemsMarkup=listItemsMarkup,{pre:function(scope){scope.widgetProps=WM.copy(widgetProps)},post:function(scope,element,attrs){function propertyChangeHandler(key,newVal,oldVal){switch(key){case"dataset":scope.watchVariableDataSet(newVal,oldVal),elementScope.fieldDefs=scope.fieldDefs,CONSTANTS.isStudioMode&&(-1!==scope.oldbinddataset&&scope.oldbinddataset!==scope.binddataset?scope.updateLiveListBindings(!0):-1!==scope.oldbinddataset||attrs.dataset||scope.updateLiveListBindings(),scope.oldbinddataset=scope.binddataset,scope.updateSelectedItemDataType());break;case"showheader":scope.toggleHeader(newVal,oldVal);break;case"shownavigation":CONSTANTS.isStudioMode&&(scope.widgetProps.showrecordcount.show=newVal);break;case"itemsperrow":if(CONSTANTS.isStudioMode){var oldClass=oldVal&&"col-md-"+12/+oldVal,newClass=newVal&&"col-md-"+12/+newVal;element.find(".app-listtemplate").removeClass(oldClass).addClass(newClass)}}}var iterMarkup,itemsEle,ele,elementScope=element.scope();elementScope.onClick=scope.onClick,elementScope.onMouseenter=scope.onMouseenter,elementScope.onMouseleave=scope.onMouseleave,elementScope.onEnterkeypress=scope.onEnterkeypress,elementScope.onSetrecord=scope.onSetrecord,elementScope.itemclass=scope.itemclass,void 0===scope.dataset&&(scope.dataset=""),scope.dataNavigator=element.find("[data-identifier=datanavigator]").isolateScope(),scope.oldbinddataset=-1,elementScope.innerElements=scope.markup,iterMarkup=function(elements){WM.forEach(elements,function(element){WM.forEach(element.attributes,function(attribute){if(Utils.stringStartsWith(attribute.value,"bind:")&&-1!==attribute.value.indexOf(attrs.dataset||attrs.scopedataset)){var field=attribute.value.replace((attrs.dataset||"bind:"+attrs.scopedataset)+".","item.");attribute.value="{{"+field+"}}"}}),WM.element(element).children().length>0&&iterMarkup(WM.element(element).children())})},iterMarkup(elementScope.innerElements),ele=getElementsMarkup(scope,attrs),itemsEle=$compile(ele)(elementScope),CONSTANTS.isRunMode&&WM.element(itemsEle).insertAfter(element.find("[data-identifier=listtemplate]")),propertyChangeHandler.notifyFor=notifyFor,scope.propertyManager.add(scope.propertyManager.ACTIONS.CHANGE,propertyChangeHandler),CONSTANTS.isRunMode&&(scope.$watch("scopedataset",function(newVal){newVal&&!scope.dataset&&(scope.createListItems(newVal),elementScope.fieldDefs=scope.fieldDefs)}),element.on("click.wmActive","li",function(){var liElement=WM.element(this);element.find("li.active").removeClass("active"),liElement.addClass("active"),scope.fieldDefs&&(scope.selecteditem=scope.fieldDefs[liElement.index()-1]||null,$rootScope.$safeApply(scope))})),WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.advanced").run(["$templateCache","$rootScope",function($templateCache,$rootScope){"use strict";$templateCache.put("template/widget/advanced/login.html",'<div init-widget class="app-login" data-ng-show="show"'+$rootScope.getWidgetStyles("container")+' ><wm-message scopedataset="loginMessage" class="app-login-message"></wm-message><form autocomplete="off" class="app-form app-login-form" method="post" wmtransclude></form></div>')}]).directive("wmLogin",["PropertiesFactory","$rootScope","$templateCache","WidgetUtilService","Utils","CONSTANTS","Variables","$controller",function(PropertiesFactory,$rootScope,$templateCache,WidgetUtilService,Utils,CONSTANTS,Variables,$controller){"use strict";var widgetProps=PropertiesFactory.getPropertiesOf("wm.login",["wm.base","wm.base.editors","wm.base.events.successerror"]);return{restrict:"E",replace:!0,scope:{onSuccess:"&",onError:"&"},transclude:!0,template:$templateCache.get("template/widget/advanced/login.html"),compile:function(tElement,tAttr){return CONSTANTS.isStudioMode&&(window[tAttr.name+"Controller"]=WM.noop),{pre:function(scope){scope.widgetProps=widgetProps},post:function(scope,element,attrs){if(CONSTANTS.isRunMode){var loginController;try{loginController=scope.name+"Controller",$controller(loginController,{$scope:scope})}catch(e){}element.find(".app-login-button").unbind("click"),element.find(".app-login-button").click(function(event){scope.loginMessage=null;var loginDetails={username:element.find('[name="usernametext"]').val(),password:element.find('[name="passwordtext"]').val()};Variables.call("login","loginVariable",{loginInfo:loginDetails},function(){element.trigger("success"),scope.onSuccess({$event:event,$scope:scope})},function(error){scope.loginMessage={type:"error",caption:scope.errormessage||error},element.trigger("error"),scope.onError({$event:event,$scope:scope})})})}WidgetUtilService.postWidgetCreate(scope,element,attrs)}}}}}]),WM.module("wm.widgets.prefabs").directive("wmPrefab",["PrefabManager","Utils","$compile","PropertiesFactory","WidgetUtilService","CONSTANTS",function(PrefabManager,Utils,$compile,PropertiesFactory,WidgetUtilService,CONSTANTS){"use strict";function getPrefabEl(prefabName,templatePath){return prefabEl.replace("{0}",Utils.preventCachingOf(templatePath))}var prefabEl='<div ng-include src="\'{0}\'" onload="onTemplateLoad()" class="full-width full-height"></div>',prefabDefaultProps=PropertiesFactory.getPropertiesOf("wm.prefabs",["wm.base"]),processedProps={},depsMap={};return{restrict:"E",scope:{prefabname:"@"},replace:!0,template:'<div init-widget class="app-prefab" data-ng-style="{width:width, height:height,marginBottom: marginbottom + marginunit, marginLeft: marginleft + marginunit, marginRight: marginright + marginunit, marginTop: margintop + marginunit }" data-ng-show="show"></div>',compile:function(){return{pre:function(scope){PrefabManager.loadPrefabConfig({name:scope.prefabname},function(details){if(scope.widgetProps=details.properties||{},scope.prefabid=details.id,WM.forEach(prefabDefaultProps,function(prop,propKey){WM.isDefined(scope.widgetProps[propKey])||(scope.widgetProps[propKey]=prop)}),WM.forEach(scope.widgetProps,function(prop){prop.hasOwnProperty("show")||(prop.show=!0),prop.hasOwnProperty("disabled")||(prop.disabled=!1)}),CONSTANTS.isStudioMode&&!processedProps[scope.prefabname]){processedProps[scope.prefabname]=!0;var _defaultGroup,groups=PropertiesFactory.getPropertyGroups(),_props=[];groups=groups.filter(function(group){return!!group.parent}),_defaultGroup=groups.filter(function(group){return!group.name&&"properties"===group.parent})[0],Object.keys(scope.widgetProps).forEach(function(prop){var found=groups.some(function(group){return-1!==group.properties.indexOf(prop)});found||_props.push(prop)}),_defaultGroup&&_props.forEach(function(prop){_defaultGroup.properties.push(prop)})}},!0)},post:function(scope,element,attrs){function compileTemplate(templatePath){var prefabEle=$compile(getPrefabEl(prefabName,templatePath))(scope);element.append(prefabEle),scope.$root.$safeApply(scope)}var prefabName=scope.prefabname;Object.defineProperty(scope,"appLocale",{get:function(){return scope.$root.appLocale}}),scope.onTemplateLoad=function(){var pfScope=element.find("[data-ng-controller]").scope();WidgetUtilService.postWidgetCreate(scope,element,attrs),PrefabManager.postPrefabCreate(scope,element),Utils.triggerFn(pfScope.onInitPrefab),scope.ctrlScope=pfScope},depsMap[prefabName]?compileTemplate(depsMap[prefabName].templatePath):PrefabManager.loadDependencies(prefabName).then(function(templatePath){depsMap[prefabName]={templatePath:templatePath},compileTemplate(templatePath)})}}}}}]).directive("wmPrefabRun",["$rootScope","Utils","$compile","PrefabManager",function($rootScope,Utils,$compile,PrefabManager){"use strict";return{restrict:"E",scope:{},replace:!0,template:"<div init-widget></div>",compile:function(){return{pre:function(scope){scope.widgetProps=[]},post:function(scope,element){var config=$rootScope.prefabConfig;Object.defineProperty(scope,"appLocale",{get:function(){return scope.$root.appLocale}}),config&&(config=config.resources,config.scripts&&(config.scripts=config.scripts.map(function(script){return Utils.stringStartsWith(script,"/resources")&&(script="."+script),script})),config.modules&&(config.modules=config.modules.map(function(module){return module.files=module.files.map(function(file){return Utils.stringStartsWith(file,"/resources")&&(file="."+file),file}),module})),PrefabManager.loadScripts(config.scripts).then(PrefabManager.loadModules.bind(void 0,config.modules)).then(function(){element.append($compile($rootScope.prefabTemplate)(scope))}))}}}}}]),wm.plugins.database=WM.module("wm.plugins.database",[]),wm.plugins.database.directives={},wm.plugins.database.controllers={},wm.plugins.database.services={},wm.plugins.database.factories={},wm.plugins.database.directive(wm.plugins.database.directives),wm.plugins.database.controller(wm.plugins.database.controllers),wm.plugins.database.service(wm.plugins.database.services),wm.plugins.database.factory(wm.plugins.database.factories),wm.plugins.database.constant("DB_SERVICE_URLS",{Database:{importSample:{url:"../services/databaseservice/actions",method:"POST"},testConnection:{url:"../services/databaseservice/actions",method:"POST"},importDB:{url:"../services/databaseservice/actions",method:"POST"},reImportDB:{url:"../services/databaseservice/actions",method:"POST"},exportDB:{url:"../services/databaseservice/actions",method:"POST"},executeDBScript:{url:"../services/databaseservice/executescript",method:"POST",headers:{"Content-Type":void 0},transformRequest:WM.identity},getAllDataModels:{url:"../services/projects/:projectID/datamodels/",method:"GET"},getDataModel:{url:"../services/projects/:projectID/datamodels/:dataModelName?isdraft=:isdraft",method:"GET"},createDataModel:{url:"../services/projects/:projectID/datamodels",method:"POST"},deleteDataModel:{url:"../services/projects/:projectID/datamodels/:dataModelName",method:"DELETE"},saveDataModel:{url:"../services/projects/:projectID/datamodels/:dataModelName/save",method:"POST"},applyDataModel:{url:"../services/projects/:projectID/datamodels/:dataModelName/apply",method:"POST"},revertDataModel:{url:"../services/projects/:projectID/datamodels/:dataModelName/revert",method:"POST"},getAllEntities:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables",method:"GET"},getEntity:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:tableName",method:"GET"},createEntity:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables",method:"POST"},updateEntity:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName",method:"POST"},deleteEntity:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName",method:"DELETE"},addColumns:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/columns",method:"POST"},updateColumn:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/columns/:columnName",method:"PUT"},deleteColumn:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/columns/:columnName",method:"DELETE"},addRelation:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/relations",method:"POST"},updateRelation:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/relations/:relationName",method:"PUT"},deleteRelation:{url:"../services/projects/:projectID/datamodels/:dataModelName/tables/:entityName/relations/:relationName",method:"DELETE"},getAllQueries:{url:"../services/projects/:projectID/datamodels/:dataModelName/queries",method:"GET"},getQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/queries/:queryName",method:"GET"},createQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/queries",method:"POST"},updateQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/queries/:queryName",method:"PUT"},deleteQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/queries/:queryName",method:"DELETE"},validateQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/query/validate",method:"POST"},executeQuery:{url:"../services/projects/:projectID/datamodels/:dataModelName/query/execute",method:"POST"},readTableData:{url:"/:service/:dataModelName/:entityName/?page=:page&size=:size",method:"GET"},insertTableData:{url:"/:service/:dataModelName/:entityName/",method:"POST"},updateTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"PUT"},deleteTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"DELETE"},updateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"PUT"},deleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"DELETE"},searchTableData:{url:"/:service/:dataModelName/:entityName/search?page=:page&size=:size",method:"POST"},executeNamedQuery:{url:"/:service/:dataModelName/queryExecutor/queries/:queryName?page=:page&size=:size&:queryParams",method:"GET"},executeCustomQuery:{url:"/:service/:dataModelName/queryExecutor/queries/wm_custom?page=:page&size=:size",method:"POST"},executeCustomUpdateQuery:{url:"/:service/:dataModelName/queryExecutor/queries/wm_custom_update",method:"POST"},getConnectionProperties:{url:"../services/projects/:projectID/datamodels/:dataModelName/connectionproperties",method:"GET"},updateConnectionProperties:{url:"../services/projects/:projectID/datamodels/:dataModelName/connectionproperties",method:"PUT"}}}),wm.plugins.database.constant("DB_CONSTANTS",{DATABASE_WORKSPACE_TYPE:"db",WAVEMAKER_SAMPLE_DB_NAME:"hrdb",DEFAULT_DB_NAME:"MyTestDatabase",HSQL_DB_TYPE:"HSQLDB",MYSQL_DB_TYPE:"MySQL",POSTGRESQL_DB_TYPE:"PostgreSQL",ORACLE_DB_TYPE:"Oracle",LOGIN:{SAAS_MYSQL_CLOUD:{USERNAME:"root",PASSWORD:"cloudjee123"}},DATABASE_NUMERIC_DATA_TYPES:{big_decimal:"big_decimal",big_integer:"big_integer","double":"double","float":"float",integer:"integer"},DATABASE_DATA_TYPES:{big_decimal:{sql_type:"big_decimal",default_value:"0"},big_integer:{sql_type:"big_integer",default_value:"0"},blob:{sql_type:"blob",default_value:"null"},"boolean":{sql_type:"boolean",default_value:"false"},"byte":{sql_type:"byte",default_value:"null"},character:{sql_type:"character",default_value:"null"},clob:{sql_type:"clob",default_value:"null"},date:{sql_type:"date",default_value:"null"},"double":{sql_type:"double",default_value:"0"},"float":{sql_type:"float",default_value:"0"},integer:{sql_type:"integer",default_value:"0"},string:{sql_type:"string",default_value:"null"},"short":{sql_type:"short",default_value:"0"},text:{sql_type:"text",default_value:"null"},time:{sql_type:"time",default_value:"null"},timestamp:{sql_type:"timestamp",default_value:"null"}},DATABASE_SECONDARY_DATA_TYPES:{binary:{sql_type:"blob",default_value:"null"},"long":{sql_type:"double",default_value:"null"}},DATABASE_GENERATORS:{assigned:"assigned",identity:"auto increment"},DATABASE_MATCH_MODES:{start:"STARTING_WITH",end:"ENDING_WITH",anywhere:"CONTAINING",exact:"EQUALS"},ACTIONS:{CREATE:"CREATE",UPDATE:"UPDATE",DELETE:"DELETE",SAVED:"SAVED"},OBJECTS:{DATABASE:"wm-db",TABLE:"wm-db-table",COLUMN:"wm-db-table-column",RELATION:"wm-db-column-relation"}}),wm.plugins.database.config(function(BaseServiceManagerProvider,DB_SERVICE_URLS){"use strict";BaseServiceManagerProvider.register(DB_SERVICE_URLS)}),wm.plugins.database.services.QueryBuilder=["$rootScope","DatabaseService","Utils",function($rootScope,DatabaseService,Utils){"use strict";return{getQuery:function(options){var selectClause,fromClause,groupByClause,orderByClause,query,columnClause="",whereClause="";return selectClause="SELECT ",options.columns?(columnClause="",WM.forEach(options.columns,function(column){columnClause+=column+","}),columnClause=columnClause.slice(0,-1)):selectClause="",fromClause=" FROM "+options.tableName,options.filterFields&&options.filterFields.length&&(whereClause=" WHERE ",WM.forEach(options.filterFields,function(field){whereClause+=field.clause?field.clause+" AND ":field.column+"='"+field.value+"' AND "}),whereClause=whereClause.slice(0,-4)),groupByClause=options.groupby?" GROUP BY "+options.groupby:"",orderByClause=options.orderby?" ORDER BY "+options.orderby:"",query=selectClause+columnClause+fromClause+whereClause+groupByClause+orderByClause},executeQuery:function(options,success,error){DatabaseService.executeCustomQuery({projectID:$rootScope.project.id,dataModelName:options.databaseName,page:options.page,size:options.size,data:{queryStr:options.query,queryParams:options.queryParams||[],nativeSql:options.nativeSql},url:$rootScope.project.deployedUrl},function(response){Utils.triggerFn(success,response)},function(response){Utils.triggerFn(error,response)})}}}],wm.plugins.database.services.DatabaseService=["$rootScope","BaseService","BaseServiceManager","CONSTANTS","Utils","WebService","$window",function($rootScope,BaseService,BaseServiceManager,CONSTANTS,Utils,WebService,$window){"use strict";var initiateAction=function(action,params,successCallback,failureCallback){var param,val,config,connectionParams,urlParams,requestData;if(config=BaseServiceManager.getConfig(),config=WM.copy(config.Database[action]),requestData=params.data,urlParams=WM.isDefined(params.id)?{projectID:params.projectID,service:WM.isDefined(params.service)?params.service:"services",dataModelName:params.dataModelName,entityName:params.entityName,id:params.id}:{projectID:params.projectID,service:WM.isDefined(params.service)?params.service:"services",dataModelName:params.dataModelName,entityName:params.entityName,queryName:params.queryName,queryParams:params.queryParams,page:params.page,size:params.size},params.url&&CONSTANTS.isStudioMode&&$rootScope.preferences.loadXDomainAppDataUsingProxy){if(urlParams)for(param in urlParams)urlParams.hasOwnProperty(param)&&(val=urlParams[param],WM.isDefined(val)&&null!==val&&(config.url=config.url.replace(new RegExp(":"+param,"g"),val)));
connectionParams={endpointAddress:$window.location.protocol+params.url+config.url,method:config.method,contentType:"application/json",requestBody:JSON.stringify(requestData),headers:{skipSecurity:"true"}},WebService.testRestService(connectionParams,function(response){var parsedData=JSON.parse(response.responseBody);parsedData.hasOwnProperty("result")?Utils.triggerFn(successCallback,parsedData.result):Utils.triggerFn(successCallback,parsedData)},failureCallback)}else connectionParams={target:"Database",action:action,urlParams:urlParams,data:requestData,config:{url:params.url}},CONSTANTS.isStudioMode&&(connectionParams.headers={skipSecurity:"true"}),BaseService.execute(connectionParams,successCallback,failureCallback)};return{importSample:function(projectID,successCallback,failureCallback){BaseService.execute({target:"Database",action:"importSample",data:{projectId:projectID,action:"importSampleDatabase"}},successCallback,failureCallback)},testConnection:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"testConnection",data:{projectId:params.projectID,action:"testDBConnection",databaseDetails:{username:params.username,password:params.password,url:params.url,driver_class:params.driver_class,dialect:params.dialect}}},successCallback,failureCallback)},importDB:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"importDB",data:{projectId:params.projectID,action:"importDatabase",databaseDetails:{serviceId:params.serviceId,packageName:params.packageName,username:params.username,password:params.password,url:params.url,tableFilter:params.tableFilter,schemaFilter:params.schemaFilter,driver_class:params.driver_class,dialect:params.dialect,revengNamingStrategyClassName:params.revengNamingStrategyClassName,impersonateUser:!1,activeDirectoryDomain:params.activeDirectoryDomain}}},successCallback,failureCallback)},reImportDB:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"reImportDB",data:{projectId:params.projectID,action:"reImportDatabase",databaseDetails:{serviceId:params.serviceId}}},successCallback,failureCallback)},exportDB:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"exportDB",data:{projectId:params.projectID,action:"exportDatabase",databaseDetails:{serviceId:params.serviceId,username:params.username,password:params.password,url:params.url,schemaFilter:params.schemaFilter,driver_class:params.driver_class,dialect:params.dialect,revengNamingStrategyClassName:params.revengNamingStrategyClassName,impersonateUser:!1,overwrite:params.overwrite}}},successCallback,failureCallback)},executeDBScript:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"executeDBScript",data:params.content},successCallback,failureCallback)},getAllDataModels:function(projectID,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getAllDataModels",urlParams:{projectID:projectID}},successCallback,failureCallback)},getDataModel:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getDataModel",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,isdraft:params.isdraft}},successCallback,failureCallback)},createDataModel:function(projectID,dataModelName,successCallback,failureCallback){BaseService.execute({target:"Database",action:"createDataModel",urlParams:{projectID:projectID},data:dataModelName},successCallback,failureCallback)},deleteDataModel:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"deleteDataModel",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},saveDataModel:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"saveDataModel",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},applyDataModel:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"applyDataModel",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},revertDataModel:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"revertDataModel",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},getAllEntities:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getAllEntities",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},getEntity:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getEntity",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,tableName:params.tableName}},successCallback,failureCallback)},createEntity:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"createEntity",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName},data:params.data},successCallback,failureCallback)},updateEntity:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"updateEntity",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName},data:params.data},successCallback,failureCallback)},deleteEntity:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"deleteEntity",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName}},successCallback,failureCallback)},addColumns:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"addColumns",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName},data:params.data},successCallback,failureCallback)},updateColumn:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"updateColumn",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName,columnName:params.columnName},data:params.data},successCallback,failureCallback)},deleteColumn:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"deleteColumn",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName,columnName:params.columnName}},successCallback,failureCallback)},addRelation:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"addRelation",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName},data:params.data},successCallback,failureCallback)},updateRelation:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"updateRelation",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName,relationName:params.relationName},data:params.data},successCallback,failureCallback)},deleteRelation:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"deleteRelation",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,entityName:params.entityName,relationName:params.relationName}},successCallback,failureCallback)},getAllQueries:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getAllQueries",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},getQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,queryName:params.queryName}},successCallback,failureCallback)},createQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"createQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName},data:params.data},successCallback,failureCallback)},updateQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"updateQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,queryName:params.queryName},data:params.data},successCallback,failureCallback)},deleteQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"deleteQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName,queryName:params.queryName}},successCallback,failureCallback)},validateQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"validateQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName},data:params.queryDetails},successCallback,failureCallback)},executeQuery:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"executeQuery",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName},data:params.data},successCallback,failureCallback)},getConnectionProperties:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"getConnectionProperties",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName}},successCallback,failureCallback)},updateConnectionProperties:function(params,successCallback,failureCallback){BaseService.execute({target:"Database",action:"updateConnectionProperties",urlParams:{projectID:params.projectID,dataModelName:params.dataModelName},data:params.data},successCallback,failureCallback)},readTableData:function(params,successCallback,failureCallback){initiateAction("readTableData",params,successCallback,failureCallback)},searchTableData:function(params,successCallback,failureCallback){initiateAction("searchTableData",params,successCallback,failureCallback)},insertTableData:function(params,successCallback,failureCallback){initiateAction("insertTableData",params,successCallback,failureCallback)},updateTableData:function(params,successCallback,failureCallback){initiateAction("updateTableData",params,successCallback,failureCallback)},deleteTableData:function(params,successCallback,failureCallback){initiateAction("deleteTableData",params,successCallback,failureCallback)},updateCompositeTableData:function(params,successCallback,failureCallback){initiateAction("updateCompositeTableData",params,successCallback,failureCallback)},deleteCompositeTableData:function(params,successCallback,failureCallback){initiateAction("deleteCompositeTableData",params,successCallback,failureCallback)},executeNamedQuery:function(params,successCallback,failureCallback){initiateAction("executeNamedQuery",params,successCallback,failureCallback)},executeCustomQuery:function(params,successCallback,failureCallback){initiateAction("executeCustomQuery",params,successCallback,failureCallback)},executeCustomUpdateQuery:function(params,successCallback,failureCallback){initiateAction("executeCustomUpdateQuery",params,successCallback,failureCallback)}}}],wm.plugins.webServices=WM.module("wm.plugins.webServices",[]),wm.plugins.webServices.controllers={},wm.plugins.webServices.services={},wm.plugins.webServices.factories={},wm.plugins.webServices.controller(wm.plugins.webServices.controllers),wm.plugins.webServices.service(wm.plugins.webServices.services),wm.plugins.webServices.factory(wm.plugins.webServices.factories),wm.plugins.webServices.constant("WS_SERVICE_URLS",{WebService:{invokeRestCall:{url:"../services/restservices/invoke",method:"POST"},generateRESTWsdlSettings:{url:"../services/restservices/settings",method:"POST"},buildRestService:{url:"../services/restservices/create",method:"POST"},updateRestService:{url:"../services/restservices/update",method:"POST"},importWSDL:{url:"../services/servicegenerator/wsdl",method:"POST"},uploadWSDL:{url:"../services/servicegenerator/wsdl",method:"POST",headers:{"Content-Type":void 0},transformRequest:WM.identity},registerFeedService:{url:"../services/servicegenerator/feed",method:"POST"},getRESTDetails:{url:"../services/projects/:projectID/services/:serviceID/restservice/",method:"GET"},getWSDL:{url:"../services/projects/:projectID/services/:serviceID/wsdl",method:"GET"},getBindingProperties:{url:"../services/projects/:projectID/services/:serviceID/properties",method:"GET"},setBindingProperties:{url:"../services/projects/:projectID/services/:serviceID/properties",method:"POST"},getSchemaElementTypes:{url:"../services/schemaelements",method:"POST"},convertXML:{url:"../services/convert",method:"POST"},listTypes:{url:"../services/projects/:projectID/services/types",method:"GET"},listServicesWithType:{url:"../services/projects/:projectID/services",method:"GET"},getServiceMethods:{url:"../services/projects/:projectID/services/:serviceID/operations",method:"GET"},getServiceOperationParams:{url:"../services/projects/:projectID/services/:serviceID/operations/:operationID",method:"GET"},invoke:{url:"/:serviceFile",method:"POST"},invokeRestService:{url:"/services/:serviceID/:operationID",method:"POST"},invokePrefabRestService:{url:"/:serviceID/:operationID",method:"POST"},remove:{url:"../services/projects/:projectID/services/:serviceID",method:"DELETE"}}}),wm.plugins.webServices.constant("WS_CONSTANTS",{WEBSERVICE_WORKSPACE_TYPE:"ws"}),wm.plugins.webServices.config(function(BaseServiceManagerProvider,WS_SERVICE_URLS){"use strict";BaseServiceManagerProvider.register(WS_SERVICE_URLS)}),wm.plugins.webServices.services.WebService=function(BaseService){"use strict";return{testRestService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"invokeRestCall",data:connectionParams},successCallback,failureCallback)},populateRestService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"generateRESTWsdlSettings",data:connectionParams},successCallback,failureCallback)},buildRestService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"buildRestService",data:connectionParams},successCallback,failureCallback)},updateRestService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"updateRestService",data:connectionParams},successCallback,failureCallback)},importWSDL:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"importWSDL",params:connectionParams},successCallback,failureCallback)},uploadWSDL:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"uploadWSDL",params:connectionParams.params,data:connectionParams.content},successCallback,failureCallback)},listServicesWithType:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"listServicesWithType",urlParams:urlParams},successCallback,failureCallback)},getServiceOperations:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getServiceMethods",urlParams:urlParams},successCallback,failureCallback)},getServiceOperationParams:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getServiceOperationParams",urlParams:urlParams},successCallback,failureCallback)},getRESTDetails:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getRESTDetails",urlParams:urlParams},successCallback,failureCallback)},getWSDL:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getWSDL",urlParams:urlParams},successCallback,failureCallback)},getBindingProperties:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getBindingProperties",urlParams:urlParams},successCallback,failureCallback)},setBindingProperties:function(urlParams,data,successCallback,failureCallback){BaseService.send({target:"WebService",action:"setBindingProperties",urlParams:urlParams,data:data},successCallback,failureCallback)},listTypes:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"listTypes",urlParams:urlParams},successCallback,failureCallback)},getSchemaElementTypes:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"getSchemaElementTypes",data:connectionParams},successCallback,failureCallback)},convertXML:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"convertXML",data:connectionParams},successCallback,failureCallback)},registerFeedService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"registerFeedService",data:connectionParams},successCallback,failureCallback)},invoke:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"invoke",urlParams:{serviceFile:connectionParams.serviceFile},data:{id:123,method:connectionParams.method,params:connectionParams.params},config:{url:connectionParams.url}},successCallback,failureCallback)},invokeRestService:function(connectionParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:connectionParams.target,data:connectionParams.params[2],urlParams:{serviceID:connectionParams.params[0],operationID:connectionParams.params[1]},config:{url:connectionParams.url}},successCallback,failureCallback)},remove:function(urlParams,successCallback,failureCallback){BaseService.send({target:"WebService",action:"remove",urlParams:urlParams},successCallback,failureCallback)}}},wm.plugins.webServices.factories.ServiceFactory=["WebService","wmToaster","$rootScope",function(WebService,wmToaster,$rootScope){"use strict";var services=[],projectId=$rootScope.project&&$rootScope.project.id,getServiceObjectByName=function(name){var serviceObject={operations:[]};return WM.forEach(services,function(serviceObj){serviceObj.name===name&&(serviceObject=serviceObj)}),serviceObject},getServiceOperationObjectByName=function(serviceName,operationName){var serviceObj,operationObject={};return serviceObj=getServiceObjectByName(serviceName),WM.forEach(serviceObj.operations,function(operation){operation.name===operationName&&(operationObject=operation)}),operationObject},getServicesWithType=function(successCallBack,reloadFlag){if(successCallBack=successCallBack&&"function"==typeof successCallBack?successCallBack:function(){},reloadFlag=!(!reloadFlag||"false"===reloadFlag),services.length>0&&!reloadFlag)return void successCallBack(services);var urlParams={projectID:projectId||$rootScope.project.id};WebService.listServicesWithType(urlParams,function(response){services=[],WM.forEach(response,function(serviceObj){services.push({type:serviceObj.type,name:serviceObj.name,operations:[]})}),successCallBack(services)},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_FETCH_WEB_DATA_SERVICES_DESC)})},getServiceOperations=function(serviceId,successCallBack,reloadFlag){if(serviceId&&""!==serviceId){successCallBack=successCallBack&&"function"==typeof successCallBack?successCallBack:function(){},reloadFlag=!(!reloadFlag||"false"===reloadFlag);var urlParams,serviceObj=getServiceObjectByName(serviceId);if(serviceObj.operations.length>0&&!reloadFlag)return void successCallBack(serviceObj.operations);urlParams={projectID:projectId||$rootScope.project.id,serviceID:serviceId},WebService.getServiceOperations(urlParams,function(response){var operations=response;serviceObj.operations=[],WM.forEach(operations,function(operation){var operationObject={};operationObject={name:operation.name,parameter:[],"return":operation.return},serviceObj.operations.push(operationObject),WM.forEach(operation.parameter,function(param){operationObject.parameter.push({name:param.name,typeRef:param.typeRef,isList:param.isList})})}),successCallBack(serviceObj.operations)},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_FETCH_SERVICE_METHODS_DESC)})}},getServiceOperationParams=function(serviceId,operationId,successCallBack,reloadFlag){if(serviceId&&""!==serviceId&&operationId&&""!==operationId){successCallBack=successCallBack&&"function"==typeof successCallBack?successCallBack:function(){},reloadFlag=!(!reloadFlag||"false"===reloadFlag);var operationObj=getServiceOperationObjectByName(serviceId,operationId),urlParams={projectID:projectId||$rootScope.project.id,serviceID:serviceId,operationID:operationId};return operationObj.parameter||(operationObj.parameter=[]),operationObj.parameter.length>0&&!reloadFlag?void successCallBack(operationObj):void WebService.getServiceOperationParams(urlParams,function(response){WM.forEach(response.parameter,function(param){var paramExists=!1;WM.forEach(operationObj.parameter,function(existingParam){param.name===existingParam.name&&(paramExists=!0)}),paramExists||operationObj.parameter.push({name:param.name,typeRef:param.typeRef,isList:param.isList})}),operationObj["return"]=response["return"],successCallBack(operationObj)},function(){wmToaster.show("error",$rootScope.locale.MESSAGE_ERROR_TITLE,$rootScope.locale.MESSAGE_ERROR_FETCH_SERVICE_METHOD_PARAMS_DESC)})}},addService=function(service){var serviceExists=!1;return WM.forEach(services,function(existingService){service.name===existingService.name&&service.type===existingService.type&&(serviceExists=!0)}),serviceExists||services.push({name:service.name,type:service.type,operations:[],sampleResponse:service.sampleResponse}),!serviceExists},getSampleResponse=function(serviceId){var service=getServiceObjectByName(serviceId);return service.sampleResponse},setSampleResponse=function(serviceId,response){var service=getServiceObjectByName(serviceId);service.sampleResponse=response};return{getServicesWithType:getServicesWithType,getServiceOperations:getServiceOperations,getServiceOperationParams:getServiceOperationParams,add:addService,getServiceObjectByName:getServiceObjectByName,getSampleResponse:getSampleResponse,setSampleResponse:setSampleResponse}}],wm.plugins.security=WM.module("wm.plugins.security",[]),wm.plugins.security.controllers={},wm.plugins.security.services={},wm.plugins.security.factories={},wm.plugins.security.directives={},wm.plugins.security.controller(wm.plugins.security.controllers),wm.plugins.security.service(wm.plugins.security.services),wm.plugins.security.factory(wm.plugins.security.factories),wm.plugins.security.directive(wm.plugins.security.directives),wm.plugins.security.constant("SECURITY_URLS",{Security:{getMethods:{url:"../services/projects/:projectID/services/securityService/operations",method:"GET"},getGeneralOptions:{url:"../services/projects/:projectID/securityservice/general",method:"GET"},configDemo:{url:"../services/projects/:projectID/securityservice/providers/demo",method:"POST"},getDemoOptions:{url:"../services/projects/:projectID/securityservice/providers/demo",method:"GET"},configDatabase:{url:"../services/projects/:projectID/securityservice/providers/database",method:"POST"},getDatabaseOptions:{url:"../services/projects/:projectID/securityservice/providers/database",method:"GET"},configAD:{url:"../services/projects/:projectID/securityservice/providers/activedirectory",method:"POST"},getADOptions:{url:"../services/projects/:projectID/securityservice/providers/activedirectory",method:"GET"},configLDAP:{url:"../services/projects/:projectID/securityservice/providers/ldap",method:"POST"},getLDAPOptions:{url:"../services/projects/:projectID/securityservice/providers/ldap",method:"GET"},testLDAPConnection:{url:"../services/projects/:projectID/securityservice/providers/ldap/testconnection",method:"POST"},getCASOptions:{url:"../services/projects/:projectID/securityservice/providers/cas",method:"GET"},configCAS:{url:"../services/projects/:projectID/securityservice/providers/cas",method:"POST"},configCustomAuth:{url:"../services/projects/:projectID/securityservice/providers/customauth",method:"POST"},getCustomAuthOptions:{url:"../services/projects/:projectID/securityservice/providers/customauth",method:"GET"},getPortMapping:{url:"../services/projects/:projectID/securityservice/portmapping",method:"GET"},getSecurityInterceptURLs:{url:"../services/projects/:projectID/securityservice/intercepturls",method:"GET"},setSecurityInterceptURLs:{url:"../services/projects/:projectID/securityservice/intercepturls",method:"POST"},getRoles:{url:"../services/projects/:projectID/securityservice/roles",method:"GET"},setRoles:{url:"../services/projects/:projectID/securityservice/roles",method:"POST"},appLogin:{url:"j_spring_security_check",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}},appLogout:{url:"services/securityService.json",method:"POST"},isAuthenticated:{url:"securityService.json",method:"POST"},getUserName:{url:"securityService.json",method:"POST"},getUserId:{url:"securityService.json",method:"POST"},getTenantId:{url:"securityService.json",method:"POST"},getUserRoles:{url:"securityService.json",method:"POST"},isSecurityEnabled:{url:"securityService.json",method:"POST"}}}),wm.plugins.security.config(function(BaseServiceManagerProvider,SECURITY_URLS){"use strict";BaseServiceManagerProvider.register(SECURITY_URLS)}),wm.plugins.security.services.SecurityService=["BaseService","Utils",function(BaseService,Utils){"use strict";var _roles,_interceptUrls,_generalOptions;return{getMethods:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getMethods",urlParams:{projectID:projectID}},successCallback,failureCallback)},getGeneralOptions:function(projectID,successCallback,failureCallback){_generalOptions?Utils.triggerFn(successCallback,_generalOptions):BaseService.send({target:"Security",action:"getGeneralOptions",urlParams:{projectID:projectID}},function(generalOptions){_generalOptions=generalOptions,Utils.triggerFn(successCallback,generalOptions)},failureCallback)},setGeneralOptions:function(generalOptions){_generalOptions=generalOptions},configDemo:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"configDemo",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getDemoOptions:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getDemoOptions",urlParams:{projectID:projectID}},successCallback,failureCallback)},configDatabase:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"configDatabase",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getDatabaseOptions:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getDatabaseOptions",urlParams:{projectID:projectID}},successCallback,failureCallback)},configAD:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"configAD",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getADOptions:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getADOptions",urlParams:{projectID:projectID}},successCallback,failureCallback)},configLDAP:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"configLDAP",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getLDAPOptions:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getLDAPOptions",urlParams:{projectID:projectID}},successCallback,failureCallback)},testLDAPConnection:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"testLDAPConnection",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getCASOptions:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"getCASOptions",urlParams:{projectID:projectID}},successCallback,failureCallback)},configCAS:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"configCAS",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},configCustomAuth:function(projectID,successCallback,failureCallback){BaseService.send({target:"Security",action:"configCustomAuth",urlParams:{projectID:projectID}},successCallback,failureCallback)},getCustomAuthOptions:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"getCustomAuthOptions",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getPortMapping:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"getPortMapping",urlParams:{projectID:params.projectID},data:params.config},successCallback,failureCallback)},getSecurityInterceptURLs:function(projectID,successCallback,failureCallback){void 0===_interceptUrls?BaseService.send({target:"Security",action:"getSecurityInterceptURLs",urlParams:{projectID:projectID}},function(response){_interceptUrls=response,Utils.triggerFn(successCallback,response)},failureCallback):Utils.triggerFn(successCallback,_interceptUrls)},setSecurityInterceptURLs:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"setSecurityInterceptURLs",urlParams:{projectID:params.projectID},data:params.config},function(response){_interceptUrls=params.config,Utils.triggerFn(successCallback,response)},failureCallback)},getRoles:function(projectID,successCallback,failureCallback){void 0===_roles?BaseService.send({target:"Security",action:"getRoles",urlParams:{projectID:projectID}},function(response){_roles=response,Utils.triggerFn(successCallback,response)},failureCallback):Utils.triggerFn(successCallback,_roles)},setRoles:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"setRoles",urlParams:{projectID:params.projectID},data:params.config},function(response){_roles=params.config,Utils.triggerFn(successCallback,response)},failureCallback)},appLogin:function(params,successCallback,failureCallback){BaseService.send({target:"Security",action:"appLogin",data:"j_username="+params.username+"&j_password="+params.password},successCallback,failureCallback)},appLogout:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"appLogout",data:{params:[],method:"logout",id:783057}},successCallback,failureCallback)},isAuthenticated:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"isAuthenticated",data:{params:[],method:"isAuthenticated",id:783057}},successCallback,failureCallback)},getUserName:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"getUserName",data:{params:[],method:"getUserName",id:783057}},successCallback,failureCallback)},getUserId:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"getUserId",data:{params:[],method:"getUserId",id:783057}},successCallback,failureCallback)},getTenantId:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"getTenantId",data:{params:[],method:"getTenantId",id:783057}},successCallback,failureCallback)},getUserRoles:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"getUserRoles",data:{params:[],method:"getUserRoles",id:783057}},successCallback,failureCallback)},isSecurityEnabled:function(successCallback,failureCallback){BaseService.send({target:"Security",action:"isSecurityEnabled",data:{params:[],method:"isSecurityEnabled",id:783057}},successCallback,failureCallback)
}}}],wm.variables.services.LoginVariableService=["Variables","BaseVariablePropertyFactory","SecurityService","Utils","$window","$rootScope","VARIABLE_CONSTANTS","CONSTANTS",function(Variables,BaseVariablePropertyFactory,SecurityService,Utils,$window,$rootScope,VARIABLE_CONSTANTS,CONSTANTS){"use strict";var methods,loginVariableObj,initiateCallback;return initiateCallback=Variables.initiateCallback,methods={login:function(variableName,options,success,error){var callBackScope,errMsg,paramKey,variable=Variables.getVariableByName(variableName),params={},variableOwner=variable.owner,variableEvents=VARIABLE_CONSTANTS.EVENTS,loginInfo={};callBackScope="App"===variableOwner?$rootScope||{}:variable.prefabName?options.scope||{}:options.scope&&options.scope.$$childTail?options.scope.$$childTail:{},loginInfo=options.loginInfo?options.loginInfo:variable.dataBinding;for(paramKey in loginInfo){if(loginInfo.hasOwnProperty(paramKey)&&(""===loginInfo[paramKey]||void 0===loginInfo[paramKey])){errMsg="Please provide "+paramKey+".";break}params[paramKey]=loginInfo[paramKey]}return errMsg?void(CONSTANTS.isRunMode&&(Utils.triggerFn(error,errMsg),initiateCallback("onError",variable,callBackScope,errMsg))):void SecurityService.appLogin(params,function(){CONSTANTS.isRunMode&&($rootScope.isUserAuthenticated=!0,Utils.triggerFn(success),WM.forEach(variableEvents,function(event){"onError"!==event&&initiateCallback(event,variable,callBackScope)})),variable.useDefaultSuccessHandler&&($window.location="index.html")},function(){CONSTANTS.isRunMode&&initiateCallback("onError",variable,callBackScope,"Invalid username or password."),Utils.triggerFn(error,"Invalid username or password.")})}},loginVariableObj={login:function(success,error){methods.login(this.name,{scope:this.activeScope},success,error)}},BaseVariablePropertyFactory.register("wm.LoginVariable",loginVariableObj,["wm.Variable","wm.ServiceVariable"],methods),{}}],wm.variables.services.LogoutVariableService=["Variables","BaseVariablePropertyFactory","SecurityService","Utils","$window","$location","CONSTANTS","VARIABLE_CONSTANTS","$rootScope",function(Variables,BaseVariablePropertyFactory,SecurityService,Utils,$window,$location,CONSTANTS,VARIABLE_CONSTANTS,$rootScope){"use strict";var methods,logoutVariableObj,initiateCallback;return initiateCallback=Variables.initiateCallback,methods={logout:function(variableName,options,success,error){var callBackScope,performLogout,variable=Variables.getVariableByName(variableName),variableOwner=variable.owner,variableEvents=VARIABLE_CONSTANTS.EVENTS,logoutErrorMessage="No authenticated user to logout.";callBackScope="App"===variableOwner?$rootScope||{}:variable.prefabName?options.scope||{}:options.scope&&options.scope.$$childTail?options.scope.$$childTail:{},performLogout=$rootScope.isUserAuthenticated,performLogout?SecurityService.appLogout(function(){Utils.triggerFn(success),variable.useDefaultSuccessHandler?$window.location=variable.redirectTo||"login.html":CONSTANTS.isRunMode&&WM.forEach(variableEvents,function(event){"onError"!==event&&initiateCallback(event,variable,callBackScope)})},function(){CONSTANTS.isRunMode&&initiateCallback("onError",variable,callBackScope),Utils.triggerFn(error)}):(CONSTANTS.isRunMode&&initiateCallback("onError",variable,callBackScope,logoutErrorMessage),Utils.triggerFn(error,logoutErrorMessage))}},logoutVariableObj={logout:function(success,error){methods.logout(this.name,{scope:this.activeScope},success,error)}},BaseVariablePropertyFactory.register("wm.LogoutVariable",logoutVariableObj,["wm.Variable","wm.ServiceVariable"],methods),{}}],WM.module("i18n",[]),WM.module("i18n").service("i18nService",["$rootScope","Utils","$http","$locale","CONSTANTS","$q",function($rootScope,Utils,$http,$locale,CONSTANTS,$q){"use strict";function extendLocale(dst,src){dst.id=src.id,dst.pluralCat=src.pluralCat,["DATETIME_FORMATS","NUMBER_FORMATS"].forEach(function(type){Object.keys(src[type]).forEach(function(key){dst[type][key]=src[type][key]})})}function loadComponentLocaleBundles(){var deferred=$q.defer(),count=_componentLocalePaths.length,content={};return count||deferred.resolve(content),_componentLocalePaths.forEach(function(path){path+=_selectedLocale+".json",$http.get(path).success(function(response){WM.extend(content,response),count--,count||deferred.resolve(content)})}),deferred.promise}function loadAppLocaleBundle(content){var path=_appLocaleRootPath+_selectedLocale+".json";$http.get(path).success(function(response){WM.extend($rootScope[localeKey],response,content)})}function loadNgLocaleBundle(){var deferred=$q.defer(),ngLocaleFilePath=_ngLocaleRootPath;return ngLocaleFilePath||deferred.resolve(),ngLocaleFilePath+="angular-locale_"+_selectedLocale+".js",WM.element.ajax({dataType:"script",url:ngLocaleFilePath,cache:!0}).done(function(){extendLocale($locale,WM.injector(["ngLocale"]).get("$locale")),deferred.resolve()}),deferred.promise}function loadLocaleBundles(){loadNgLocaleBundle().then(loadComponentLocaleBundles).then(loadAppLocaleBundle)}function setSelectedLocale(locale){_initSuccess&&-1!==_supportedLocale.indexOf(locale)&&locale&&locale!==_selectedLocale&&(_selectedLocale=locale,$rootScope[localeKey]={},loadLocaleBundles())}function getDefaultLocale(){return _defaultLocale}function getSelectedLocale(){return _selectedLocale}function init(supportedLocale,defaultLocale,appLocaleRootPath,ngLocaleRootPath){supportedLocale&&WM.isArray(supportedLocale)&&0!==supportedLocale.length&&(_supportedLocale=supportedLocale,appLocaleRootPath&&0!==appLocaleRootPath.length&&(_appLocaleRootPath=appLocaleRootPath,_defaultLocale=defaultLocale||supportedLocale[0],_ngLocaleRootPath=ngLocaleRootPath,_initSuccess=!0,setSelectedLocale(_defaultLocale)))}function extendAppLocale(path){path+=_selectedLocale+".json",$http.get(path).success(function(response){WM.extend($rootScope.appLocale,response)})}function loadComponentLocaleBundle(path){_initSuccess&&path&&-1===_componentLocalePaths.indexOf(path)&&(_componentLocalePaths.push(path),extendAppLocale(path))}function getLocaleCodesMap(){return localeCodesMap}var _defaultLocale,_appLocaleRootPath,_ngLocaleRootPath,_selectedLocale,_supportedLocale=[],localeKey=CONSTANTS.isStudioMode?"locale":"appLocale",_componentLocalePaths=[],_initSuccess=!1,localeCodesMap={};return localeCodesMap={af:"Afrikaans","af-na":"Afrikaans (Namibi)","af-za":"Afrikaans (Suid-Afrika)",am:"","am-et":" ()",ar:"","ar-001":"() ","ar-ae":"(  )  ","ar-bh":"() ","ar-dz":"() ","ar-eg":"() ","ar-iq":"() ","ar-jo":"() ","ar-kw":"() ","ar-lb":"() ","ar-ly":"() ","ar-ma":"() ","ar-om":"()  ","ar-qa":"()  ","ar-sa":"(  ) ","ar-sd":"() ","ar-sy":"() ","ar-tn":"() ","ar-ye":"() ",bg:"","bg-bg":" ()",bn:"","bn-bd":" ()","bn-in":" ()",ca:"catal","ca-es":"catal (Espanya)",cs:"etina","cs-cz":"etina (esk republika)",da:"dansk","da-dk":"dansk (Danmark)",de:"Deutsch","de-at":"Deutsch (sterreich)","de-be":"Deutsch (Belgien)","de-ch":"Deutsch (Schweiz)","de-de":"Deutsch (Deutschland)","de-li":"Deutsch (Liechtenstein)","de-lu":"Deutsch (Luxemburg)",el:"","el-cy":" ()","el-gr":" ()",en:"English","en-as":"English (American Samoa)","en-au":"English (Australia)","en-bb":"English (Barbados)","en-be":"English (Belgium)","en-bm":"English (Bermuda)","en-bw":"English (Botswana)","en-bz":"English (Belize)","en-ca":"English (Canada)","en-gb":"English (United Kingdom)","en-gu":"English (Guam)","en-gy":"English (Guyana)","en-hk":"English (Hong Kong SAR China)","en-ie":"English (Ireland)","en-in":"English (India)","en-jm":"English (Jamaica)","en-mh":"English (Marshall Islands)","en-mp":"English (Northern Mariana Islands)","en-mt":"English (Malta)","en-mu":"English (Mauritius)","en-na":"English (Namibia)","en-nz":"English (New Zealand)","en-ph":"English (Philippines)","en-pk":"English (Pakistan)","en-sg":"English (Singapore)","en-tt":"English (Trinidad and Tobago)","en-um":"English (U.S. Minor Outlying Islands)","en-us":"English (United States)","en-vi":"English (U.S. Virgin Islands)","en-za":"English (South Africa)","en-zw":"English (Zimbabwe)",es:"espaol","es-419":"espaol (Latinoamrica)","es-ar":"espaol (Argentina)","es-bo":"espaol (Bolivia)","es-cl":"espaol (Chile)","es-co":"espaol (colombia)","es-cr":"espaol (Costa Rica)","es-do":"espaol (Repblica Dominicana)","es-ec":"espaol (Ecuador)","es-es":"espaol (Espaa)","es-gq":"espaola (Guinea Ecuatorial)","es-gt":"espaol (Guatemala)","es-hn":"espaol (Honduras)","es-mx":"espaol (Mxico)","es-ni":"espaol (Nicaragua)","es-pa":"espaol (Panam)","es-pe":"espaol (Per)","es-pr":"espaol (Puerto Rico)","es-py":"espaol (Paraguay)","es-sv":"espaol (El Salvador)","es-us":"espaol (estados unidos)","es-uy":"espaol (Uruguay)","es-ve":"espaol (Venezuela)",et:"eesti","et-ee":"eesti (Eesti)",eu:"euskara","eu-es":"euskara (euskara)",fa:"","fa-af":"() ","fa-ir":"() ",fi:"suomi","fi-fi":"suomi (Suomi)",fil:"Filipino","fil-ph":"Filipino (Pilipinas)",fr:"franais","fr-be":"franais (belgique)","fr-bf":"franais (Burkina Faso)","fr-bi":"franais (Burundi)","fr-bj":"franais (Bnin)","fr-bl":"franais (saints Barthlemy)","fr-ca":"franais (Canada)","fr-cd":"franais (Congo-Kinshasa)","fr-cf":"franais (Rpublique centrafricaine)","fr-cg":"franais (Congo-Brazzaville)","fr-ch":"franais (Suisse)","fr-ci":"franais (Cte dIvoire)","fr-cm":"franais (Cameroun)","fr-dj":"franais (Djibouti)","fr-fr":"franais (France)","fr-ga":"franais (Gabon)","fr-gf":"franais (Guyane franaise)","fr-gn":"franais (Guine)","fr-gp":"franais (Guadeloupe)","fr-gq":"franais (Guine quatoriale)","fr-km":"franais (Comores)","fr-lu":"franais (luxembourg)","fr-mc":"franais (Monaco)","fr-mf":"franais (Saint-Martin)","fr-mg":"franais (Madagascar)","fr-ml":"franais (Mali)","fr-mq":"franais (Martinique)","fr-ne":"franais (Niger)","fr-re":"franais (Runion)","fr-yt":"franais (Mayotte)",gl:"galego","gl-es":"galego (Espaa)",gsw:"Elsssisch",gu:"","gu-in":" ()",he:"","he-il":"() ",hi:"","hi-in":" ()",hr:"hrvatski","hr-hr":"hrvatski (Hrvatska)",hu:"magyar","hu-hu":"magyar (Magyarorszg)",id:"indonesia","id-id":"indonesia (Indonesia)",is:"slenska","is-is":"slenska (sland)",it:"italiano","it-it":"italiano (svizzera)",ja:"","ja-jp":"",kn:"","kn-in":" ()",ko:"","ko-kr":" ()",ln:"Lingala","ln-cd":"Lingala (Congo - Kinshasa)",lt:"lietuvi","lt-lt":"lietuvi (Lietuva)",lv:"latvieu","lv-lv":"latvieu (Latvija)",ml:"","ml-in":" ()",mr:"","mr-in":" ()",ms:"Melayu","ms-my":"Melayu (Malaysia)",mt:"Malti","mt-mt":"Malti (Malta)",nl:"nederlands","nl-cw":"nederlands (Curacao)","nl-nl":"nederlands (Nederland)","nl-sx":"nederlands (Sint Maarten)",no:"norsk",or:"","or-in":" ()",pl:"polski","pl-pl":"polski (Polska)",pt:"Portugus","pt-br":"Portugus (Brasil)","pt-pt":"portugus (Portugal)","pt-st":"portugus (So Tom and Prncipe)",ro:"romn","ro-ro":"romn (Romnia)",ru:"","ru-ru":" ()",sk:"slovenina","sk-sk":"Slovak (Slovakia)",sl:"slovenski","sl-si":"slovenski (Slovenija)",sq:"shqipe","sq-al":"shqipe (Shqipria)",sr:"srpski","sr-cyrl-rs":" ()","sr-latn-rs":"srpski (Srbija)",sv:"svenska","sv-se":"svenska (Sverige)",sw:"Swahili","sw-tz":"Swahili (Tanzania)",ta:"","ta-in":" ()",te:"","te-in":" ( )",th:"","th-th":" ()",tl:"Tigrinya ",tr:"Trke","tr-tr":"Trke (Trkiye)",uk:"","uk-ua":" ()",ur:"","ur-pk":" () ",vi:"Ting Vit","vi-vn":"Ting Vit (Vit Nam)",zh:"","zh-cn":"()","zh-hans-cn":"","zh-hk":"()","zh-tw":"()",zu:"isiZulu","zu-za":"isiZulu (iNingizimu Afrika)"},$rootScope[localeKey]={},$rootScope.getLocalizedMessage=function(){var args=Array.prototype.slice.call(arguments),key=$rootScope[localeKey][args.shift()];return Utils.replace(key,args)},{init:init,getDefaultLocale:getDefaultLocale,getSelectedLocale:getSelectedLocale,setSelectedLocale:setSelectedLocale,loadComponentLocaleBundle:loadComponentLocaleBundle,getLocaleCodesMap:getLocaleCodesMap}}]);var Application=WM.module("Application",["ngRoute","ui.bootstrap","wm.common","wm.variables","wm.plugins.database","wm.plugins.webServices","wm.plugins.security","ngGrid","wm.widgets","wm.layouts","wm.utils","oc.lazyLoad","wm.prefabs","i18n","angular-gestures"]).constant("CONSTANTS",{isRunMode:!0}).controller("AppController",["$rootScope","$scope","$compile","$route","$location","$q","ProjectService","BasicVariableService","$servicevariable","$liveVariable","Variables","NavigationVariableService","NotificationVariableService","LoginVariableService","LogoutVariableService","SecurityService","Utils","i18nService","BaseService","wmToaster",function($rootScope,$scope,$compile,$route,$location,$q,ProjectService,BasicVariableService,$servicevariable,$liveVariable,Variables,NavigationVariableService,NotificationVariableService,LoginVariableService,LogoutVariableService,SecurityService,Utils,i18nService,BaseService,wmToaster){"use strict";function initI18nService(){var supportedLocale,localeVariable=Variables.supportedLocale&&Variables.supportedLocale.dataSet,defaultLocale="en";WM.isObject(localeVariable)&&(supportedLocale=Object.keys(localeVariable)),supportedLocale=supportedLocale||[defaultLocale],i18nService.init(supportedLocale,defaultLocale,APP_LOCALE_PATH,NG_LOCALE_PATH)}WM.element('<i id="wm-mobile-display"></i>').appendTo(".wm-app");var prevRoute,invokeService,invokeGetData,projectID=ProjectService.getId(),projectDeployedUrl=ProjectService.getDeployedUrl(),variables=[],isPrefabProject=!1,NG_LOCALE_PATH="resources/ngLocale/",APP_LOCALE_PATH="resources/i18n/";if(Utils.fetchContent("json","./config.json",function(response){response.error||(isPrefabProject=!0,$rootScope.prefabConfig=response)},WM.noop,!0),$rootScope.project={id:projectID,deployedUrl:projectDeployedUrl},$scope.$on("$routeChangeSuccess",function(){var loadPage,pageName="login.html"===Utils.getCurrentPage()?"Login":$route.current.params.name;Variables.unload($rootScope.activePageName),$rootScope.activePageName=pageName,pageName&&($route.current.templateUrl="pages/"+pageName+"/"+pageName+".html",loadPage=function(){BaseService.getHttpPromise({method:"GET",url:$route.current.templateUrl}).then(function(response){if(response&&response.data){var target=WM.element("#wm-app-content"),page=target.find(".app-page");page.length&&page.scope().$destroy(),isPrefabProject&&($rootScope.prefabTemplate=response.data,response.data="<wm-prefab-run></wm-prefab-run>"),target.html($compile(Utils.processMarkup(response.data))($scope)),Variables.initPageVariables(pageName,$scope,{success:function(variableCollection){variables=variableCollection,isPrefabProject&&initI18nService(),SecurityService.isAuthenticated(function(isAuthenticated){$rootScope.isUserAuthenticated="boolean"==typeof isAuthenticated?isAuthenticated:!1,$rootScope.isUserAuthenticated&&Variables.loggedInUser&&!Variables.loggedInUser.dataSet.name&&(Variables.loggedInUser.dataSet.roles=$rootScope.userRoles,SecurityService.getUserName(function(name){Variables.loggedInUser.dataSet.name=name}),SecurityService.getUserId(function(id){Variables.loggedInUser.dataSet.id=id}),SecurityService.getTenantId(function(tenantId){Variables.loggedInUser.dataSet.tenantId=tenantId}))})}})}})},Application.loadResources(pageName,function(){"login.html"===Utils.getCurrentPage()&&"Login"===pageName?loadPage(pageName):SecurityService.isSecurityEnabled(function(isEnabled){$rootScope.isSecurityEnabled="boolean"==typeof isEnabled?isEnabled:!1,$rootScope.isSecurityEnabled?SecurityService.getUserRoles(function(roles){WM.isArray(roles)&&($rootScope.userRoles=roles),loadPage(pageName)},function(){loadPage(pageName)}):loadPage(pageName)},function(){$rootScope.isSecurityEnabled=!1,loadPage(pageName)})}))}),Application.loadResources=function(pageName,onLoadCallback){var deferred=$q.defer();return Utils.loadStyleSheets(["pages/"+pageName+"/"+pageName+".css"]),Utils.loadScripts(["pages/"+pageName+"/"+pageName+".js"],function(){deferred.resolve(),Utils.triggerFn(onLoadCallback),prevRoute=$location.path()},function(jqxhr){401===jqxhr.status?BaseService.pushToErrorCallStack(null,function(){Application.loadResources(pageName,onLoadCallback)},WM.noop):403===jqxhr.status&&$rootScope.$safeApply($scope,function(){wmToaster.show("error",$rootScope.appLocale.LABEL_ACCESS_DENIED||"Access Denied",$rootScope.appLocale.LABEL_FORBIDDEN_MESSAGE||"The requested webpage you were trying to access is forbidden"),$location.path(prevRoute)})}),deferred.promise},!isPrefabProject&&"login.html"!==Utils.getCurrentPage()){var commonPage="Common",commonPageUrl="pages/"+commonPage+"/"+commonPage+".html";Application.loadResources(commonPage,function(){BaseService.getHttpPromise({method:"GET",url:commonPageUrl}).then(function(response){if(response&&response.data){var target=WM.element("#wm-common-content");target.html($compile(Utils.processMarkup(response.data))($scope)),Variables.init(commonPage,$scope,function(){initI18nService()})}})})}invokeGetData=function(name,activeScope){Variables.call("getData",name,{scope:activeScope},function(data){data=data||{},$rootScope.$emit("invoke-service-end",{name:name}),$rootScope.variables=$rootScope.variables||{},$rootScope.variables[name]=data},function(){$rootScope.$emit("invoke-service-end",{name:name})})},invokeService=$rootScope.$on("invoke-service",function(event,name){if(-1===name.indexOf("(")){var operation,variableType=Variables.getType(name),variable=Variables.getVariableByName(name),activeScope=variable.prefabName?WM.element("[prefabname='"+variable.prefabName+"']").isolateScope().ctrlScope:$scope;"wm.NavigationVariable"===variableType?Variables.call("navigate",name,{scope:activeScope}):"wm.NotificationVariable"===variableType?Variables.call("notify",name,{scope:activeScope}):"wm.ServiceVariable"===variableType?invokeGetData(name,activeScope):"wm.LiveVariable"===variableType?(operation=Variables.getVariableByName(name).operation,"read"===operation?invokeGetData(name,activeScope):Variables.call(operation+"Row",name,{scope:activeScope},function(){$rootScope.$emit("invoke-service-end",{name:name})},function(){$rootScope.$emit("invoke-service-end",{name:name})})):"wm.LoginVariable"===variableType?Variables.call("login",name,{scope:activeScope}):"wm.LogoutVariable"===variableType&&Variables.call("logout",name,{scope:activeScope})}}),$scope.$on("$destroy",invokeService)}]);Application.config(["$routeProvider","$controllerProvider","$filterProvider",function($routeProvider,$controllerProvider,$filterProvider){"use strict";if(Application.$controller=$controllerProvider.register,Application.$filter=$filterProvider.register,"login.html"===window.location.pathname.split("/").pop())$routeProvider.when("/Login",{controllerAs:"AppController"}).otherwise({redirectTo:"Login"});else{var i=0,route="/:name";for($routeProvider.when("/Common",{redirectTo:"Main"}).otherwise({redirectTo:"Main"});6>=i;)$routeProvider.when(route,{controllerAs:"AppController"}),route+="/:param"+ ++i}}]),Application.config(["$ocLazyLoadProvider",function($ocLazyLoadProvider){"use strict";$ocLazyLoadProvider.config({asyncLoader:function(deps,callbackFn){var fn=function(scripts,callback){0===scripts.length?callback&&callback():WM.element.getScript(scripts.shift()).done(function(){fn(scripts,callback)})};fn(deps,callbackFn)}})}]),Application.service("PrefabService",WM.noop);